<!DOCTYPE html>
<html>
<head>
    <title>Untitled Document</title>
    <meta charset="UTF-8">
    <meta name="description" content="">
    <meta name="keywords" content="">
     <script src="js/jquery-3.2.1.min.js"></script>
    <!--    네브바 css-->
    <link rel= "stylesheet" type="text/css" href="css/nav.css">
<!--    네브바 js, 세션검사 -->
    <script src="js/nav.js"></script>
</head>
    <style>
        
    body{   
        background-image: url(img/background/back1.jpg);
        background-repeat: no-repeat;
        background-size: cover;
        background-attachment: fixed;
        background-position: center top;
    }


/*        ///////////////////////////////////////////////////////////////////////////////////////////////*/
        /*        모달창 css 매긴곳.*/
        #realFriend{
            display: none;
            position: fixed;
            transform: translate(-50%, -50%);
            top: 30%;
            left: 30%;
            opacity: 1;
            box-shadow: 0px 10px 14px 0px rgba(0, 0, 0, 0.2);
            
            width: 530px;
            height: 300px;
            background-color: beige;
            z-index: 50;
            
        }
        #findUserImg{
            
            width: 110px;
            height: 100px;
            margin-left: 5px;
            margin-top: 5px;
            display: inline-block;
            position: absolute;
        }
        #findUserName{
            width: 229px;
            height: 45px;
            display: inline-block;
            margin-left: 120px;
            margin-top: 5px;
            color: black;
            
            
        }
        #findUserBirth{
            border: 1px solid black;
            width: 100px;
            height: 45px;
            margin-left: 120px;
            margin-top: 5px;
            display: inline-block;
            text-align: center;
            color: black;
            
        }
        #findUserPhone{
            border: 1px solid black;
            width: 123px;
            height: 45px;
            text-align: center;
            display: inline-block;
            color: black;
            
        }
        #modalAddFriend{
            width: 500px;   
            
        }
        #findFriend{
            text-align: center;
            margin-top: 20px;
            font-size: 30px;
            width: 450px;
            margin-left: 25px;
            color: black;
            
        }
        #findPhoneNumber{
            width: 350px;
            height: 40px;
            margin-left: 25px;
            margin-top: 20px;
            padding-left: 10px;
        }
        #findButton{
            width: 70px;
            height: 45.5px;
            margin-left: 2px;
        }
        #findUserIn{
            margin-top: 20px;
            margin-left: 25px;
            
        }
        #btnAddFriend{
            width: 100px;
            height: 100px;
            display: inline-block;
            position: absolute;
            top: 150px;
            margin-left: 20px;
            
        }
        #findedFriend{
            width: 470px;
            height: 150px;
            
        }
        #delFriend{
            width: 50px;
            height: 50px;
            
        }
        #ch{
            margin-left: 10px;
            margin-top: 10px;
        }
        .eachFriendRequest{
            margin: 20px;
        }
        
        .requestFriendImg{
            width: 100px;
            height: 100px;
        }
        
        
    #blindCover{
        position: absolute;
        top: 0;
        left: 0;
        background-color: black;
        opacity: 0.7;
        display: none;
    }
/*        친구 검색 모달*/
        
        #modal{
            position: fixed;
            top: 50%;
            left: 50%;
            background-color: white;
            transform: translate(-50%,-50%);
            width: 300px;
            height: 150px;
            z-index: 1000;
            overflow: hidden;
            display: none;
        }
        
        .searchTab{
            width: 49%;
            text-align: center;
            height: 60px;
            line-height: 60px;
            font-size: 13px;
            display: inline-block;
            cursor: pointer;
        }
        #idSearch{
            display: none;
        }
        .inputText{
            display: inline-block;
            width: 200px;
            height: 24px;
            margin: auto;
            padding-left: 20px;
            margin-left: 10px;
            border: none;
            border-bottom: 1px solid gray;
            background-color: transparent;
        }
        .btn{
            display: inline-block;
            cursor: pointer;
            font-size: 13px;
            width: 50px;
            height: 24px;
            line-height: 24px;
            text-align: center;
        }
        .searchCover{
            border-top: 1px solid black;
            padding: 30px 0 30px 0;
        }
        #infoCover{
            display: inline-block;
            width: 190px;
            height: 100px;
        }
        #imgCover,#friendImg{
            display: inline-block;
            width: 100px;
            height: 100px;
        }
        .addfriendBtn{
            width: 100px;
            height: 30px;
            line-height: 30px;
            text-align: center;
            font-size: 13px;
            cursor: pointer;
            margin: 0 auto 20px auto;
        }
        .requestMsg{
            text-align: center;
        }
        #main_container{
            margin-left: 100px;
            width: 1250px;
            height: 800px;
        }
        
        #topCover{
            display: block;
            border-bottom: 1px solid gray;
        }
        
        .topListbtn{
            display: inline-block;
            width: 100px;
            height: 50px;
            line-height: 50px;
            text-align: center;
            font-size: 13px;
            cursor: pointer;
        }
        
        /* 친구 커버~*/
                .userIn{
            width: 350px;
            height: 100px;
            cursor: pointer;
            margin: auto;
            margin: 30px 30px;
        }
        .userImgCover{
            width: 80px;
            height: 100px;
            display: inline-block;
        }
        .userImg{
            display: inline-block;
            height: 80px;
            width: 80px;
            border-radius: 80px;
            margin-top: 10px;
        }
        .userName{
            height: 50px;
            display: block;
            font-size: 14px;
            line-height: 50px;
            text-align: center;
        }
        .userBirth{
            width: 100px;
            height: 50px;
            display: inline-block;
            text-align: center;
            font-size: 15px;
        }
        .userPhone{
            width: 140px;
            height: 50px;
            text-align: center;
            display: inline-block;
            font-size: 15px;
        }
                
        .userGender{
             position: absolute;
            top: 20px;
            right: 20px;
            display: inline-block;
            width: 25px;
            height: 25px;
        }
        .userTop{
            position: absolute;
            top: 0;
            left: 80px;
            height: 50px;
            width: 270px;
            display: block;
        }
        .userBottom{
             position: absolute;
            bottom: 0;
            left: 80px;
            height: 50px;
            width: 270px;
            display: block;
            line-height: 50px;
            font-size: 14px;

        }
        .delFriend{
            position: absolute;
            bottom: -10px;
            right: -10px;
        }

    </style>
    <script>
        
        /////친구 목록 가져오기.
        $.ajax({
           type:"post",
            url:"friends.do",
            data:$('#allFriends').serialize(),
            dataType:"json",
            success:function(data){
                var result = data[0].result;
                var out = '';
                
                
                for(var i=0; i < data.length; i++){
                    out += '<div class="userIn">';
                    out += '<div class="userImgCover">';
                    out += '<img src="'+ data[i].MEMBER_IMG +'" class="userImg"></div>';
                    out += '<div class="userTop"><div class="userName">'+ data[i].MEMBER_NAME +'</div></div>';
                    out += '<div class="userBottom"><div class="userBirth">'+ data[i].MEMBER_BIRTH +'</div>';
                    out += '<div class="userPhone">'+ data[i].MEMBER_PHONE +'</div></div>'
                    out += '<input type="hidden" value="아이디" class="MEMBER_ID" name="'+ data[i].MEMBER_ID +'">';
                    out += '<img class="userGender" src="';
                     if(data[i].MEMBER_GENDER == 'F'){
                        out += 'img/etcIcon/gender_f.png"/>';
                    }else{
                        out += 'img/etcIcon/gender_m.png"/>';
                    }
                    out += '<input type="button" class="delFriend" value="친구삭제" onclick="deleteMyfriend(this)"/></div>';
                    
                }
                document.getElementById('allFriends').innerHTML = out;
            } , beforeSend: function () {
                    var width = 0;
                    var height = 0;
                    var left = 0;
                    var top = 0;

                    width = 50;
                    height = 50;


                    top = ( $(window).height() - height ) / 2 + $(window).scrollTop();
                    left = ( $(window).width() - width ) / 2 + $(window).scrollLeft();

       

                    if($("#div_ajax_load_image").length != 0) {
                           $("#div_ajax_load_image").css({
                                  "top": top+"px",
                                  "left": left+"px"
                           });
                           $("#div_ajax_load_image").show();
                    }
                    else {
                           $('body').append('<div id="div_ajax_load_image" style="position:absolute; top:' + top + 'px; left:' + left + 'px; width:' + width + 'px; height:' + height + 'px; z-index:9999; background:#f0f0f0; filter:alpha(opacity=50); opacity:alpha*0.5; margin:auto; padding:0; "><img src="img/loadingImg/ajax_loader6.gif" style="width:50px; height:50px;"></div>');
                    }
                    console.log("통신중");

             }
             , complete: function () {
                           $("#div_ajax_load_image").hide();
                 console.log("통신완료");
             }
            
        });
         function requestFriendMe(){
            
              $.ajax({
                type: "post", 
                url: "RequestingFriend.do",                
                dataType:"json",
                success: function (data){
                    
//                    console.log(data);
                    
//                    console.log(data.length);
                    if(data.length != 0){
//                        console.log("!");
                        $('#requestExist').html('');
                        var out = "";
                        for(var index = 0; index < data.length; index ++){
//                        document.getElementById("requestExist").innerHTML += "<div class='eachFriendRequest'>"
//                            + "<img src ='" + data[index].friendImg + "' class='requestFriendImg' />"
//                            + "<div class='requestFriendName'>" + data[index].friendId + "님에게 친구요청이 왔습니다.</div>"
//                            + "<div> 이름 : " + data[index].friendName + "</div>"
//                            + "<div> 전화번호 : " + data[index].friendPhone + "</div>"
//                            + "<input type=button value='수락' onclick='acceptRequest(this)'/><input type=button value='거절' onclick=refuseRequest(this)/></div>";
//                        
                            
                            out += '<div class="userIn">';
                            out += '<div class="userImgCover">';
                            out += '<img src="'+ data[index].friendImg +'" class="userImg"></div>';
                            out += '<div class="userTop"><div class="userName">'+ data[index].friendId +'님에게 친구요청이 왔습니다.</div></div>';
                            out += '<div class="userBottom"><div class="userBirth">'+ data[index].friendName +'</div>';
                            out += '<div class="userPhone">'+ data[index].friendPhone +'</div></div>'
                            out += '<img class="userGender" src="';
                             if(data[i].friendGender == 'F'){
                                out += 'img/etcIcon/gender_f.png"/>';
                            }else{
                                out += 'img/etcIcon/gender_m.png"/>';
                            }
                            out += '<input type="button" class="delFriend" value="친구삭제" onclick="deleteMyfriend(this)"/></div>';
                            
                        }
                        $('#requestExist').html(out)
                    }else{
                        document.getElementById("requestExist").innerHTML = "<div> 받은 친구 요청이 없습니다. </div>";
                    }
                }, error: function(req) {

                    alert("상태 : " + req.status + ", " + req.responseText + ", error : " + req.error);
                } , beforeSend: function () {
                    var width = 0;
                    var height = 0;
                    var left = 0;
                    var top = 0;

                    width = 50;
                    height = 50;


                    top = ( $(window).height() - height ) / 2 + $(window).scrollTop();
                    left = ( $(window).width() - width ) / 2 + $(window).scrollLeft();

       

                    if($("#div_ajax_load_image").length != 0) {
                           $("#div_ajax_load_image").css({
                                  "top": top+"px",
                                  "left": left+"px"
                           });
                           $("#div_ajax_load_image").show();
                    }
                    else {
                           $('body').append('<div id="div_ajax_load_image" style="position:absolute; top:' + top + 'px; left:' + left + 'px; width:' + width + 'px; height:' + height + 'px; z-index:9999; background:#f0f0f0; filter:alpha(opacity=50); opacity:alpha*0.5; margin:auto; padding:0; "><img src="img\loadingImg\ajax_loader6.gif" style="width:50px; height:50px;"></div>');
                    }
                    console.log("통신중");

             }
             , complete: function () {
                           $("#div_ajax_load_image").hide();
                 console.log("통신완료");
             }
            });
            
            
            
            
        }
        
        
        
        function acceptRequest(a){//친구요청 수락
            var acceptFriendId = $(a).prev().prev().prev().text().split("님")[0]; //요청 수락할 친구 ID
            
             $.ajax({
                type: "post",                  
                url: "AcceptRequest.do",                
                data:{
                    acceptFriendId : acceptFriendId
                },
                dataType:"json",
                success: function (data){
          
                    
                    
                    
                    
                }, error: function(req) {
//                    alert("상태 : " + req.status + ", " + req.responseText + ", error : " + req.error);
                } , beforeSend: function () {
                    var width = 0;
                    var height = 0;
                    var left = 0;
                    var top = 0;

                    width = 50;
                    height = 50;


                    top = ( $(window).height() - height ) / 2 + $(window).scrollTop();
                    left = ( $(window).width() - width ) / 2 + $(window).scrollLeft();

       

                    if($("#div_ajax_load_image").length != 0) {
                           $("#div_ajax_load_image").css({
                                  "top": top+"px",
                                  "left": left+"px"
                           });
                           $("#div_ajax_load_image").show();
                    }
                    else {
                           $('body').append('<div id="div_ajax_load_image" style="position:absolute; top:' + top + 'px; left:' + left + 'px; width:' + width + 'px; height:' + height + 'px; z-index:9999; background:#f0f0f0; filter:alpha(opacity=50); opacity:alpha*0.5; margin:auto; padding:0; "><img src="img\loadingImg\ajax_loader6.gif" style="width:50px; height:50px;"></div>');
                    }
                    console.log("통신중");

             }
             , complete: function () {
                           $("#div_ajax_load_image").hide();
                 console.log("통신완료");
             }
            });
//            location.reload();
            location.href="friendList.html";
        }
        
        
        function deleteMyfriend(a){
            
            var deleteId = $(a).prev().attr("name");
            
            $.ajax({
                type:"post",
                url:"DeleteFriend.do",
                data:{
                    deleteId : deleteId                    
                },
                dataType:"json",
                success:function(data){
                    if(data[0].result == "delete")
                        alert(deleteId + "친구 삭제 완료!");
                    
                    location.reload();
                    
                },error: function(req) {

                    alert("상태 : " + req.status + ", " + req.responseText + ", error : " + req.error);
                } , beforeSend: function () {
                    var width = 0;
                    var height = 0;
                    var left = 0;
                    var top = 0;

                    width = 50;
                    height = 50;


                    top = ( $(window).height() - height ) / 2 + $(window).scrollTop();
                    left = ( $(window).width() - width ) / 2 + $(window).scrollLeft();

       

                    if($("#div_ajax_load_image").length != 0) {
                           $("#div_ajax_load_image").css({
                                  "top": top+"px",
                                  "left": left+"px"
                           });
                           $("#div_ajax_load_image").show();
                    }
                    else {
                           $('body').append('<div id="div_ajax_load_image" style="position:absolute; top:' + top + 'px; left:' + left + 'px; width:' + width + 'px; height:' + height + 'px; z-index:9999; background:#f0f0f0; filter:alpha(opacity=50); opacity:alpha*0.5; margin:auto; padding:0; "><img src="img/loadingImg/ajax_loader6.gif" style="width:50px; height:50px;"></div>');
                    }
                    console.log("통신중");

             }
             , complete: function () {
                           $("#div_ajax_load_image").hide();
                 console.log("통신완료");
             }
                
            });
            
            
            
            
            
        }
        
            
        function addFriend(){
            $('#realFriend').css('display','inline-block');
            $('cont1').css('opacity','1');
        }
        

       function findUserFriend(){
           $.ajax({
                type: "post", 
                url: "FindFriendservlet.do",
                data:
                    { findPhoneNumber:$('#findPhoneNumber').val()},
                dataType:"json",
                success: function (data){
                    console.log(data);
                    $('#findUserName').html(data[0].MEMBER_NAME);
                    $('#findUserPhone').html(data[0].MEMBER_PHONE);
                    $('#findUserBirth').html(data[0].MEMBER_BIRTH);
                }
            });
       }
        //////////////////////////////////////////////////
            function viewSearch(){
        $('#modal').css('display','block');
        $('#blindCover').css('display','block');
        
    }
        


    </script>
    
<body>
    
    <div id="newWrap">
      <nav class="left_nav">
        <div id="userInfo">
            <ul id="user_Img_Cover" class="nav_ul" onclick="location.href='myInfo.html'">
                <li class="nav_li">
                    <img id="user_Img" src=""/>
                </li>
                <li class="nav_li idLi">
                    <div id="user_Id"></div>
                </li>
            </ul>
        </div>
        <ul class="nav_ul" id="nav_menu">
            <li class="nav_li"><a class="nav_text" href="home.html"><img class="navMenuImg" src="img/etcIcon/nav_home.png"/></a></li>
            <li class="nav_li"><a class="nav_text" href="myCalendar.html"><img class="navMenuImg" src="img/etcIcon/nav_mycal.png"/></a></li>
            <li class="nav_li"><a class="nav_text" href="groupList.html"><img class="navMenuImg" src="img/etcIcon/nav_cal.png"/></a></li>
            <li class="nav_li"><div id="navHere"></div><a class="nav_text" href="friendList.html"><img class="navMenuImg" src="img/etcIcon/nav_friend.png"/></a></li>
            <li class="nav_li"><a class="nav_text" href="qnaList.html"><img class="navMenuImg" src="img/etcIcon/nav_qna.png"/></a></li>
        </ul>
        <ul id="logout" class="nav_ul" onclick="logout()">
            <li class="nav_li"><a class="nav_text" onclick="logout();"><img class="navMenuImg" src="img/etcIcon/nav_logout.png"/></a></li>
        </ul>
          
    </nav>
        
        
    <div id="main_container">
                       
        <div id="topCover">
            <div class="topListbtn" id="allFriend" onclick="tabChange(this)"> 전체 </div>
            <div class="topListbtn" id="getFriends" onclick="tabChange(this)"> 받은 친구 요청 </div>
            <div class="topListbtn" id="sendFriends" onclick="tabChange(this)"> 보낸 친구 요청 </div>
            <div class="topListbtn" id="searchFriends" onclick="viewSearch()"> 검색 </div>
        
        </div>
             
        
    <!-- 친구 목록 띄워줌-->
    <div id="allFriends">


    </div> 
        
    <!--        요청 온 친구 목록-->
    <div id="requestExist">
        
    </div>

<!--        보낸 친구 목록-->
    <div id="responseExist">
        
    </div>
        
    </div>                
    </div>
    
    
    <style>
        #responseExist{
            
            margin: 10px;
        }
        
        .responsingFImg{
            width: 100px;
            height: 100px;
            
        }
    
    </style>
    
    
    
            
    <script>
        
    function tabChange(id){
        var ids = $(id).attr('id');
        $('#allFriends').css('display','none');
        $('#requestExist').css('display','none');
        $('#responseExist').css('display','none');
        if(ids == 'allFriend'){
            $('#allFriends').css('display','inline-block');
        }else if(ids == 'getFriends'){
            $('#requestExist').css('display','inline-block');
            requestFriendMe();
        }else if(ids == 'sendFriends'){            
            $('#responseExist').css('display','inline-block');
//            alert("!!!");
//            responseExist
            
            $.ajax({
                type: "post", 
                url: "ResponsingFriends.do",               
                dataType:"json",
                success: function (data){ 
                              
                    document.getElementById("responseExist").innerHTML = "";
                    var out = "";
                    for(var h = 0; h < data.length; h++){                       
                        
//                        document.getElementById("responseExist").innerHTML += "<img src='" + data[h].userImg + "'class= 'responsingFImg'/>"
//                        + "<div>아이디 : " + data[h].userId + "</div>"
//                        + "<div>이름 : " + data[h].userName + "</div>"
//                        + "<div>전화번호 : " + data[h].userPhone + "</div>";
                            out += '<div class="userIn">';
                            out += '<div class="userImgCover">';
                            out += '<img src="'+ data[h].userImg +'" class="userImg"></div>';
                            out += '<div class="userTop"><div class="userName">'+ data[h].userId +'님에게 친구요청이 왔습니다.</div></div>';
                            out += '<div class="userBottom"><div class="userBirth">'+ data[h].userName +'</div>';
                            out += '<div class="userPhone">'+ data[h].userPhone +'</div></div>'
                            out += '<img class="userGender" src="';
                             if(data[i].userGender == 'F'){
                                out += 'img/etcIcon/gender_f.png"/>';
                            }else{
                                out += 'img/etcIcon/gender_m.png"/>';
                            }
                            out += '<input type="button" class="delFriend" value="친구삭제" onclick="deleteMyfriend(this)"/></div>';
                    }
                    $('#responseExist').html("out");
            
                }, error: function(req) {

                    alert("상태 : " + req.status + ", " + req.responseText + ", error : " + req.error);
                } , beforeSend: function () {
                    var width = 0;
                    var height = 0;
                    var left = 0;
                    var top = 0;

                    width = 50;
                    height = 50;


                    top = ( $(window).height() - height ) / 2 + $(window).scrollTop();
                    left = ( $(window).width() - width ) / 2 + $(window).scrollLeft();

       

                    if($("#div_ajax_load_image").length != 0) {
                           $("#div_ajax_load_image").css({
                                  "top": top+"px",
                                  "left": left+"px"
                           });
                           $("#div_ajax_load_image").show();
                    }
                    else {
                           $('body').append('<div id="div_ajax_load_image" style="position:absolute; top:' + top + 'px; left:' + left + 'px; width:' + width + 'px; height:' + height + 'px; z-index:9999; background:#f0f0f0; filter:alpha(opacity=50); opacity:alpha*0.5; margin:auto; padding:0; "><img src="img/loadingImg/ajax_loader6.gif" style="width:50px; height:50px;"></div>');
                    }
                    console.log("통신중");

             }
             , complete: function () {
                           $("#div_ajax_load_image").hide();
                 console.log("통신완료");
             }
            });
            
            
            
            
            
        }
    }    
        


        
        var friendId = "";
        
       
        
        function heightAnimation(tagId,height,time){
             $('#'+tagId).animate({

                height:height,

            }, time);        
        }
        
        function requestFriend(){

            
            $.ajax({
                type: "post", 
                url: "RequestFriend.do",
                data:{
                    friendId: friendId
                    
                },
                dataType:"json",
                success: function (data){
                    
                    
                    console.log(data);
                    if(data[0].friendExist == "Exist")
                        document.getElementById("phoneSearchList").innerHTML = "<div class='requestMsg'> 이미 친구입니다. </div>";
                    else if(data[0].friendExist == "notExist")
                        document.getElementById("phoneSearchList").innerHTML = "<div class='requestMsg'> 친구요청을 보냈습니다. </div>";    
                    else if(data[0].friendExist == "requestExist")
                        document.getElementById("phoneSearchList").innerHTML = "<div class='requestMsg'> 이미 친구요청을 하였습니다. </div>";    
                    else if(data[0].friendExist == "responseExist")
                        document.getElementById("phoneSearchList").innerHTML = "<div class='requestMsg'> 상대방이 나에게 친구 요청을 하였습니다. </div>"; 
                    else if(data[0].friendExist == "me")
                        document.getElementById("phoneSearchList").innerHTML = "<div class='requestMsg'> 자기 자신한테는 요청할수 없습니다. </div>";    
                
                    heightAnimation('modal',180 , 500 );
                }, error: function(req) {

                    alert("상태 : " + req.status + ", " + req.responseText + ", error : " + req.error);
                } , beforeSend: function () {
                    var width = 0;
                    var height = 0;
                    var left = 0;
                    var top = 0;

                    width = 50;
                    height = 50;


                    top = ( $(window).height() - height ) / 2 + $(window).scrollTop();
                    left = ( $(window).width() - width ) / 2 + $(window).scrollLeft();

       

                    if($("#div_ajax_load_image").length != 0) {
                           $("#div_ajax_load_image").css({
                                  "top": top+"px",
                                  "left": left+"px"
                           });
                           $("#div_ajax_load_image").show();
                    }
                    else {
                           $('body').append('<div id="div_ajax_load_image" style="position:absolute; top:' + top + 'px; left:' + left + 'px; width:' + width + 'px; height:' + height + 'px; z-index:9999; background:#f0f0f0; filter:alpha(opacity=50); opacity:alpha*0.5; margin:auto; padding:0; "><img src="img/loadingImg/ajax_loader6.gif" style="width:50px; height:50px;"></div>');
                    }
                    console.log("통신중");

             }
             , complete: function () {
                           $("#div_ajax_load_image").hide();
                 console.log("통신완료");
             }
            });
            
            
            
            
            
        }
        
    function closeModal(){
        $('#blindCover').css('display','none');
        $('#messagMeodal').remove();
        $('#modal').css('display','none');
        
    }
            
    $(document).ready(function(){
        
        $('#blindCover').css("height",$(window).height());
        $('#blindCover').css("width",$(window).width());
        
        $(window).resize(function(){
        
            $('#blindCover').css("height",$(window).height());
            $('#blindCover').css("width",$(window).width());
            
        });
        
    });
        function changeTab(id){
            $('#phoneSearchList').html("");
            var ids = $(id).attr('id');
            if(ids == 'phoneTab'){
                $('#phoneSearch').css('display','block');
                $('#idSearch').css('display','none');
                
                $('#phoneTab').css('background-color','gray');
                $('#idTab').css('background-color','white');
            }else {
                $('#idSearch').css('display','block');
                $('#phoneSearch').css('display','none');
                
                $('#phoneTab').css('background-color','white'); 
                $('#idTab').css('background-color','gray'); 
            }
                heightAnimation('modal',150 , 500 );
        }
    
/* <<<<<<< HEAD
        <div id="dUser">
            <div class="user1"> 
                <div class="user2">
                    <div id="user3">
                        <form method="post" id="ch" action="">
                            <img src="img/member/basis_photo.png" id="uI" name="uI"/>
                        </form>
                    </div>
                        <div id="uName" name="userName"></div>
                        <div id="uPhone" name="userPhone"></div>
                        <div id="uBirth" name="userBirth"></div>
                        <div id="uGender"  name="userGender"></div>
                        <div id="uMemberId" name="userGender"></div>
                        <div id="uStartDay"  name="userStartDay"></div>
                    
                    
<!--                    성별, 아이디, 회원가입한 날자.-->
                    <input type="button" value="친구 삭제" id="btndelFriend">
======= */
        
        
        
        function idSearch(){
            
            var friendId = $('#idSearchInput').val();
            var friendImg = "";
            
            var friendName = "";
            var friendPhoneNum = "";
            var friendGender ="";
            var friendBirth = "";
            
             $.ajax({
                
                
                type: "post", 
                url: "friendPhoneSearch.do",
                data:{
                    friendPhoneId: friendId,
                    selectPhoneOrId: "1"
                    
                },
                dataType:"json",
                success: function (data){
                    console.log(data);
                    friendImg = data[0].friendImg;
                    friendId = data[0].friendId;
                    friendName = data[0].friendName;
                    friendPhoneNum = data[0].friendPhone;
                    friendGender = data[0].friendGender;
                    friendBirth = data[0].friendBirth;
                    
                    if(data[0].userExist == "Exist"){
                        var out = "";
                        out = "<div><div id='imgCover'><img src='" + friendImg + "' id='friendImg'/></div>";
                        out += "<div id='infoCover'><div id='friendId'> 아이디 : " + friendId + "</div>";
                        out += "<div id='friendName'> 이름 : " + friendName + "</div>";
                        out += "<div id='friendPhone'> 전화번호 : " + friendPhoneNum + "</div>";
                        out += "<div id='friendBirth'> 생년월일 : " + friendBirth + "</div></div></div>";
                        out += "<div class='addfriendBtn' onclick='requestFriend()'>친구요청하기</div>";
                        $('#idSearchList').html(out);
                        heightAnimation('modal',300 , 500 );
                    }else if(data[0].userExist == "notExist"){
                        
                        $('#idSearchList').html("<div class='requestMsg'>없는 사용자입니다.</div>");
                        heightAnimation('modal',180 , 500 );
                    }
                    
                    
                   
                }, error: function(req) {

                    alert("상태 : " + req.status + ", " + req.responseText + ", error : " + req.error);
                } , beforeSend: function () {
                    var width = 0;
                    var height = 0;
                    var left = 0;
                    var top = 0;

                    width = 50;
                    height = 50;


                    top = ( $(window).height() - height ) / 2 + $(window).scrollTop();
                    left = ( $(window).width() - width ) / 2 + $(window).scrollLeft();

       

                    if($("#div_ajax_load_image").length != 0) {
                           $("#div_ajax_load_image").css({
                                  "top": top+"px",
                                  "left": left+"px"
                           });
                           $("#div_ajax_load_image").show();
                    }
                    else {
                           $('body').append('<div id="div_ajax_load_image" style="position:absolute; top:' + top + 'px; left:' + left + 'px; width:' + width + 'px; height:' + height + 'px; z-index:9999; background:#f0f0f0; filter:alpha(opacity=50); opacity:alpha*0.5; margin:auto; padding:0; "><img src="img/loadingImg/ajax_loader6.gif" style="width:50px; height:50px;"></div>');
                    }
                    console.log("통신중");

             }
             , complete: function () {
                           $("#div_ajax_load_image").hide();
                 console.log("통신완료");
             }
                 
            });
            
            
            
        }
        
         function phoneSearch(){// 전화번호로 친구 찾기
            var friendPhone = $('#phoneSearchInput').val();
            var friendImg = "";
            
            var friendName = "";
            var friendPhoneNum = "";
            var friendGender ="";
            var friendBirth = "";
           
            
            
//            console.log(friendPhone)
            
            $.ajax({
                
                
                type: "post", 
                url: "friendPhoneSearch.do",
                data:{
                    friendPhoneId: friendPhone,
                    selectPhoneOrId: "0"
                },
                dataType:"json",
                success: function (data){
                    console.log(data);
                    friendImg = data[0].friendImg;
                    friendId = data[0].friendId;
                    friendName = data[0].friendName;
                    friendPhoneNum = data[0].friendPhone;
                    friendGender = data[0].friendGender;
                    friendBirth = data[0].friendBirth;
                    
                    if(data[0].userExist == "Exist"){
                        var out = "";
                        out = "<div><div id='imgCover'><img src='" + friendImg + "' id='friendImg'/></div>";
                        out += "<div id='infoCover'><div id='friendId'> 아이디 : " + friendId + "</div>";
                        out += "<div id='friendName'> 이름 : " + friendName + "</div>";
                        out += "<div id='friendPhone'> 전화번호 : " + friendPhoneNum + "</div>";
                        out += "<div id='friendBirth'> 생년월일 : " + friendBirth + "</div></div></div>";
                        out += "<div class='addfriendBtn' onclick='requestFriend()'>친구요청하기</div>";
                        $('#phoneSearchList').html(out);
                        heightAnimation('modal',300 , 500 );
                    }else if(data[0].userExist == "notExist"){
                        
                        $('#phoneSearchList').html("<div class='requestMsg'>없는 사용자입니다.</div>");
                        heightAnimation('modal',180 , 500 );
                    }
                }, error: function(req) {

                    alert("상태 : " + req.status + ", " + req.responseText + ", error : " + req.error);
                }    , beforeSend: function () {
                    var width = 0;
                    var height = 0;
                    var left = 0;
                    var top = 0;

                    width = 50;
                    height = 50;


                    top = ( $(window).height() - height ) / 2 + $(window).scrollTop();
                    left = ( $(window).width() - width ) / 2 + $(window).scrollLeft();

       

                    if($("#div_ajax_load_image").length != 0) {
                           $("#div_ajax_load_image").css({
                                  "top": top+"px",
                                  "left": left+"px"
                           });
                           $("#div_ajax_load_image").show();
                    }
                    else {
                           $('body').append('<div id="div_ajax_load_image" style="position:absolute; top:' + top + 'px; left:' + left + 'px; width:' + width + 'px; height:' + height + 'px; z-index:9999; background:#f0f0f0; filter:alpha(opacity=50); opacity:alpha*0.5; margin:auto; padding:0; "><img src="img/loadingImg/ajax_loader6.gif" style="width:50px; height:50px;"></div>');
                    }
                    

             }
             , complete: function () {
                           $("#div_ajax_load_image").hide();
                
             }



      
            });
            
        }
        
        
    </script>
    
    <div id = "addFriends" style="margin-left:120px">
       
       
            <div id = 'modal'> 
                <div class="searchTab" id="phoneTab" onclick="changeTab(this)"> 연락처로 친구 찾기 </div>
                <div class="searchTab" id="idTab" onclick="changeTab(this)"> 아이디로 친구 찾기 </div>
                
                
                <div id="heightGet">

                    
                <div id='phoneSearch' class="searchCover">
                    <div id="inputPhone">
                        <input type='text' id="phoneSearchInput" class="inputText" placeholder='전화번호를 입력하세요' onkeyup='if(event.keyCode==13) {phoneSearch();}'/>
                    <div class="btn" onclick='phoneSearch();' >검색</div>
                    </div>
                </div>
                
                <div id='idSearch' class="searchCover">
                    <input type='text' id="idSearchInput" class="inputText" placeholder='아이디를 입력하세요' onkeyup='if(event.keyCode==13) {idSearch();}'/>
                    <div class="btn" onclick='idSearch();' >검색</div>
                </div>    
<!--                검색 결과-->
                    <div id="phoneSearchList">
                    
                        
                    </div>
                    <div id="idSearchList">
                    
                        
                    </div>
                </div>
            </div>
                    <div id="blindCover" onclick="closeModal();">
            </div>
        
        
        


        
    
    </div>
    
</body>
</html>
