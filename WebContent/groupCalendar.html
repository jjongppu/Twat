<!DOCTYPE html>
<html>

<head>
	<title>단체페이지</title>
	<meta charset="UTF-8">
	<meta name="description" content="">
	<meta name="keywords" content="">
	<link rel="stylesheet" type="text/css" href="css/swiper.min.css">
	<link rel="stylesheet" type="text/css" href="css/groupCalendar.css">
	<!--    <link rel="stylesheet" type="text/css" href="css/nav.css">-->
	<!--    네브바 js, 세션검사 -->
	<script src="js/jquery-3.2.1.min.js"></script>
	<script src="js/nav.js"></script>
	<script src="js/swiper.jquery.min.js"></script>
    <link href="http://fonts.googleapis.com/earlyaccess/hanna.css" rel="stylesheet">
	<script  type="text/javascript">
        
        
        var COLOR1 = new Array('ddbbbb','eecccc','ffdddd',
                                'ddc3bb','eed4cc','ffe5dd',
                                'ddccbb','eeddcc','ffeedd',
                                'ddd4bb','eee5cc','fff6dd',
                                'ddddbb','eeeecc','ffffdd',
                                'd4ddbb','e5eecc','f6ffdd',
                                'ccddbb','ddeecc','eeffdd',
                                'c3ddbb','d4eecc','e5ffdd',
                                'bbddbb','cceecc','ddffdd',
                                'bbddc3','cceed4','ddffe5',
                                'bbddcc','cceedd','ddffee',
                                'bbddd4','cceee5','ddfff6');
           
        var COLOR2 = new Array('bbdddd','cceeee','ddffff',
                                'bbd4dd','cce5ee','ddf6ff',
                                'bbccdd','ccddee','ddeeff',
                                'bbc3dd','ccd4ee','dde5ff',
                                'bbbbdd','ccccee','ddddff',
                                'c3bbdd','d4ccee','e5ddff',
                                'ccbbdd','ddccee','eeddff',
                                'd4bbdd','e5ccee','f6ddff',
                                'ddbbdd','eeccee','ffddff',
                                'ddbbd4','eecce5','ffddf6',
                                'ddbbcc','eeccdd','ffddee',
                                'ddbbc3','eeccd4','ffdde5');
        
        
		// 일정 잡기 저장용
		var scheSet = new Set();
		// 생일자 저장용
		var birthSet = new Set();
		// 일정(확정) 저장용
		var scheduleSet = new Set();
		// 일정(미확정) 저장용
		var voteSet = new Set();
		// 전체 일정 저장용
		var groupScheduleSet = new Set();
		// 투표한 날짜 저장용
		var memberVoteListSet = new Set();
		// 임시 저장
		var memTempList = new Set();
		// 색칠용 셋
		var barColorSet = new Set();
		// 해당 방의 인원수
		var groupCount = 0;
		var initDay = new Date();
		// swiperBirth
		var swiper;
		// swiper Schedule
		var swiperSche;
		// swiper Vote
		var swiperVote;
		// swiper Comment
		var swiperComment;
		// swiper Select
		var swiperSelect;
		var cal_date = "";
		// 해당 방의 방장
		var group_master = "";
		// 현재 로그인한 유저의 아이디
		var login_userId = "";
		var nowCalNum = "";
		/*음력 알고리즘..시작*/
		function gfnRight(strString, nSize) {
			var nStart = String(strString).length;
			var nEnd = Number(nStart) - Number(nSize);
			var rtnVal = strString.substring(nStart, nEnd);
			return rtnVal;
		}

		function gfnIsEmpty(val) {
			var sVal = new String(val);
			val = new String(val);
			if (val == null || val == "null" || sVal.trim().length <= 0 || escape(val) == "undefined") {
				return true;
			} else {
				return false;
			}
		}
		/*******************************************************************************
		 * Function명 : gfnToday
		 * 설명          : 해당 PC의 오늘 날짜를 가져온다.
		 * parameter  : None
		 * return        : string
		 ******************************************************************************/
		function gfnToday() {
			var strToday = "";
			var objDate = new Date();
			var strToday = objDate.getFullYear() + "";
			strToday += gfnRight("0" + (objDate.getMonth() + 1), 2);
			strToday += gfnRight("0" + objDate.getDate(), 2);
			return strToday;
		}
		/*******************************************************************************
		 * Function명 : gfnTodayTime
		 * 설명       : 해당 PC의 오늘 날짜+시간를 가져온다.
		 * parameter : None
		 * return         : string
		 ******************************************************************************/
		function gfnTodayTime() {
			var strToday = "";
			var objDate = new Date();
			var strToday = objDate.getFullYear() + "";
			strToday += gfnRight("0" + (objDate.getMonth() + 1), 2);
			strToday += gfnRight("0" + objDate.getDate(), 2);
			strToday += gfnRight("0" + objDate.getHours(), 2);
			strToday += gfnRight("0" + objDate.getMinutes(), 2);
			strToday += gfnRight("0" + objDate.getSeconds(), 2);
			return strToday;
		}
		/*******************************************************************************
		 * Function명: gfnCurrentTime
		 * 설명      : 해당 PC의 현재시간를 가져온다.
		 * parameter : None
		 * return    : string
		 ******************************************************************************/
		function gfnCurrentTime() {
			var strCurrentTime = "";
			var objDate = new Date();
			strCurrentTime += gfnRight("0" + objDate.getHours(), 2);
			strCurrentTime += gfnRight("0" + objDate.getMinutes(), 2);
			strCurrentTime += gfnRight("0" + objDate.getSeconds(), 2);
			return strCurrentTime;
		}
		/**********************************************************************************
		 * 함수명      : gfnAddDate
		 * 설명        : 입력된 날자에 OffSet 으로 지정된 만큼의 일을 더한다.
		 *               Date Type을 String으로 변환
		 * argument    : date ('yyyyMMdd' 형태로 표현된 날자)
		 *               nOffSet (날짜로부터 증가 감소값. 지정하지 않으면 Default Value = 1 로 적용됩니다)
		 * return Type : String
		 * return 내용 : Date에 nOffset이 더해진 결과를 'yyyyMMdd'로 표현된 날자.
		 **********************************************************************************/
		function gfnAddDate(date, nOffSet) {
			var nYear = parseInt(date.substr(0, 4));
			var nMonth = parseInt(date.substr(4, 2));
			var nDate = parseInt(date.substr(6, 2)) + nOffSet;
			return gfnDatetime(nYear, nMonth, nDate);
			//            aHoliday[0] = gfnLunar2Solar( "0" + (nYear-1) + "1230" ) + "설날";
			//            return gfnLunar2Solar( "0" + (nYear) + nMonth + nDate );
		}
		/**********************************************************************************
		 * 함수명      : gfnAddMonth
		 * 설명        : 입력된 날자에 OffSet 으로 지정된 만큼의 달을 더한다.
		 *               Date Type을 String으로 변환
		 * argument    : date ('yyyyMMdd' 형태로 표현된 날자)
		 *               nOffSet (날짜로부터 증가 감소값. 지정하지 않으면 Default Value = 1 로 적용됩니다)
		 * return Type : String
		 * return 내용 : Date에 nOffset이 더해진 결과를 'yyyyMMdd'로 표현된 날자.
		 **********************************************************************************/
		function gfnAddMonth(date, nOffSet) {
			var nYear = parseInt(date.substr(0, 4));
			var nMonth = parseInt(date.substr(4, 2)) + nOffSet;
			var nDate = parseInt(date.substr(6, 2));
			return gfnDatetime(nYear, nMonth, nDate);
		}
		/**********************************************************************************
		 * 함수명      : gfnDatetime
		 * 설명        : MiPlatform에서 사용하던 Datetime형식으로 변환
		 *               Date Type을 String으로 변환
		 * argument    : nYear (년도)
		 *               nMonth (월)
		 *               nDate (일)
		 * return Type : String
		 * return 내용 : 조합한 날짜를 리턴
		 **********************************************************************************/
		function gfnDatetime(nYear, nMonth, nDate) {
			if (nYear.toString().trim().length >= 5) {
				var sDate = new String(nYear);
				var nYear = sDate.substr(0, 4);
				var nMonth = sDate.substr(4, 2);
				var nDate = ((sDate.substr(6, 2) == "") ? 1 : sDate.substr(6, 2));
				var nHours = ((sDate.substr(8, 2) == "") ? 0 : sDate.substr(8, 2));
				var nMinutes = ((sDate.substr(10, 2) == "") ? 0 : sDate.substr(10, 2));
				var nSeconds = ((sDate.substr(12, 2) == "") ? 0 : sDate.substr(12, 2));
				var objDate = new Date(parseInt(nYear), parseInt(nMonth) - 1, parseInt(nDate), parseInt(nHours), parseInt(nMinutes), parseInt(nSeconds));
			} else {
				var objDate = new Date(parseInt(nYear), parseInt(nMonth) - 1, parseInt(((nDate == null) ? 1 : nDate)));
			}
			var strYear = objDate.getYear().toString();
			var strMonth = (objDate.getMonth() + 1).toString();
			var strDate = objDate.getDate().toString();
			if (strMonth.length == 1) strMonth = "0" + strMonth;
			if (strDate.length == 1) strDate = "0" + strDate;
			return strYear + strMonth + strDate;
		}
		/******************************************************************************
		 * Function명 : gfnGetDiffDay
		 * 사용법 : gfnGetDiffDay("20090808", "20091001")
		 * 설명       : 2개의 날짜간의 Day count
		 * Params     : sFdate   시작일자
		 *              sTdate   종료일자
		 * Return     : 양 일자간의 Day count
		 ******************************************************************************/
		function gfnGetDiffDay(sFdate, sTdate) {
			sFdate = new String(sFdate);
			sFdate = sFdate.replace(" ", "").replace("-", "").replace("/", "");
			sTdate = new String(sTdate);
			sTdate = sTdate.replace(" ", "").replace("-", "").replace("/", "");
			sFdate = gfnLeft(sFdate, 8);
			sTdate = gfnLeft(sTdate, 8);
			if (sFdate.length != 8 || sTdate.length != 8 || isNumeric(sFdate) == false || isNumeric(sTdate) == false || gfnGetDay(sFdate) == -1 || gfnGetDay(sTdate) == -1) {
				return null;
			}
			var nDiffDate = gfnStrToDate(sTdate) - gfnStrToDate(sFdate);
			var nDay = 1000 * 60 * 60 * 24;
			nDiffDate = parseInt(nDiffDate / nDay);
			if (nDiffDate < 0) {
				nDiffDate = nDiffDate - 1;
			} else {
				nDiffDate = nDiffDate + 1;
			}
			return nDiffDate;
		}
		/******************************************************************************
		 * Function명 : gfnDateCheck
		 * 설명       : 날짜에 대한 형식 체크
		 * Params     : sFdate   검사일자
		 * Return     : 유효성반환 (날짜형식이 아닐경우 FLASE)
		 ******************************************************************************/
		function gfnDateCheck(sDate) {
			sDate = sDate.replace(" ", "").replace("-", "").replace("/", "");
			if (isNumeric(sDate) == false || gfnGetDay(sDate) == -1 /*|| datetime(sDate) == datetime("00000101")*/ ) {
				return false;
			}
			return true;
		}
		/******************************************************************************
		 * Function명 : gfnGetDay
		 * 설명       : 입력된 날자로부터 요일을 구함
		 * Params     : sDate  8자리 형식으로된 날짜. yyyyMMdd의 형식으로 입력됩니다.
		 * Return     : 요일에 따른 숫자.
		 *              0 = 일요일 ~ 6 = 토요일 로 대응됩니다.
		 *              오류가 발생할 경우 -1이 Return됩니다.
		 ******************************************************************************/
		function gfnGetDay(sDate) {
			var objDate = gfnStrToDate(sDate);
			return objDate.getDay();
		}
		/*******************************************************************************
		 * 함수명      : gfnStrToDate
		 * 설명        : 반자를 전자로 변환하는 함수
		 * argument    : sDate 8자리 형식으로된 날짜. yyyyMMdd의 형식으로 입력됩니다.
		 * Return      : Date
		 *******************************************************************************/
		function gfnStrToDate(sDate) {
			var nYear = parseInt(sDate.substr(0, 4));
			var nMonth = parseInt(sDate.substr(4, 2)) - 1;
			var nDate = parseInt(sDate.substr(6, 2));
			return new Date(nYear, nMonth, nDate);
		}
		/******************************************************************************
		 * 2010.05.11. 권세준 추가 시작
		 ******************************************************************************/
		/******************************************************************************
		 * Function명 : gfnGetDayName
		 * 설명       : 입력된 날자로부터 요일명을 구함
		 * Params     : sDate  8자리 형식으로된 날짜. yyyyMMdd의 형식으로 입력됩니다.
		 * Return     : 요일명
		 ******************************************************************************/
		function gfnGetDayName(sDate) {
			var objDayName = new Array("일요일", "월요일", "화요일", "수요일", "목요일", "금요일", "토요일");
			var objDate = gfnGetDay(sDate);
			return objDayName[objDate];
		}
		/******************************************************************************
		 * Function명 : gfnIsLeapYear
		 * 설명       : 윤년여부 확인
		 * Params     : sDate : yyyyMMdd형태의 날짜 ( 예 : "20121122" )
		 * Return     : 
		 *               - sDate가 윤년인 경우 = true
		 *     - sDate가 윤년이 아닌 경우 = false
		 *       - sDate가 입력되지 않은 경우 = false
		 ******************************************************************************/
		function gfnIsLeapYear(sDate) {
			var ret;
			var nY;
			if (gfnIsEmpty(sDate)) return false;
			nY = parseInt(sDate.substring(0, 4), 10);
			if ((nY % 4) == 0) {
				if ((nY % 100) != 0 || (nY % 400) == 0) ret = true;
				else ret = false;
			} else ret = false;
			return ret;
		}
		/******************************************************************************
		 * Function명 : gfnLastDateNum
		 * 설명       : 해당월의 마지막 날짜를 숫자로 구하기
		 * Params     : sDate : yyyyMMdd형태의 날짜 ( 예 : "20121122" )
		 * Return     : 
		 *               - 성공 = 마지막 날짜 숫자값 ( 예 : 30 )
		 *     - 실패 = -1
		 ******************************************************************************/
		function gfnLastDateNum(sDate) {
			var nMonth, nLastDate;
			if (gfnIsEmpty(sDate)) return -1;
			nMonth = parseInt(sDate.substr(4, 2), 10);
			if (nMonth == 1 || nMonth == 3 || nMonth == 5 || nMonth == 7 || nMonth == 8 || nMonth == 10 || nMonth == 12) nLastDate = 31;
			else if (nMonth == 2) {
				if (gfnIsLeapYear(sDate) == true) nLastDate = 29;
				else nLastDate = 28;
			} else nLastDate = 30;
			return nLastDate;
		}
		/******************************************************************************
		 * Function명 : gfnLastDate
		 * 설명       : 해당월의 마지막 날짜를 yyyyMMdd형태로 구하기 
		 * Params     : sDate : yyyyMMdd형태의 날짜 ( 예 : "20121122" )
		 * Return     : 
		 *               - 성공 = yyyyMMdd형태의 마지막 날짜 ( 예 : "20121130" )
		 *     - 실패 = ""
		 ******************************************************************************/
		function gfnLastDate(sDate) {
			if (gfnIsEmpty(sDate)) return "";
			var nLastDate = gfnLastDateNum(sDate);
			return sDate.substr(0, 6) + nLastDate.toString();
		}
		/******************************************************************************
		 * Function명 : gfnSolar2Lunar
		 * 설명       : 양력을 음력으로 변환해주는 함수 (처리가능 기간  1841 - 2043년)
		 * Params     : sDate : yyyyMMdd형태의 양력일자 ( 예 : "20121122" )
		 * Return     : return값이 8자리가 아니고 9자리임에 주의
		 *               - 성공 = Flag(1 Byte) + (yyyyMMdd형태의 음력일자)
		 *        ( Flag : 평달 = "0", 윤달 = "1" )
		 *       - 실패 = "" ( 1841 ~ 2043 범위 오류시 )
		 ******************************************************************************/
		function gfnSolar2Lunar(sDate) {
			var sMd = "31,0,31,30,31,30,31,31,30,31,30,31";
			var aMd = new Array();
			var aBaseInfo = new Array();
			var aDt = new Array(); // 매년의 음력일수를 저장할 배열 변수
			var td; // 음력일을 계산하기 위해 양력일과의 차이를 저장할 변수
			var td1; // 1840년까지의 날수
			var td2; // 현재까지의 날수
			var mm; // 임시변수
			var nLy, nLm, nLd; // 계산된 음력 년, 월, 일을 저장할 변수
			var sLyoon; // 현재월이 윤달임을 표시
			if (gfnIsEmpty(sDate)) return "";
			sY = parseInt(sDate.substr(0, 4), 10);
			sM = parseInt(sDate.substr(4, 2), 10);
			sD = parseInt(sDate.substr(6, 2), 10);
			if (sY < 1841 || sY > 2043) return "";
			aBaseInfo = _SolarBase();
			aMd = sMd.split(",");
			if (gfnIsLeapYear(sDate) == true) aMd[1] = 29;
			else aMd[1] = 28;
			td1 = 672069; // 672069 = 1840 * 365 + 1840/4 - 1840/100 + 1840/400 + 23  //1840년까지 날수
			// 1841년부터 작년까지의 날수
			td2 = (sY - 1) * 365 + parseInt((sY - 1) / 4) - parseInt((sY - 1) / 100) + parseInt((sY - 1) / 400);
			// 전월까지의 날수를 더함
			for (i = 0; i <= sM - 2; i++) td2 = td2 + parseInt(aMd[i]);
			// 현재일까지의 날수를 더함
			td2 = td2 + sD;
			// 양력현재일과 음력 1840년까지의 날수의 차이
			td = td2 - td1 + 1;
			// 1841년부터 음력날수를 계산
			for (i = 0; i <= sY - 1841; i++) {
				aDt[i] = 0;
				for (j = 0; j <= 11; j++) {
					switch (parseInt(aBaseInfo[i * 12 + j])) {
						case 1:
							mm = 29;
							break;
						case 2:
							mm = 30;
							break;
						case 3:
							mm = 58; // 29 + 29
							break;
						case 4:
							mm = 59; // 29 + 30
							break;
						case 5:
							mm = 59; // 30 + 29
							break;
						case 6:
							mm = 60; // 30 + 30
							break;
					}
					aDt[i] = aDt[i] + mm;
				}
			}
			// 1840년 이후의 년도를 계산 - 현재까지의 일수에서 위에서 계산된 1841년부터의 매년 음력일수를 빼가면수 년도를 계산
			nLy = 0;
			do {
				td = td - aDt[nLy];
				nLy = nLy + 1;
			}
			while (td > aDt[nLy]);
			nLm = 0;
			sLyoon = "0"; // 현재월이 윤달임을 표시할 변수 - 기본값 평달
			do {
				if (parseInt(aBaseInfo[nLy * 12 + nLm]) <= 2) {
					mm = parseInt(aBaseInfo[nLy * 12 + nLm]) + 28;
					if (td > mm) {
						td = td - mm;
						nLm = nLm + 1;
					} else break;
				} else {
					switch (parseInt(aBaseInfo[nLy * 12 + nLm])) {
						case 3:
							m1 = 29;
							m2 = 29;
							break;
						case 4:
							m1 = 29;
							m2 = 30;
							break;
						case 5:
							m1 = 30;
							m2 = 29;
							break;
						case 6:
							m1 = 30;
							m2 = 30;
							break;
					}
					if (td > m1) {
						td = td - m1;
						if (td > m2) {
							td = td - m2;
							nLm = nLm + 1;
						} else {
							sLyoon = "1";
						}
					} else {
						break;
					}
				}
			}
			while (1);
			nLy = nLy + 1841;
			nLm = nLm + 1;
			nLd = td;
			return sLyoon + nLy + gfnRight("0" + nLm, 2) + gfnRight("0" + nLd, 2);
		}
		/******************************************************************************
		 * Function명 : gfnLunar2Solar
		 * 설명       : 음력을 양력으로 변환해주는 함수 (처리가능 기간  1841 - 2043년)
		 * Params     : sDate : Flag(1 Byte)+yyyyMMdd형태의 음력일자 ( 예 : "020121122" ) ( Flag : 평달 = "0", 윤달 = "1" )
		 * Return     : 
		 *               - 성공 = yyyyMMdd형태의 양력일자
		 *        ( Flag : 평달 = "0", 윤달 = "1" )
		 *       - 실패 = null 
		 *           - 1841 ~ 2043 범위 오류의 경우
		 *           - sDate가 9자리가 아닐경우
		 *           - sDate의 첫자리 Flag가 "0"도 아니고 "1"도 아닌 경우
		 ******************************************************************************/
		function gfnLunar2Solar(sDate) {
			var sMd = "31,0,31,30,31,30,31,31,30,31,30,31";
			var aMd = new Array();
			var aBaseInfo = new Array();
			var nLy, nLm, nLd, sLflag; // 전해온 음력 인자값을 저장할 년, 월, 일, 윤달여부 임시변수
			var nSy, nSm, nSd; // 계산된 양력 년, 월, 일을 저장할 변수
			var y1, m1, i, j, y2, y3; // 임시변수 
			var leap;
			if (gfnIsEmpty(sDate)) return "";
			if (sDate.length != 9) return "";
			sLflag = sDate.substr(0, 1);
			nLy = parseInt(sDate.substr(1, 4), 10);
			nLm = parseInt(sDate.substr(5, 2), 10);
			nLd = parseInt(sDate.substr(7, 2), 10);
			if (nLy < 1841 || nLy > 2043) return "";
			if (sLflag != "0" && sLflag != "1") return "";
			aBaseInfo = _SolarBase();
			aMd = sMd.split(",");
			if (gfnIsLeapYear(sDate.substr(1, 8)) == true) aMd[1] = 29;
			else aMd[1] = 28;
			y1 = nLy - 1841;
			m1 = nLm - 1;
			leap = 0;
			if (parseInt(aBaseInfo[y1 * 12 + m1]) > 2) leap = gfnIsLeapYear(nLy + "0101");
			if (leap == 1) {
				switch (parseInt(aBaseInfo[y1 * 12 + m1])) {
					case 3:
						mm = 29;
						break;
					case 4:
						mm = 30;
						break;
					case 5:
						mm = 29;
						break;
					case 6:
						mm = 30;
						break;
				}
			} else {
				switch (parseInt(aBaseInfo[y1 * 12 + m1])) {
					case 1:
						mm = 29;
						break;
					case 2:
						mm = 30;
						break;
					case 3:
						mm = 29;
						break;
					case 4:
						mm = 29;
						break;
					case 5:
						mm = 30;
						break;
					case 6:
						mm = 30;
						break;
				}
			}
			td = 0;
			for (i = 0; i <= y1 - 1; i++) {
				for (j = 0; j <= 11; j++) {
					switch (parseInt(aBaseInfo[i * 12 + j])) {
						case 1:
							td = td + 29;
							break;
						case 2:
							td = td + 30;
							break;
						case 3:
							td = td + 58;
							break;
						case 4:
							td = td + 59;
							break;
						case 5:
							td = td + 59;
							break;
						case 6:
							td = td + 60;
							break;
					}
				}
			}
			for (j = 0; j <= m1 - 1; j++) {
				switch (parseInt(aBaseInfo[y1 * 12 + j])) {
					case 1:
						td = td + 29;
						break;
					case 2:
						td = td + 30;
						break;
					case 3:
						td = td + 58;
						break;
					case 4:
						td = td + 59;
						break;
					case 5:
						td = td + 59;
						break;
					case 6:
						td = td + 60;
						break;
				}
			}
			if (leap == 1) {
				switch (parseInt(aBaseInfo[y1 * 12 + m1])) {
					case 3:
						mm = 29;
						break;
					case 4:
						mm = 29;
						break;
					case 5:
						mm = 30;
						break;
					case 6:
						mm = 30;
						break;
				}
			}
			td = td + nLd + 22;
			if (sLflag == "1") {
				switch (parseInt(aBaseInfo[y1 * 12 + m1])) {
					case 3:
						td = td + 29;
						break;
					case 4:
						td = td + 30;
						break;
					case 5:
						td = td + 29;
						break;
					case 6:
						td = td + 30;
						break;
				}
			}
			y1 = 1840;
			do {
				y1 = y1 + 1;
				leap = gfnIsLeapYear(y1 + "0101");
				if (leap == 1) y2 = 366;
				else y2 = 365;
				if (td <= y2) break;
				td = td - y2;
			}
			while (1);
			nSy = y1;
			aMd[1] = y2 - 337;
			m1 = 0;
			do {
				m1 = m1 + 1;
				if (td <= parseInt(aMd[m1 - 1])) break;
				td = td - parseInt(aMd[m1 - 1]);
			}
			while (1);
			nSm = m1;
			nSd = td;
			y3 = nSy;
			td = y3 * 365 + parseInt(y3 / 4) - parseInt(y3 / 100) + parseInt(y3 / 400);
			for (i = 0; i <= nSm - 1; i++) td = td + parseInt(aMd[i]);
			td = td + nSd;
			return y3 + gfnRight("0" + nSm, 2) + gfnRight("0" + nSd, 2);
		}
		/******************************************************************************
		 * Function명 : gfnGetHolidays
		 * 설명       : 양력 nYear에 해당하는 년도의 법정 공휴일(양력) List 모두 구하기
		 * Params     : nYear : nYear에 해당하는 년도 ( 예 : 2012 )
		 * Return     : 
		 *               - 성공 = 공휴일 List Array ==> 각 Array[i]="yyyyMMdd공휴일명" 으로 return된다.
		 *        ( 예 : Array[0] = "20120101신정" )
		 *       - 실패 = 빈 Array
		 ******************************************************************************/
		function gfnGetHolidays(nYear) {
			var nYear;
			var aHoliday = new Array();
			if (gfnIsEmpty(nYear)) return aHoliday;
			/////// 음력 체크
			// 구정
			//         aHoliday[0] = gfnLunar2Solar( "0" + (nYear-1) + "1230" ) + "설날";
			////        console.log(aHoliday[0].substr(0,4));
			////        console.log(aHoliday[0].substr(4, 2));
			////        console.log(aHoliday[0].substr(6, 2));
			////         aHoliday[1] = gfnAddDate(aHoliday[0], 1) + "설날";
			//         aHoliday[1] = gfnLunar2Solar( "0" + (nYear-1) + "1232" ) + "설날";
			////         aHoliday[2] = gfnAddDate(aHoliday[1], 1) + "설날";
			//         aHoliday[2] = gfnLunar2Solar( "0" + (nYear-1) + "1231" ) + "설날";
			// 석가탄신일
			aHoliday[0] = gfnLunar2Solar("0" + nYear + "0408") + "석가탄신일";
			// 추석
			//         aHoliday[4] = gfnLunar2Solar( "0" + nYear + "0814" ) + "추석";
			////         aHoliday[5] = gfnAddDate(aHoliday[4], 1) + "추석";
			//         aHoliday[5] = gfnLunar2Solar( "0" + nYear + "0816" ) + "추석";
			////         aHoliday[6] = gfnAddDate(aHoliday[5], 1) + "추석"; 
			//         aHoliday[6] = gfnLunar2Solar( "0" + nYear + "0815" ) + "추석";
			//         /////// 양력 체크
			aHoliday[1] = nYear + "0101" + "신정";
			aHoliday[2] = nYear + "0301" + "삼일절";
			aHoliday[3] = nYear + "0505" + "어린이날";
			aHoliday[4] = nYear + "0606" + "현충일";
			aHoliday[5] = nYear + "0815" + "광복절";
			aHoliday[6] = nYear + "1225" + "성탄절";
			//        var nYear  = parseInt(date.substr(0, 4));
			//            var nMonth = parseInt(date.substr(4, 2));
			//            var nDate  = parseInt(date.substr(6, 2)) + nOffSet;
			//            return gfnDatetime(nYear, nMonth, nDate);
			return aHoliday.sort();
		}
		/******************************************************************************
		 * Function명 : _SolarBase
		 * 설명       : 각 월별 음력 기준 정보를 처리하는 함수(처리가능 기간  1841 - 2043년) 단, 내부에서 사용하는 함수임
		 * Params     :  없음
		 * Return     : 
		 *               - 성공 = 음력 기준정보
		 ******************************************************************************/
		function _SolarBase() {
			var kk;
			//1841
			kk = "1,2,4,1,1,2,1,2,1,2,2,1,";
			kk += "2,2,1,2,1,1,2,1,2,1,2,1,";
			kk += "2,2,2,1,2,1,4,1,2,1,2,1,";
			kk += "2,2,1,2,1,2,1,2,1,2,1,2,";
			kk += "1,2,1,2,2,1,2,1,2,1,2,1,";
			kk += "2,1,2,1,5,2,1,2,2,1,2,1,";
			kk += "2,1,1,2,1,2,1,2,2,2,1,2,";
			kk += "1,2,1,1,2,1,2,1,2,2,2,1,";
			kk += "2,1,2,3,2,1,2,1,2,1,2,2,";
			kk += "2,1,2,1,1,2,1,1,2,2,1,2,";
			//1851
			kk += "2,2,1,2,1,1,2,1,2,1,5,2,";
			kk += "2,1,2,2,1,1,2,1,2,1,1,2,";
			kk += "2,1,2,2,1,2,1,2,1,2,1,2,";
			kk += "1,2,1,2,1,2,5,2,1,2,1,2,";
			kk += "1,1,2,1,2,2,1,2,2,1,2,1,";
			kk += "2,1,1,2,1,2,1,2,2,2,1,2,";
			kk += "1,2,1,1,5,2,1,2,1,2,2,2,";
			kk += "1,2,1,1,2,1,1,2,2,1,2,2,";
			kk += "2,1,2,1,1,2,1,1,2,1,2,2,";
			kk += "2,1,6,1,1,2,1,1,2,1,2,2,";
			//1861
			kk += "1,2,2,1,2,1,2,1,2,1,1,2,";
			kk += "2,1,2,1,2,2,1,2,2,3,1,2,";
			kk += "1,2,2,1,2,1,2,2,1,2,1,2,";
			kk += "1,1,2,1,2,1,2,2,1,2,2,1,";
			kk += "2,1,1,2,4,1,2,2,1,2,2,1,";
			kk += "2,1,1,2,1,1,2,2,1,2,2,2,";
			kk += "1,2,1,1,2,1,1,2,1,2,2,2,";
			kk += "1,2,2,3,2,1,1,2,1,2,2,1,";
			kk += "2,2,2,1,1,2,1,1,2,1,2,1,";
			kk += "2,2,2,1,2,1,2,1,1,5,2,1,";
			//1871
			kk += "2,2,1,2,2,1,2,1,2,1,1,2,";
			kk += "1,2,1,2,2,1,2,1,2,2,1,2,";
			kk += "1,1,2,1,2,4,2,1,2,2,1,2,";
			kk += "1,1,2,1,2,1,2,1,2,2,2,1,";
			kk += "2,1,1,2,1,1,2,1,2,2,2,1,";
			kk += "2,2,1,1,5,1,2,1,2,2,1,2,";
			kk += "2,2,1,1,2,1,1,2,1,2,1,2,";
			kk += "2,2,1,2,1,2,1,1,2,1,2,1,";
			kk += "2,2,4,2,1,2,1,1,2,1,2,1,";
			kk += "2,1,2,2,1,2,2,1,2,1,1,2,";
			//1881
			kk += "1,2,1,2,1,2,5,2,2,1,2,1,";
			kk += "1,2,1,2,1,2,1,2,2,1,2,2,";
			kk += "1,1,2,1,1,2,1,2,2,2,1,2,";
			kk += "2,1,1,2,3,2,1,2,2,1,2,2,";
			kk += "2,1,1,2,1,1,2,1,2,1,2,2,";
			kk += "2,1,2,1,2,1,1,2,1,2,1,2,";
			kk += "2,2,1,5,2,1,1,2,1,2,1,2,";
			kk += "2,1,2,2,1,2,1,1,2,1,2,1,";
			kk += "2,1,2,2,1,2,1,2,1,2,1,2,";
			kk += "1,5,2,1,2,2,1,2,1,2,1,2,";
			//1891
			kk += "1,2,1,2,1,2,1,2,2,1,2,2,";
			kk += "1,1,2,1,1,5,2,2,1,2,2,2,";
			kk += "1,1,2,1,1,2,1,2,1,2,2,2,";
			kk += "1,2,1,2,1,1,2,1,2,1,2,2,";
			kk += "2,1,2,1,5,1,2,1,2,1,2,1,";
			kk += "2,2,2,1,2,1,1,2,1,2,1,2,";
			kk += "1,2,2,1,2,1,2,1,2,1,2,1,";
			kk += "2,1,5,2,2,1,2,1,2,1,2,1,";
			kk += "2,1,2,1,2,1,2,2,1,2,1,2,";
			kk += "1,2,1,1,2,1,2,5,2,2,1,2,";
			//1901
			kk += "1,2,1,1,2,1,2,1,2,2,2,1,";
			kk += "2,1,2,1,1,2,1,2,1,2,2,2,";
			kk += "1,2,1,2,3,2,1,1,2,2,1,2,";
			kk += "2,2,1,2,1,1,2,1,1,2,2,1,";
			kk += "2,2,1,2,2,1,1,2,1,2,1,2,";
			kk += "1,2,2,4,1,2,1,2,1,2,1,2,";
			kk += "1,2,1,2,1,2,2,1,2,1,2,1,";
			kk += "2,1,1,2,2,1,2,1,2,2,1,2,";
			kk += "1,5,1,2,1,2,1,2,2,2,1,2,";
			kk += "1,2,1,1,2,1,2,1,2,2,2,1,";
			//1911
			kk += "2,1,2,1,1,5,1,2,2,1,2,2,";
			kk += "2,1,2,1,1,2,1,1,2,2,1,2,";
			kk += "2,2,1,2,1,1,2,1,1,2,1,2,";
			kk += "2,2,1,2,5,1,2,1,2,1,1,2,";
			kk += "2,1,2,2,1,2,1,2,1,2,1,2,";
			kk += "1,2,1,2,1,2,2,1,2,1,2,1,";
			kk += "2,3,2,1,2,2,1,2,2,1,2,1,";
			kk += "2,1,1,2,1,2,1,2,2,2,1,2,";
			kk += "1,2,1,1,2,1,5,2,2,1,2,2,";
			kk += "1,2,1,1,2,1,1,2,2,1,2,2,";
			//1921
			kk += "2,1,2,1,1,2,1,1,2,1,2,2,";
			kk += "2,1,2,2,3,2,1,1,2,1,2,2,";
			kk += "1,2,2,1,2,1,2,1,2,1,1,2,";
			kk += "2,1,2,1,2,2,1,2,1,2,1,1,";
			kk += "2,1,2,5,2,1,2,2,1,2,1,2,";
			kk += "1,1,2,1,2,1,2,2,1,2,2,1,";
			kk += "2,1,1,2,1,2,1,2,2,1,2,2,";
			kk += "1,5,1,2,1,1,2,2,1,2,2,2,";
			kk += "1,2,1,1,2,1,1,2,1,2,2,2,";
			kk += "1,2,2,1,1,5,1,2,1,2,2,1,";
			//1931
			kk += "2,2,2,1,1,2,1,1,2,1,2,1,";
			kk += "2,2,2,1,2,1,2,1,1,2,1,2,";
			kk += "1,2,2,1,6,1,2,1,2,1,1,2,";
			kk += "1,2,1,2,2,1,2,2,1,2,1,2,";
			kk += "1,1,2,1,2,1,2,2,1,2,2,1,";
			kk += "2,1,4,1,2,1,2,1,2,2,2,1,";
			kk += "2,1,1,2,1,1,2,1,2,2,2,1,";
			kk += "2,2,1,1,2,1,4,1,2,2,1,2,";
			kk += "2,2,1,1,2,1,1,2,1,2,1,2,";
			kk += "2,2,1,2,1,2,1,1,2,1,2,1,";
			//1941
			kk += "2,2,1,2,2,4,1,1,2,1,2,1,";
			kk += "2,1,2,2,1,2,2,1,2,1,1,2,";
			kk += "1,2,1,2,1,2,2,1,2,2,1,2,";
			kk += "1,1,2,4,1,2,1,2,2,1,2,2,";
			kk += "1,1,2,1,1,2,1,2,2,2,1,2,";
			kk += "2,1,1,2,1,1,2,1,2,2,1,2,";
			kk += "2,5,1,2,1,1,2,1,2,1,2,2,";
			kk += "2,1,2,1,2,1,1,2,1,2,1,2,";
			kk += "2,2,1,2,1,2,3,2,1,2,1,2,";
			kk += "2,1,2,2,1,2,1,1,2,1,2,1,";
			//1951
			kk += "2,1,2,2,1,2,1,2,1,2,1,2,";
			kk += "1,2,1,2,4,2,1,2,1,2,1,2,";
			kk += "1,2,1,1,2,2,1,2,2,1,2,2,";
			kk += "1,1,2,1,1,2,1,2,2,1,2,2,";
			kk += "2,1,4,1,1,2,1,2,1,2,2,2,";
			kk += "1,2,1,2,1,1,2,1,2,1,2,2,";
			kk += "2,1,2,1,2,1,1,5,2,1,2,2,";
			kk += "1,2,2,1,2,1,1,2,1,2,1,2,";
			kk += "1,2,2,1,2,1,2,1,2,1,2,1,";
			kk += "2,1,2,1,2,5,2,1,2,1,2,1,";
			//1961
			kk += "2,1,2,1,2,1,2,2,1,2,1,2,";
			kk += "1,2,1,1,2,1,2,2,1,2,2,1,";
			kk += "2,1,2,3,2,1,2,1,2,2,2,1,";
			kk += "2,1,2,1,1,2,1,2,1,2,2,2,";
			kk += "1,2,1,2,1,1,2,1,1,2,2,1,";
			kk += "2,2,5,2,1,1,2,1,1,2,2,1,";
			kk += "2,2,1,2,2,1,1,2,1,2,1,2,";
			kk += "1,2,2,1,2,1,5,2,1,2,1,2,";
			kk += "1,2,1,2,1,2,2,1,2,1,2,1,";
			kk += "2,1,1,2,2,1,2,1,2,2,1,2,";
			//1971
			kk += "1,2,1,1,5,2,1,2,2,2,1,2,";
			kk += "1,2,1,1,2,1,2,1,2,2,2,1,";
			kk += "2,1,2,1,1,2,1,1,2,2,2,1,";
			kk += "2,2,1,5,1,2,1,1,2,2,1,2,";
			kk += "2,2,1,2,1,1,2,1,1,2,1,2,";
			kk += "2,2,1,2,1,2,1,5,2,1,1,2,";
			kk += "2,1,2,2,1,2,1,2,1,2,1,1,";
			kk += "2,2,1,2,1,2,2,1,2,1,2,1,";
			kk += "2,1,1,2,1,6,1,2,2,1,2,1,";
			kk += "2,1,1,2,1,2,1,2,2,1,2,2,";
			//1981
			kk += "1,2,1,1,2,1,1,2,2,1,2,2,";
			kk += "2,1,2,3,2,1,1,2,2,1,2,2,";
			kk += "2,1,2,1,1,2,1,1,2,1,2,2,";
			kk += "2,1,2,2,1,1,2,1,1,5,2,2,";
			kk += "1,2,2,1,2,1,2,1,1,2,1,2,";
			kk += "1,2,2,1,2,2,1,2,1,2,1,1,";
			kk += "2,1,2,2,1,5,2,2,1,2,1,2,";
			kk += "1,1,2,1,2,1,2,2,1,2,2,1,";
			kk += "2,1,1,2,1,2,1,2,2,1,2,2,";
			kk += "1,2,1,1,5,1,2,1,2,2,2,2,";
			//1991
			kk += "1,2,1,1,2,1,1,2,1,2,2,2,";
			kk += "1,2,2,1,1,2,1,1,2,1,2,2,";
			kk += "1,2,5,2,1,2,1,1,2,1,2,1,";
			kk += "2,2,2,1,2,1,2,1,1,2,1,2,";
			kk += "1,2,2,1,2,2,1,5,2,1,1,2,";
			kk += "1,2,1,2,2,1,2,1,2,2,1,2,";
			kk += "1,1,2,1,2,1,2,2,1,2,2,1,";
			kk += "2,1,1,2,3,2,2,1,2,2,2,1,";
			kk += "2,1,1,2,1,1,2,1,2,2,2,1,";
			kk += "2,2,1,1,2,1,1,2,1,2,2,1,";
			//2001
			kk += "2,2,2,3,2,1,1,2,1,2,1,2,";
			kk += "2,2,1,2,1,2,1,1,2,1,2,1,";
			kk += "2,2,1,2,2,1,2,1,1,2,1,2,";
			kk += "1,5,2,2,1,2,1,2,2,1,1,2,";
			kk += "1,2,1,2,1,2,2,1,2,2,1,2,";
			kk += "1,1,2,1,2,1,5,2,2,1,2,2,";
			kk += "1,1,2,1,1,2,1,2,2,2,1,2,";
			kk += "2,1,1,2,1,1,2,1,2,2,1,2,";
			kk += "2,2,1,1,5,1,2,1,2,1,2,2,";
			kk += "2,1,2,1,2,1,1,2,1,2,1,2,";
			//2011
			kk += "2,1,2,2,1,2,1,1,2,1,2,1,";
			kk += "2,1,6,2,1,2,1,1,2,1,2,1,";
			kk += "2,1,2,2,1,2,1,2,1,2,1,2,";
			kk += "1,2,1,2,1,2,1,2,5,2,1,2,";
			kk += "1,2,1,1,2,1,2,2,2,1,2,2,";
			kk += "1,1,2,1,1,2,1,2,2,1,2,2,";
			kk += "2,1,1,2,3,2,1,2,1,2,2,2,";
			kk += "1,2,1,2,1,1,2,1,2,1,2,2,";
			kk += "2,1,2,1,2,1,1,2,1,2,1,2,";
			kk += "2,1,2,5,2,1,1,2,1,2,1,2,";
			//2021
			kk += "1,2,2,1,2,1,2,1,2,1,2,1,";
			kk += "2,1,2,1,2,2,1,2,1,2,1,2,";
			kk += "1,5,2,1,2,1,2,2,1,2,1,2,";
			kk += "1,2,1,1,2,1,2,2,1,2,2,1,";
			kk += "2,1,2,1,1,5,2,1,2,2,2,1,";
			kk += "2,1,2,1,1,2,1,2,1,2,2,2,";
			kk += "1,2,1,2,1,1,2,1,1,2,2,2,";
			kk += "1,2,2,1,5,1,2,1,1,2,2,1,";
			kk += "2,2,1,2,2,1,1,2,1,1,2,2,";
			kk += "1,2,1,2,2,1,2,1,2,1,2,1,";
			//2031
			kk += "2,1,5,2,1,2,2,1,2,1,2,1,";
			kk += "2,1,1,2,1,2,2,1,2,2,1,2,";
			kk += "1,2,1,1,2,1,5,2,2,2,1,2,";
			kk += "1,2,1,1,2,1,2,1,2,2,2,1,";
			kk += "2,1,2,1,1,2,1,1,2,2,1,2,";
			kk += "2,2,1,2,1,4,1,1,2,1,2,2,";
			kk += "2,2,1,2,1,1,2,1,1,2,1,2,";
			kk += "2,2,1,2,1,2,1,2,1,1,2,1,";
			kk += "2,2,1,2,5,2,1,2,1,2,1,1,";
			kk += "2,1,2,2,1,2,2,1,2,1,2,1,";
			//2041
			kk += "2,1,1,2,1,2,2,1,2,2,1,2,";
			kk += "1,5,1,2,1,2,1,2,2,2,1,2,";
			kk += "1,2,1,1,2,1,1,2,2,1,2,2";
			var arr = new Array();
			arr = kk.split(",");
			return arr;
		}
		//현재월에서 +-월의 마지막날을 찾는 function
		function gfnNowLastDay(intNum) {
			var objDate2 = new Date();
			objDate2.addMonth(intNum + 1);
			objDate2.setDate(1);
			objDate2.addDate(-1);
			var last_date = objDate2.toFormatString("%Y%m%d");
			return last_date;
		}
		//현재월에서 +-월의 첫날을 찾는 function
		function gfnNowFirstDay(intNum) {
			var objDate2 = new Date();
			objDate2.addMonth(intNum);
			objDate2.setDate(1);
			objDate2.addDate(0);
			var first_date = objDate2.toFormatString("%Y%m%d");
			return first_date;
		}
		/*******************************************************************************
		 * Function명 : gfnTodayDiv
		 * 설명          : 해당 PC의 오늘 날짜를 가져온다. (년/월/일 사이에 구분자를 원하는 형태로)
		 * parameter  : strDel   구분자
		 * return        : string
		 ******************************************************************************/
		function gfnTodayDiv(strDel) {
			var strToday = "";
			var objDate = new Date();
			var strToday = objDate.getFullYear();
			strToday = strToday + strDel + gfnRight("0" + (objDate.getMonth() + 1), 2);
			strToday = strToday + strDel + gfnRight("0" + objDate.getDate(), 2);
			return strToday;
		}
		/*음력 알고리즘..끝*/
		var today = new Date(); // 오늘 날짜

		$(document).ready(function() {
//			chkId();
			chkMaster();
			

			var groupId = location.href.split("=")[1];
			//			var swiper = new Swiper('.swiper-container', {
			//				pagination: '.swiper-pagination',
			//				slidesPerView: 3,
			//				paginationClickable: true,
			//				spaceBetween: 30,
			//				freeMode: true
			//			});

			









			/*
			    드레그앤 드롭
			*/
			/////////////////////////////    
			// console.log("getGroupInfo");
			//            setTimeout(getGroupInfo(), 200);
			//            getGroupInfo();
			// console.log("getGroupBirth");
//			setTimeout(getGroupBrith, 300);


			//			var swiper = new Swiper('.swiper-container', {
			//				pagination: '.swiper-pagination',
			//				slidesPerView: 3,
			//				paginationClickable: true,
			//				spaceBetween: 30,
			//				freeMode: true
			//			});
			//            getGroupBrith();
			// console.log("cal");
			//            $('.saturday').css('color','blue');
			$('#yearSelect').change(function() {
				initToday();
				//                console.log(parseInt($("#yearSelect").val()));            
				today = new Date(parseInt($("#yearSelect").val()), today.getMonth(), today.getDate());
				//                console.log(today);   
				//                initToday();
				buildCalendar();
				//                console.log($(this).val());
				if ($(this).val() == "2030" && $("#monthSelect").val() == "12") {
					$("#nextButton").css("display", "none");
				} else if ($(this).val() == "2017" && $("#monthSelect").val() == "1") {
					$("#preButton").css("display", "none");
				} else {
					$("#preButton").css("display", "block");
					$("#nextButton").css("display", "block");
				}
			}); //연도 선택
			$('#monthSelect').change(function() {
				initToday();
				//                console.log(parseInt($("#monthSelect").val()));            
				today = new Date(parseInt($("#yearSelect").val()), parseInt($("#monthSelect").val()) - 1, today.getDate());
				//                console.log(today); 
				//                initToday();
				buildCalendar();
				if ($("#yearSelect").val() == "2030" && $(this).val() == "12") {
					$("#nextButton").css("display", "none");
				} else if ($("#yearSelect").val() == "2017" && $(this).val() == "1") {
					$("#preButton").css("display", "none");
				} else {
					$("#preButton").css("display", "block");
					$("#nextButton").css("display", "block");
				}
			}); // 달 선택
			$('#yearSelect').val(today.getFullYear()).attr("selected", "selected");
			$('#monthSelect').val(today.getMonth() + 1).attr("selected", "selected");
			$('#roomOut').hover(function() {
				$(this).attr('src', 'img/etcIcon/door_hover.png');
				//				alert('!');
				$(this).css('cursor', 'pointer');
			}, function() {
				$(this).attr('src', 'img/etcIcon/door.png');
				//				alert('!!');
			})
			//            initToday(); //  주석1
			chkId();
		});
		
		function chkId() {
			var group_id = location.href.split("=")[1];
			
			$.ajax({
				type: 'post',
				url: 'chkId.do',
				dataType: "json",
				data: {
					groupId: group_id
				},
				success: function(data) {
//					console.log(data);
					var sessionResult = data[0].result;
					if (!sessionResult) {
						$('#newWrap').html("");
						location.href = "/Twat/groupList.html";
					}
					else
					{
//						chkMaster();
//						$('#newWrap').html("");
					}
				},
				beforeSend: function() {
					var width = 0;
					var height = 0;
					var left = 0;
					var top = 0;

					width = 50;
					height = 50;

					top = ($(window).height() - height) / 2 + $(window).scrollTop();
					left = ($(window).width() - width) / 2 + $(window).scrollLeft();

					if ($("#div_ajax_load_image").length != 0) {
						$("#div_ajax_load_image").css({
							"top": top + "px",
							"left": left + "px"
						});
						$("#div_ajax_load_image").show();
					} else {
						$('body').append('<div id="div_ajax_load_image" style="position:absolute; top:' + top + 'px; left:' + left + 'px; width:' + width + 'px; height:' + height + 'px; z-index:9999; background:#f0f0f0; filter:alpha(opacity=50); opacity:alpha*0.5; margin:auto; padding:0; "><img src="img/loadingImg/ajax_loader6.gif" style="width:50px; height:50px;"></div>');
					}
					
				},
				complete: function() {
					 $("#div_ajax_load_image").hide();
					//                    getGroupInfo();
					//                    setTimeout(getGroupInfo(), 100);
//					chkMaster();
				},
				error: function(req) {

					alert("상태 : " + req.status + ", " + req.responseText + ", error : " + req.error + ", ajax : chkId.do");
				}

			});
		}
		
		function chkMaster() {
			var groupId = location.href.split("=")[1];
			
			$.ajax({
				type: 'post',
				url: 'groupMaster.do',
				data: {
					groupId: groupId


				},
				dataType: "json",
				success: function(data) {


					//                    console.log(data);


					$.each(data, function(index, item) {
						//                        console.log(item.groupMaster);

						if (item.groupMaster == "no") {
							$(".addschedule").css("display", "none");
						}

						login_userId = item.userId;

					});

					getGroupInfo();
				},
				beforeSend: function() {
					var width = 0;
					var height = 0;
					var left = 0;
					var top = 0;

					width = 50;
					height = 50;

					top = ($(window).height() - height) / 2 + $(window).scrollTop();
					left = ($(window).width() - width) / 2 + $(window).scrollLeft();

					if ($("#div_ajax_load_image").length != 0) {
						$("#div_ajax_load_image").css({
							"top": top + "px",
							"left": left + "px"
						});
						$("#div_ajax_load_image").show();
					} else {
						$('body').append('<div id="div_ajax_load_image" style="position:absolute; top:' + top + 'px; left:' + left + 'px; width:' + width + 'px; height:' + height + 'px; z-index:9999; background:#f0f0f0; filter:alpha(opacity=50); opacity:alpha*0.5; margin:auto; padding:0; "><img src="img/loadingImg/ajax_loader6.gif" style="width:50px; height:50px;"></div>');
					}
					
				},
				complete: function() {
					 $("#div_ajax_load_image").hide();
					//                    getGroupInfo();
					//                    setTimeout(getGroupInfo(), 100);
				},
				error: function(req) {

					alert("상태 : " + req.status + ", " + req.responseText + ", error : " + req.error + ", ajax : groupMaster.do");
				}

			});
		}
		

		function update() {
			$.ajax({
				type: "POST",
				url: "json/holiday.json",
				dataType: "JSON",
				success: function(data) {
					var dateArr = new Array();
					var titleArr = new Array();
					$.each(data, function(index, item) {
						dateArr.push(item.날짜);
						titleArr.push(item.이벤트);
					});
					buildCalendar(dateArr, titleArr);
					initToday();
				},
				beforeSend: function() {
					var width = 0;
					var height = 0;
					var left = 0;
					var top = 0;

					width = 50;
					height = 50;

					top = ($(window).height() - height) / 2 + $(window).scrollTop();
					left = ($(window).width() - width) / 2 + $(window).scrollLeft();

					if ($("#div_ajax_load_image").length != 0) {
						$("#div_ajax_load_image").css({
							"top": top + "px",
							"left": left + "px"
						});
						$("#div_ajax_load_image").show();
					} else {
						$('body').append('<div id="div_ajax_load_image" style="position:absolute; top:' + top + 'px; left:' + left + 'px; width:' + width + 'px; height:' + height + 'px; z-index:9999; background:#f0f0f0; filter:alpha(opacity=50); opacity:alpha*0.5; margin:auto; padding:0; "><img src="img/loadingImg/ajax_loader6.gif" style="width:50px; height:50px;"></div>');
					}
					
				},
				complete: function() {
					 $("#div_ajax_load_image").hide();
					
				},
				error: function(req) {
					//                    alert('통신실패');
					alert("상태 : " + req.status + ", " + req.responseText + ", error : " + req.error + ", ajax : json/holiday.json");
				}
			});
		}

		function dateToFormat(sendCal) {
			var dateStr = "";
			if ((sendCal.getMonth() + 1) / 10 < 1) {
				if (sendCal.getDate() / 10 < 1) {
					dateStr = sendCal.getFullYear() + "0" + (sendCal.getMonth() + 1) + "0" + sendCal.getDate();
				} else {
					dateStr = sendCal.getFullYear() + "0" + (sendCal.getMonth() + 1) + "" + sendCal.getDate();
				}
			} else {
				if (sendCal.getDate() / 10 < 1) {
					dateStr = sendCal.getFullYear() + "" + (sendCal.getMonth() + 1) + "0" + sendCal.getDate();
				} else {
					dateStr = sendCal.getFullYear() + "" + (sendCal.getMonth() + 1) + "" + sendCal.getDate();
				}
			}
			return dateStr;
		}

		function initToday() {
			//            console.log(dateToFormat(initDay));
			//			console.log("!");
			$('tr').children().each(function(i) {
				if ($(this).text() == initDay.getDate() && $('#yearSelect option:selected').val() == initDay.getFullYear() && $('#monthSelect option:selected').val() == initDay.getMonth() + 1) {
					$(this).children().eq(0).css("border", "2px solid red").css("border-radius", "22px");
				}
				for (let item of scheSet.keys()) {
					if (item == dateToFormat(initDay)) {
						if ($('#yearSelect option:selected').val() == initDay.getFullYear() && $('#monthSelect option:selected').val() == initDay.getMonth() + 1) {
							//                            $('#date' + initDay.getDate()).css("backgroundColor", "green");
							$('#date' + initDay.getDate()).css("backgroundImage", "url(img/etcIcon/verified-text-paper.png)");
							$('#date' + initDay.getDate()).css("backgroundRepeat", "no-repeat");
							$('#date' + initDay.getDate()).css("backgroundPosition", "right 50%");
							//                            console.log(initDay.getDate());
						}
					}
				}

			});
			voteMeeting(cal_date);
		}

		function prevCalendar() {
			// 이전 달을 today에 값을 저장하고 달력을 뿌려줍니다.
			today = new Date(today.getFullYear(), today.getMonth() - 1, today.getDate());
			$('#yearSelect').val(today.getFullYear()).attr("selected", "selected");
			$('#monthSelect').val(today.getMonth() + 1).attr("selected", "selected");
			if ($("#yearSelect").val() == "2017" && $("#monthSelect").val() == "1") {
				$("#preButton").css("display", "none");
			} else {
				$("#nextButton").css("display", "block");
			}
			update();
		}

		function nextCalendar() {
			// 다음 달을 today에 값을 저장하고 달력을 뿌려줍니다.
			today = new Date(today.getFullYear(), today.getMonth() + 1, today.getDate());
			//            console.log(today);
			$('#yearSelect').val(today.getFullYear()).attr("selected", "selected");
			$('#monthSelect').val(today.getMonth() + 1).attr("selected", "selected");
			if ($("#yearSelect").val() == "2030" && $("#monthSelect").val() == "12") {
				$("#nextButton").css("display", "none");
			} else {
				$("#preButton").css("display", "block");
			}
			update();
		}
		//        addSche = "";
		//        scheArr = new Array(32);
		////        scheArr[0] = "";
		//        for(var s = 0; s < 32; s++ ){
		//            scheArr[s] = false;
		//        }
		//        
		//        var scheSet = new Set();
		function getDayInfo(a) { // 선택한 날짜 정보를 얻기 위한 함수
			//            console.log(login_userId);
			//            console.log(group_master);

			if (a != null) {
				var yearInfo = $("#yearSelect").val() + "";
				var monthInfo = $("#monthSelect").val() + "";
				//                console.log($(a).children().eq(0).attr("id"));
				var dayInfo = $(a).children().eq(0).attr("id").substr(4, $(a).children().eq(0).attr("id").length - 4) + "";
				if (monthInfo.length == 1) {
					monthInfo = "0" + monthInfo;
				}
				if (dayInfo.length == 1) {
					dayInfo = "0" + dayInfo;
				}
				//                scheArr[0] = yearInfo + monthInfo;
				var selectDate = yearInfo + monthInfo + dayInfo;

				//                console.log($(a).css("backgroundColor"));
				//                if($(a).css("backgroundColor") == "rgb(255, 0, 0)"){
				//                    alert("현재 투표중인 날짜입니다!");
				//                    return;                    
				//                }
				//                else if($(a).css("backgroundColor") == "rgb(255, 128, 128)"){
				//                    alert("이미 확정된 날짜 입니다!");
				//                    return;   
				//                }

				for (let item of scheduleSet.keys()) {
					if (selectDate == item.split("-")[0]) {
						//                        alert("이미 확정된 날짜 입니다!");
						getScheduleInfo(item.split("-")[2]);
						return;
					}
				}
				//                console.log(scheduleSet);
				for (let item of voteSet.keys()) {
					if (selectDate == item.split("-")[0]) {
						//                        alert("투표중인 날짜 입니다!");
						getVoteInfo(item.split("-")[2]);
						return;
					}
				}
				//                console.log(voteSet);

				$('#modal2').css('display', 'none');

				if (selectDate < dateToFormat(initDay)) {
					if (login_userId.match(group_master)) {
						alert("지난 날짜는 선택할수 없습니다!")
					}
					return;
				} else {
					//                    if ($(a).css("backgroundColor") == "rgb(0, 128, 0)")
					//                    console.log($(a).css("backgroundImage"));
//					if (!$(a).css("backgroundImage").match("none"))
                    console.log($(a).find(".choiceDate").attr('width'));
					if ($(a).find(".choiceDate").css('width') != undefined)
                    {
						//                        $(a).css("backgroundColor", "white");
						console.log("!");
						$(a).find(".choiceDate").remove();
						//                    scheArr[parseInt(dayInfo)] = false;
						scheSet.delete(yearInfo + monthInfo + dayInfo);
						for (let item of voteSet.keys()) {
							if (item.split("-")[0] == (yearInfo + monthInfo + dayInfo)) {
								//                            console.log(yearInfo + monthInfo + dayInfo);
								//                                $(a).css("backgroundColor", "#ff8080");
							}
						}
						for (let item of voteSet.keys()) {
							if (item.split("-")[0] == (yearInfo + monthInfo + dayInfo)) {
								//                                $(a).css("backgroundColor", "#00ff80");
							}
						}
						// 생일표시
						for (let item of birthSet.keys()) {
							if (item.split("-")[0].substr(2, 4) == (monthInfo + dayInfo)) {
								//                                $(a).css("backgroundColor", "#0080ff");
								//                                console.log(monthInfo + dayInfo);
							}
						}
						initToday();
					} else if (group_master == login_userId) {
						//                        $(a).css("backgroundColor", "green");
                        // 체크한날에 백그라운드 이미지 넣기
//						$(a).css("backgroundImage", "url(img/etcIcon/verified-text-paper.png)");
						$(a).append('<div class="choiceDate"> </div>');
                        
//						$(a).css("backgroundRepeat", "no-repeat");
//						$(a).css("backgroundPosition", "right 50%");
						//                    scheArr[parseInt(dayInfo)] = dayInfo;
						scheSet.add(yearInfo + monthInfo + dayInfo);
						//                        console.log(selectDate);
					}
				}
				//                addSche += yearInfo + monthInfo + dayInfo + ",";
			}
		}
		//스케줄 추가 함수
		function addSchedule() {
			//            console.log(scheSet.size);


			if (scheSet.size == 0) {
				alert("일정이 선택 되지 않았습니다.");
				return;
			}




			$(".modal").css("display", "block");
			$('#blindCover').css('display', 'block');





			console.log(Array.from(scheSet).sort());

			var a = "";
			//                        console.log(scheSet.sort);
			for (let item of scheSet.keys()) console.log(item);
			//            scheSet = new Set();
		}

		function buildCalendar(dateArr, titleArr, memChoiceArr) {
			var nMonth = new Date(today.getFullYear(), today.getMonth(), 1); // 이번 달의 첫째 날
			var lastDate = new Date(today.getFullYear(), today.getMonth() + 1, 0); // 이번 달의 마지막 날
			var tblCalendar = document.getElementById("calendar"); // 테이블 달력을 만들 테이블
			var tblCalendarYM = document.getElementById("calendarYM"); // yyyy년 m월 출력할 곳
			var dateParam = "";
			var dateColor = new Date();
			var holiday = gfnGetHolidays(today.getFullYear());
			var t = 0;
			var countHoliday = 0;
			//            console.log(group_master);
			//            console.log(login_userId);
			//            var testTime = new Date(2017,04,01).getTime() - new Date(2017,03,31).getTime();
			//            
			//            console.log(new Date(2017,3,1).getTime());
			//            console.log(new Date(2017,2,31).getTime());
			////            
			//            for(var k = 0; k<holiday.length; k++){
			//                console.log(holiday[k]);
			//                
			//            }
			while (tblCalendar.rows.length > 2) {
				tblCalendar.deleteRow(tblCalendar.rows.length - 1);
			}
			var row = null;
			row = tblCalendar.insertRow();
			var cnt = 0;
			// 1일이 시작되는 칸을 맞추어 줌
			for (i = 0; i < nMonth.getDay(); i++) {
				cell = row.insertCell();
				cnt = cnt + 1;
			}
			// 달력 출력
			for (calDay = 1; calDay <= lastDate.getDate(); calDay++) { // 1일부터 마지막 일까지
				cell = row.insertCell();
				//                $(cell).children().eq(0).attr("id", "date" + calDay);
				$(cell).attr("onclick", "getDayInfo(this)");
				if (login_userId == group_master)
					$(cell).attr("style", "cursor:pointer");


				initToday();
				if ((today.getMonth() + 1) / 10 < 1) {
					if (calDay / 10 < 1) {
						dateParam = today.getFullYear() + "0" + (today.getMonth() + 1) + "0" + calDay;
					} else {
						dateParam = today.getFullYear() + "0" + (today.getMonth() + 1) + "" + calDay;
					}
				} else {
					if (calDay / 10 < 1) {
						dateParam = today.getFullYear() + "" + (today.getMonth() + 1) + "0" + calDay;
					} else {
						dateParam = today.getFullYear() + "" + (today.getMonth() + 1) + "" + calDay;
					}
				}

				var saveSolar = gfnSolar2Lunar(dateParam);
				dateColor.setFullYear(today.getFullYear());
				dateColor.setMonth(today.getMonth());
				dateColor.setDate(calDay);
				if (dateColor.getDay() == 6) {
					cell.innerHTML += "<div class='saturday' style='color:blue;'>" + calDay + "</div>";
					//                    $('.saturday').css('color','blue');
				} else if (dateColor.getDay() == 0) {
					cell.innerHTML += "<div class='sunday'>" + calDay + "</div>";
					$('.sunday').css('color', 'red');
				} else {
					cell.innerHTML += "<div>" + calDay + "</div>";
				}

				$(cell).children().eq(0).attr("id", "date" + calDay);
				//                $(cell).children().eq(0).attr("onclick", "getDayInfo(this)");
				if (calDay % 9 == 0) cell.innerHTML += "<div class='lunar'>" + saveSolar.substr(5, 2) + "." + saveSolar.substr(7, 2) + "</div>";
				//                if(countHoliday > 0)
				//                {
				//                    cell.innerHTML += "<div class='holi'></div>";
				//                    $(".holi").css("color", "red"); 
				//                    $(".holi").prev().css("color","red");
				//                    countHoliday--;
				//                    
				//                    
				//                }
                
//                console.log(voteSet);
                
				// 확정된 일정표시
				for (let item of scheduleSet.keys()) {
					if (item.split("-")[0] == dateParam) {
						//						console.log(item);
						$(cell).attr('class', 'trSche' + item.split("-")[2]);
						var classTemp = item.split("-")[2];
                        var colors = Math.floor(Math.random() * 36) + 1;
                        cell.innerHTML += "<div class='dateChk dateChk" + classTemp + "'></div>";
//                        console.log(classTemp);
						cell.innerHTML += "<div class='votedSchedule' style='font-size:13px'>" + item.split("-")[1] + "</div>";
                        $('.dateChk'+classTemp).css('background-color','#'+COLOR1[colors]);
					}
				}
				// 미확정된 일정표시
				for (let item of voteSet.keys()) {
					//					if (item.split("-")[0] == dateParam)
					if (parseInt(item.split("-")[0]) == parseInt(dateParam)) {
						//						console.log(item);
						$(cell).attr('class', 'trVote' + item.split("-")[2]);
                        var classTemp = item.split("-")[2];
                        var colors = Math.floor(Math.random() * 36) + 1;
                        cell.innerHTML += "<div class='dateChk dateChk" + classTemp + "'></div>";
                        cell.innerHTML += "<img class='voteImg' src='img/etcIcon/vote.png'>";
//                        console.log(classTemp);
						cell.innerHTML += "<div class='voteSchedule' style='font-size:13px'>" + item.split("-")[1] + "</div>";
                        $('.dateChk'+classTemp).css('background-color','#'+COLOR2[colors]);
					}
				}
				// 생일표시
				for (let item of birthSet.keys()) {
					if (item.split("-")[0].substr(2, 4) == dateParam.substr(4)) {
						cell.innerHTML += "<div class='memberBirthDay' style='font-size:13px'>" + item.split("-")[1] + "(" + item.split("-")[2] + ")님의 생일</div>";
						//                        console.log("#date" + parseInt(dateParam.substr(6)));
						//                        $('.memberBirthDay').prevAll().css("background-color", "#0080ff");
						$("#date" + parseInt(dateParam.substr(6))).css("background-color", "#0080ff");
					}
				}
				for (var markHoliday = 0; markHoliday < holiday.length; markHoliday++) {
					var whatHoliday;
					if (holiday[markHoliday].substr(0, 8) == parseInt(dateParam)) {
						whatHoliday = holiday[markHoliday].substr(8, holiday[markHoliday].length - 8);
						cell.innerHTML += "<div class='holi'>" + whatHoliday + "</div>";
						$('.holi').css("color", "red");
						$('.holi').prevAll().css("color", "red");
					}
				}
				//                console.log(memChoiceArr);
				if (dateArr != null) {
					for (var dateNum = 0; dateNum < dateArr.length; dateNum++) {
						if (dateArr[dateNum] == dateParam) {
							cell.innerHTML += "<div class='inputHoli'>" + titleArr[dateNum] + "</div>";
							$('.inputHoli').css("color", "red");
							$('.inputHoli').prevAll().css("color", "red");
						}
					}
				}
				cnt = cnt + 1;
				if (cnt % 7 == 0) {
					// 1주일이 7일 이므로                 
					row = calendar.insertRow(); // 줄 추가
				}
				//                var choiceDate = "";
				//                if (memChoiceArr != null) {
				//                    for (var dateNum = 0; dateNum < memChoiceArr.length; dateNum++) {
				//                        choiceDate = memChoiceArr[dateNum].substr(memChoiceArr[dateNum].length - 8, 8);
				//                        //                    console.log(memChoiceArr[dateNum].substr(memChoiceArr[dateNum].length-8 , 8));
				//                        if (choiceDate == dateParam) {
				//                            //                        console.log(parseInt(choiceDate.substr(6,2)));
				//                            console.log("#date" + parseInt(choiceDate.substr(6, 2)));
				//                            $("#date" + parseInt(choiceDate.substr(6, 2))).css("background-color", "yellow");
				//                        }
				//                    }
				//                }

				for (let item of scheSet.keys()) {
					if (item == dateParam) {
						//                        $('#date' + calDay).parent().css("backgroundColor", "green");
//						$('#date' + calDay).parent().css("backgroundImage", "url(img/etcIcon/verified-text-paper.png)");
//						$('#date' + calDay).parent().css("backgroundRepeat", "no-repeat");
//						$('#date' + calDay).parent().css("backgroundPosition", "right 50%");
						// url(img/etcIcon/verified-text-paper.png)
						$('#date' + calDay).parent().append('<div class="choiceDate"> </div>');
						console.log(item + ", " + calDay);
					}
				} //선택한 날짜 초록색으로 표기
			}
			//            initToday();
		}

		//        var para = document.location.href.split("?");
		// 일정들 전부 출력
		function getGroupInfo() {
			var para = document.location.href.split("?");
			barColorSet = new Set();
			//            console.log("para : " + para);
			//            console.log("para[1] : " + para[1]);
			para = para[1].split("=");
			//            console.log("para2 : " + para);
			//            
			//            para = par[1];
			//            console.log("click");
			$.ajax({
				type: 'post',
				url: 'groupCal.do',
				data: {
					group: para[1]
				},
				dataType: "json",
				success: function(data) {
					console.log(data);
					var groupMemberCount = data[0].group_count + 1;
					//                    data[0].group_id;
					//                    data[0].group_name;
					//                    data[0].group_date;
					group_master = data[0].group_master;
					//                    console.log(group_master);
					//                    data[0].group_master_name;
					//                    data[0].group_img;
					groupCount = data[0].group_count;
					//                    $("#icon").html = "<img src='" + data[0].group_img + "'>";
					//                    document.getElementById("schedule").innerHTML += "<img src='" + data[0].group_img + "'>";
					document.getElementById("icon").innerHTML = "<img src='" + data[0].group_img + "'>";
					//                    $("#title").html = "<span id='groupTitle'>" + data[0].group_name + "</span>";
					document.getElementById("title").innerHTML += "<span id='groupTitle'>" + data[0].group_name + "</span>";
					//                    $("#master").html = "<span>" + data[0].group_master_name + "님</span>";
					document.getElementById("master").innerHTML += "<span id='spanGroupMaster'>" + data[0].group_master_name + "(" + group_master + ")님</span>";
					//                    $("#otherMembers").html = "<span> 외 " + data[0].group_count + "명</span>";
					document.getElementById("otherMembers").innerHTML += "<span>&nbsp;외 " + data[0].group_count + "명</span>";

					for (var arrCal = 1; arrCal < data.length; arrCal++)
					{

						//						var chkDate = false;
						if (parseInt(data[arrCal].cal_date) < parseInt(dateToFormat(initDay)) && data[arrCal].cal_date.indexOf(",") == -1) {
							//							console.log(1);
							continue;
						}
						//						else if(parseInt(data[arrCal].cal_date.split(",")[data[arrCal].cal_date.split(",").lastIndexOf()]) < parseInt(dateToFormat(initDay)) && data[arrCal].cal_date.indexOf(",") > 0)
						//						{
						//							continue;
						//						}

						//						if(data[arrCal].cal_date.indexOf(",") > 0)
						//						{
						//							var tempCAL = Array.from().sort();
						////							console.log(data[arrCal].cal_date.split(","));
						//							//[data[arrCal].cal_date.split(",").lastIndexOf()]
						//						}


						var str = "";
						var strA = "";
						strA += '</div>';
						strA += '<div class="middle">';
						strA += '<div class="middle-top">' + data[arrCal].cal_memo + '</div>';
						strA += '<div class="middle-bottom">';
						//						strA += '<span>' + data[arrCal].cal_writer + '님</span>';
						//						//                        strA += '<span>외 ' + data[0].group_count + '명 참여</span>';
						//						strA += '<span> 외 ' + getMemberCount(data[arrCal].member_choice) + '명 참여</span>';
						//						strA += '</div>'; // div-down
						//						strA += '</div>'; // div-up
						//						strA += '<div class="right">';
						//						strA += '<div class="right-top">';
						// 0 / 0 / 0 처리
						//                        if (data[arrCal].member_choice.indexOf(",") == -1)
						if (scheduleCheck(data[arrCal].member_choice, data[arrCal].cal_date))
						{
							// 확정된 날짜 왼쪽 상단 표시

							var mcCheck = data[arrCal].member_choice.split(",");
							var mcResult = false;
							for (var k = 0; k < mcCheck.length; k++) {
								if (mcCheck[k].match(data[arrCal].cal_writer)) {
									mcResult = true;
								}
							}
							if (mcResult) {
								strA += '<span>' + data[arrCal].cal_writer + '님</span>';
							} else {
								strA += '<span>' + group_master + '님</span>';
							}
							//                        strA += '<span>외 ' + data[0].group_count + '명 참여</span>';
							strA += '<span> 외 ' + getMemberCount(data[arrCal].member_choice) + '명 참여</span>';
							strA += '</div>'; // div-down
							strA += '</div>'; // div-up
							strA += '<div class="right">';
							strA += '<div class="right-top">';
							//                            strA += "<span class='stateOK'>참석: 1</span> / <span class='stateNO'>불참: 0</span> / <span class='stateYET'>" + (groupMemberCount - 1) +"</span>";
							//                            strA += "<span class='stateOK'>가능 : 1</span> / <span class='stateNO'>불가능 : -</span>";
							var tempSet = new Set();
							var tempList = data[arrCal].member_choice.split(",");
							for (var i = 0; i < tempList.length; i++) {
								if (tempList[i].indexOf("-") == -1) {
									tempSet.add(tempList[i]);
								}
							}
							strA += "<span>" + tempSet.size + "명 참가</span>";
						} else {
							// 미확정된 날짜 오른쪽 상단 표시
							//							strA += '<span>' + data[arrCal].cal_writer + '님</span>';
							strA += '<span>' + group_master + '님</span>';
							//                        strA += '<span>외 ' + data[0].group_count + '명 참여</span>';
							strA += '<span> 외 ' + getMemberCount(data[arrCal].member_choice) + '명 참여</span>';
							strA += '</div>'; // div-down
							strA += '</div>'; // div-up
							strA += '<div class="right">';
							strA += '<div class="right-top">';

							var stateCount = data[arrCal].member_choice.split(",");
							var countStateNO = 0;
							var countStateOK = new Set();

							for (var i = 0; i < stateCount.length; i++) {
								if (stateCount[i].indexOf("-") == -1) {
									countStateOK.add(stateCount[i]);
								} else {
									if (stateCount[i].split("-")[0].match("00000000")) {
										countStateNO++;
									} else {
										countStateOK.add(stateCount[i].split("-")[1]);
									}
								}
							}
							//                            strA += "<span class='stateOK'>가능: " + (countStateOK.size - countStateNO) + "</span> / <span class='stateNO'>불가능: " + countStateNO + "</span> / <span class='stateYET'>" + (groupMemberCount - countStateOK.size) + "</span>";
							//                            strA += "<span class='stateOK'>가능 : " + (countStateOK.size - countStateNO) + "</span> / <span class='stateNO'>불가능 : " + countStateNO + "</span>";
							strA += "<div class='stateBar'>";
							strA += "<div class='barOK' id='bar" + data[arrCal].cal_num + "OK'></div>";
							strA += "<div class='barNO' id='bar" + data[arrCal].cal_num + "NO'></div>";
							strA += "</div>";

							barColorSet.add("#bar" + data[arrCal].cal_num + "OK-" + (countStateOK.size / (data[0].group_count + 1)));
							barColorSet.add("#bar" + data[arrCal].cal_num + "NO-" + (countStateNO / (data[0].group_count + 1)));
						}
						strA += '</div>';
						strA += '<div class="right-bottom">';
						var strB = "";
						strB += '</div>';
						strB += '</div>'; // div-right
						strB += '</div>'; // div=middle
						var str2 = data[arrCal].cal_date;
						//                        console.log("member_choice : " + scheduleCheck(data[arrCal].member_choice, data[arrCal].cal_date));

						str += '<div class="swiper-slide">';


						str += '<div class="content">';
//						                        str += '<div class="left">' + data[arrCal].state_icon + '</div>';
						str += '<div class="left">';
//						                        if (str2.indexOf(',') == -1)
						// ======================================================================================================
						if (scheduleCheck(data[arrCal].member_choice, data[arrCal].cal_date))
						{
							//							str += data[arrCal].cal_date;
							if (parseInt(str2.substr(0, 4)) == parseInt(dateToFormat(initDay).substr(0, 4))) {
								str += "<div class='onlyOne'>" + parseInt(str2.substr(4, 2)) + "월 " + parseInt(str2.substr(6, 2)) + "일</div>";
							} else {
								str += "<div class='onlyOne'>" + str2.substr(0, 4) + "년 " + parseInt(str2.substr(4, 2)) + "월 " + parseInt(str2.substr(6, 2)) + "일</div>";
							}
							//                            console.log("확정 : " + data[arrCal].cal_memo);
							scheduleSet.add(data[arrCal].cal_date + "-" + data[arrCal].cal_memo + "-" + data[arrCal].cal_num);
							str += strA;
							// 전체 일정(확정)
							str += '<a class="moreInfo" onclick="getScheduleInfo(' + data[arrCal].cal_num + ')">자세히보기</a>';
							str += strB;

							str += '</div>'; // swiper-slide

							//							$(".schedule .contentBox").append(str);
							$(".schedule .swiper-wrapper").append(str);
						} else {
							var res = str2.split(",");
							//							var res;
							//							str += res[0] + "~" + res[res.length - 1];
							if (str2.indexOf(",") == -1) {
								//								res = str2;
								if (parseInt(str2.substr(0, 4)) == parseInt(dateToFormat(initDay).substr(0, 4))) {
									str += "<div class='onlyOne'>" + parseInt(str2.substr(4, 2)) + "월 " + parseInt(str2.substr(6, 2)) + "일</div>";
								} else {
									str += "<div class='onlyOne'>" + str2.substr(0, 4) + "년 " + parseInt(str2.substr(4, 2)) + "월 " + parseInt(str2.substr(6, 2)) + "일</div>";
								}
							} else {
								res = str2.split(",");
								var resMonth1 = parseInt(res[0].substr(4, 2));
								var resMDate1 = parseInt(res[0].substr(6, 2));
								var resMonth2 = parseInt(res[res.length - 1].substr(4, 2));
								var resMDate2 = parseInt(res[res.length - 1].substr(6, 2));
								
								if(parseInt(res[res.length - 1]) < parseInt(dateToFormat(initDay)))
								{
									continue;
								}
								
								//								str += res[0] + "~" + res[res.length - 1];
								if (parseInt(res[0].substr(0, 4)) == parseInt(dateToFormat(initDay).substr(0, 4))) {
									str += "<div style='text-align:left; padding-left:5px;'>" + resMonth1 + "월 " + resMDate1 + "일</div>";
								} else {
									str += "<div style='text-align:left; padding-left:5px;'>" + res[0].substr(0, 4) + "년 " + resMonth1 + "월 " + resMDate1 + "일</div>";
								}
								//								str += "<div style='text-align:left; padding-left:5px;'>" + res[0] + "</div>";
								//								str += "<div>~</div>";

								if (parseInt(res[res.length - 1].substr(0, 4)) == parseInt(dateToFormat(initDay).substr(0, 4))) {
									str += "<div style='text-align:right;'>~ " + resMonth2 + "월 " + resMDate2 + "일</div>";
								} else {
									str += "<div style='text-align:right;'>~ " + res[res.length - 1].substr(0, 4) + "년 " + resMonth2 + "월 " + resMDate2 + "일</div>";
								}
								//								str += "<div style='text-align:right;'>~ " + res[res.length - 1] + "</div>";
							}
							//                            console.log("투표 : " + data[arrCal].cal_memo);
							for (var i = 0; i < res.length; i++) {
								voteSet.add(res[i] + "-" + data[arrCal].cal_memo + "-" + data[arrCal].cal_num);
							}
							str += strA;
							// 투표(미확정)
							str += '<a class="moreInfo" onclick="getVoteInfo(' + data[arrCal].cal_num + ')">자세히보기</a>';
							str += strB;

							str += '</div>'; // swiper-slide

							//							$(".vote .contentBox").append(str);
							$(".vote .swiper-wrapper").append(str);
						}
						//                        // ======================================================================================================
						//                        if (scheduleCheck(data[arrCal].member_choice, data[arrCal].cal_date))
						//                        {
						//                            str += data[arrCal].cal_date;
						////                            console.log("확정 : " + data[arrCal].cal_memo);
						//                            scheduleSet.add(data[arrCal].cal_date + "-" + data[arrCal].cal_memo + "-" + data[arrCal].cal_num);
						//                        }
						//                        else {
						//                            var res = str2.split(",");
						//                            str += res[0] + "~" + res[res.length - 1];
						////                            console.log("투표 : " + data[arrCal].cal_memo);
						//                            for (var i = 0; i < res.length; i++) {
//						                                voteSet.add(res[i] + "-" + data[arrCal].cal_memo + "-" + data[arrCal].cal_num);
						//                            }
						//                        }
						//                        str += '</div>';
						//                        str += '<div class="middle" onclick="addComment(this)">';
						//                        str += '<div class="middle-top">' + data[arrCal].cal_memo + '</div>';
						//                        str += '<div class="middle-bottom">';
						//                        str += '<span>' + data[arrCal].cal_writer + '님</span>';
						//                        str += '<span>외 ' + data[0].group_count + '명 참여</span>';
						//                        str += '</div>'; // div-down
						//                        str += '</div>'; // div-up
						//                        str += '<div class="right">';
						//                        str += '<div class="right-top"></div>';
						//                        str += '<div class="right-bottom">';
						//                        
						////                        if (str2.indexOf(',') == -1)
						//                        if (scheduleCheck(data[arrCal].member_choice, data[arrCal].cal_date))
						//                        {
						//                            // 전체 일정(확정)
						//                            str += '<a class="moreInfo" onclick="getScheduleInfo(' + data[arrCal].cal_num + ')">자세히보기</a>';
						//                        }
						//                        else
						//                        {
//						                             투표(미확정)
						//                            str += '<a class="moreInfo" onclick="getVoteInfo(' + data[arrCal].cal_num + ')">자세히보기</a>';
						//                        }
						//                        
						//                        str += '</div>';
						//                        str += '</div>'; // div-right
						//                        str += '</div>'; // div=middle
						////                        if (str2.indexOf(',') == -1)
						//                        if (scheduleCheck(data[arrCal].member_choice, data[arrCal].cal_date))
						//                        {
						//                            $(".schedule").append(str);
						//                            //                            document.getElementById("schedule").innerHTML += str;
						//                        }
						//                        else {
						//                            $(".vote").append(str);
						//                            //                            document.getElementById("vote").innerHTML += str;
						//                        }
						//                        console.log(str);
						// ======================================================================================================
					}
					//                    console.log(data[1].member_choice);

					//                    if(data[1].member_choice != null)
					//                    {
					//                        var mem_choice = data[1].member_choice.split(",");
					//                    }

					//                    var choiceInfo = new Array();
					//                    for(var chNum = 0; chNum < mem_choice.length; chNum++){
					//                       
					//                        
					////                        console.log(mem_choice[chNum]);
					////                        console.log(mem_choice[chNum].substr(0 , mem_choice[chNum].length - 8)); //아이디
					////                        console.log(mem_choice[chNum].substr(mem_choice[chNum].length - 8 , 4)); //년
					////                        console.log(mem_choice[chNum].substr(mem_choice[chNum].length - 4 , 2)); //월
					////                        console.log(mem_choice[chNum].substr(mem_choice[chNum].length - 2 , 2)); //일
					//                        
					//                        
					//                        
					//                        
					//                        choiceInfo.push(mem_choice[chNum].substr(0 , mem_choice[chNum].length - 8));
					//                        choiceInfo.push(mem_choice[chNum].substr(mem_choice[chNum].length - 8 , 4));
					//                        choiceInfo.push(mem_choice[chNum].substr(mem_choice[chNum].length - 4 , 2));
					//                        choiceInfo.push(mem_choice[chNum].substr(mem_choice[chNum].length - 2 , 2));
					//                        
					//                    }
					//                    for(var viewNum = 0; viewNum < choiceInfo.length; viewNum++){
					//                        console.log(choiceInfo[viewNum]);
					//                        
					//                    }
					//                    console.log(data[1].cal_date.split(","));
					//                    console.log(mem_choice);
					getGroupBrith();
//					buildCalendar();
					//                    voteMeeting(data[1].cal_date.split(","));//투표중인 날짜표시

					//                    if(data[1].cal_date.contains(","))
					//                    {
					//                        var cal_date = data[1].cal_date.split(",");
					//                        voteMeeting(cal_date);
					//                    }
					//					console.log(barColorSet);
					for (let item of barColorSet.keys()) {
						var percentC = parseFloat(item.split("-")[1]) * 100;

						$(item.split("-")[0]).css("width", percentC + "%");
					}
				},
				beforeSend: function() {
					var width = 0;
					var height = 0;
					var left = 0;
					var top = 0;

					width = 50;
					height = 50;

					top = ($(window).height() - height) / 2 + $(window).scrollTop();
					left = ($(window).width() - width) / 2 + $(window).scrollLeft();

					if ($("#div_ajax_load_image").length != 0) {
						$("#div_ajax_load_image").css({
							"top": top + "px",
							"left": left + "px"
						});
						$("#div_ajax_load_image").show();
					} else {
						$('body').append('<div id="div_ajax_load_image" style="position:absolute; top:' + top + 'px; left:' + left + 'px; width:' + width + 'px; height:' + height + 'px; z-index:9999; background:#f0f0f0; filter:alpha(opacity=50); opacity:alpha*0.5; margin:auto; padding:0; "><img src="img/loadingImg/ajax_loader6.gif" style="width:50px; height:50px;"></div>');
					}
					
				},
				complete: function() {
					 $("#div_ajax_load_image").hide();
//					getGroupBrith();
					//                    getGroupBrith();
					swiperSche = new Swiper('.schedule .swiper-container', {
						pagination: '.schedule .swiper-pagination',
						direction: 'vertical',
						slidesPerView: 3,
						paginationClickable: true,
						centeredSlides: true,
						//						spaceBetween: 30,
						mousewheelControl: true
					});

					swiperVote = new Swiper('.vote .swiper-container', {
						pagination: '.vote .swiper-pagination',
						direction: 'vertical',
						slidesPerView: 3,
						paginationClickable: true,
						centeredSlides: true,
//						slidesOffsetAfter: 192/2,
//						slidesOffsetBefore: 192/2,
						//						spaceBetween: 30,
						mousewheelControl: true
					});

					$('.schedule .contentBox').css('display', 'none');
					$('.vote .contentBox').css('display', 'none');

					//					if(scheSet)
//					console.log(scheduleSet);
//					console.log(voteSet);



					if (scheduleSet.size < 1) {
						var noStr = "<div class='swiper-slide'>잡혀있는 일정이 없습니다</div>";
						$(".schedule .swiper-wrapper").html(noStr);
					}

					if (voteSet.size < 1) {
						var noStr = "<div class='swiper-slide'>등록된 투표가 없습니다</div>"
						$(".vote .swiper-wrapper").html(noStr);
					}
				},
				error: function(req) {
					//                    alert('통신실패');
					alert("상태 : " + req.status + ", " + req.responseText + ", error : " + req.error + ", ajax : groupCal.do");
				}
			});
		}
		// 인원수 구하는 함수
		function getMemberCount(member_choice) {
			if (member_choice.indexOf(",") == -1 || member_choice == "") {
				return 0;
			} else {
				var memberSet = new Set();
				var arrayMember = member_choice.split(",");
				//                console.log(arrayMember);

				for (var i = 0; i < arrayMember.length; i++) {
					if (arrayMember[i].indexOf("-") == -1) {
						memberSet.add(arrayMember[i]);
					} else {
						memberSet.add(arrayMember[i].split("-")[1]);
						//                        console.log(arrayMember[i].split("-")[1]);
					}
				}
				//                console.log   (memberSet);
				return (memberSet.size - 1);
			}
		}
		// 생일 작업
		function getGroupBrith() {
			var para = document.location.href.split("?");
			var tempBirth;
			//            console.log("para : " + para);
			//            console.log("para[1] : " + para[1]);
			para = para[1].split("=");
			//            console.log("para2 : " + para);
			//            
			//            para = par[1];
			//            console.log("click");
			$.ajax({
				type: 'post',
				url: 'groupBirth.do',
				data: {
					group: para[1]
				},
				dataType: "json",
				success: function(data) {
					console.log(data);
					//                    console.log("groupBirth");
					//                    console.log(data);
					//                    console.log("이런");
					//                    $(data).find(Object).each(function()
					//                    {
					//                        console.log($(this).find('memberNa    me').text());
					//                    });

					for (var i = 0; i < data.length; i++) {
						//                        console.log(data[i].memberBirth + "-" + data[i].memberName + "-" + data[i].memberId);
						var memBirth = data[i].memberBirth + "-" + data[i].memberName + "-" + data[i].memberId + "-" + data[i].memberImg;
						birthSet.add(memBirth);
						//                        console.log(memBirth);
						//                        console.log(birthSet[i]);
						// 생일자 작업중임
						//                        var today = new Date('YYYYMMDD');
						//                        console.log(today.getFullYear());
						//						if (data[i].memberBirth > 0) {
						//							var str = "<div class='content'><div class='left birth'>" + data[i].memberBirth + "</div>";
						//							str += "<div class='middle birth'>" + data[i].memberName + "님(" + data[i].memberId + ")의 생일</div>";
						//							str += "<div class='right birth'></div></div>"
						//							$('.event .contentBox').append(str);
						//							//                            console.log(today.getFullYear() + "" + (today.getMonth('MM') + 1) + "" + today.getDay());
						//							//                            console.log(today);
						//						}

					}

					var birthSortSet = new Set();

					for (let item of birthSet.keys()) {
						birthSortSet.add(item.substr(2));
					}

					//					console.log(birthSortSet);

					tempBirth = Array.from(birthSortSet).sort();

					//					console.log(tempBirth);
					//					birthSet = new Set();
					var birthIndex = 0;
					for (var i = 0; i < tempBirth.length; i++) {
						if (parseInt(tempBirth[i].split("-")[0].substr(0, 2)) >= initDay.getMonth() + 1 &&
							parseInt(tempBirth[i].split("-")[0].substr(2, 2)) >= initDay.getDate()) {
							birthIndex = i;
							//							console.log(tempBirth[i]);
							break;
						}
					}
					//					console.log(birthSet);
					//					console.log(initDay.getMonth() + 1);
					//					console.log(initDay.getDate());
					//                    console.log("birthSet");
					var CurrentMonth;

					for (var i = 0; i < tempBirth.length; i++) {
						//                        console.log(item.split("-"));
						//                        console.log("split : " + item.split("-")[0].substr(2, 4));
						var birthDay = tempBirth[i].split("-")[0];
//						console.log(CurrentMonth);
//						console.log(birthDay);
						//						var str = "<div class='content'><div class='left birth'>" + parseInt(birthDay.substr(0, 2)) + "월 " + parseInt(birthDay.substr(2, 2)) + "일</div>";
						//						str += "<div class='middle birth'>" + tempBirth[i].split("-")[1] + "님(" + tempBirth[i].split("-")[2] + ")의 생일</div>";
						//						str += "<div class='right birth'></div></div>";
						var str = "<div class='birthListBox'>";
                        
						if (i == 0) {
							str += "<div class ='birthMonth' id='bm" + parseInt(birthDay.substr(0, 2)) + "'>&nbsp;" + parseInt(birthDay.substr(0, 2)) + "월 <div class='stick'>                                             </div></div>";
							CurrentMonth = parseInt(birthDay.substr(0, 2));
						} else if (parseInt(birthDay.substr(0, 2)) > CurrentMonth) {
//							console.log("1");
							str += "<div class ='birthMonth' id='bm" + parseInt(birthDay.substr(0, 2)) + "'>&nbsp;" + parseInt(birthDay.substr(0, 2)) + "월 <div class='stick'>                                              </div></div>";
                            CurrentMonth = parseInt(birthDay.substr(0, 2));
						} else {
//                            console.log(tempBirth[i]);
							str += "<div class ='birthMonth' id='bm" + parseInt(birthDay.substr(0, 2)) + "'>하이<div class='stick'>                                                     </div></div>";
						}

						str += "<div class='birthMemBox' id='bMB" + i + "' value='" + tempBirth[i].split("-")[2] + "' onclick='getbMB(this)'>&nbsp;";
						str += "<div class='birthMemImg'><img src='" + tempBirth[i].split("-")[3] + "'/></div>";
						str += "<div class='birthMemInfo'>"
						str += "<div class='birthMemName'>" + tempBirth[i].split("-")[1] + "</div>";
						str += "<div class='birthMemDate'>" + parseInt(birthDay.substr(0, 2)) + "월 " + parseInt(birthDay.substr(2, 2)) + "일</div>";
						str += "</div>"; // birthMemInfo
						str += "</div>"; // birthMemBox
						str += "</div>"; // birthListBox
						$('.event .contentBox').css('width', tempBirth.length * 201);
						$('.event .contentBox').append(str);
					}

					// swiper-container
					for (var i = 0; i < tempBirth.length; i++) {
						//                        console.log(item.split("-"));
						//                        console.log("split : " + item.split("-")[0].substr(2, 4));
						var birthDay = tempBirth[i].split("-")[0];
						//						var str = "<div class='content'><div class='left birth'>" + parseInt(birthDay.substr(0, 2)) + "월 " + parseInt(birthDay.substr(2, 2)) + "일</div>";
						//						str += "<div class='middle birth'>" + tempBirth[i].split("-")[1] + "님(" + tempBirth[i].split("-")[2] + ")의 생일</div>";
						//						str += "<div class='right birth'></div></div>";
						var str = "<div class='swiper-slide'>";
						str += "<div class='birthListBox'>";
						if (i == 0) {
							str += "<div class ='birthMonth' id='bm" + parseInt(birthDay.substr(0, 2)) + "'>&nbsp;" + parseInt(birthDay.substr(0, 2)) + "월 <div class='stick'>                                 </div></div>";
							CurrentMonth = parseInt(birthDay.substr(0, 2));
						} else if (parseInt(birthDay.substr(0, 2)) > CurrentMonth) {
							str += "<div class ='birthMonth' id='bm" + parseInt(birthDay.substr(0, 2)) + "'>&nbsp;" + parseInt(birthDay.substr(0, 2)) + "월 <div class='stick'>                                 </div></div>";
							CurrentMonth = parseInt(birthDay.substr(0, 2));
						} else {
							str += "<div class ='birthMonth' id='bm" + parseInt(birthDay.substr(0, 2)) + "'><div class='stick'>                                 </div></div>";
						}

						str += "<div class='birthMemBox' id='bMB" + i + "' value='" + tempBirth[i].split("-")[2] + "' onclick='getbMB(this)'>&nbsp;";
						str += "<div class='birthMemImg'><img src='" + tempBirth[i].split("-")[3] + "'/></div>";
						str += "<div class='birthMemInfo'>"
						str += "<div class='birthMemName'>" + tempBirth[i].split("-")[1] + "</div>";
						str += "<div class='birthMemDate'>" + parseInt(birthDay.substr(0, 2)) + "월 " + parseInt(birthDay.substr(2, 2)) + "일</div>";
						str += "</div>"; // birthMemInfo
						str += "</div>"; // birthMemBox
						str += "</div>"; // birthListBox
						str += "</div>"; // swiper-slide
						$('.event .contentBox').css('width', tempBirth.length * 201);
						//						$('.event .contentBox').append(str);
						$('.event .swiper-wrapper').append(str);
					}

					//					for(var i = 0; i < tempBirth.length; i++)
					//					{
					////						$('#bMB' + i).attr('onlick', "getMemInfo('" + tempBirth[i].split("-")[2] + "')");
					//						$('#bMB' + i).click(function(){
					//							getMemInfo(tempBirth[i].split("-")[2]);
					//						});
					//					}

					//					for (var i = birthIndex; i < tempBirth.length; i++)
					//					{
					//						//                        console.log(item.split("-"));
					//						//                        console.log("split : " + item.split("-")[0].substr(2, 4));
					//						var birthDay = tempBirth[i].split("-")[0];
					//						var str = "<div class='content'><div class='left birth'>" + parseInt(birthDay.substr(0, 2)) + "월 " + parseInt(birthDay.substr(2, 2)) + "일</div>";
					//						str += "<div class='middle birth'>" + tempBirth[i].split("-")[1] + "님(" + tempBirth[i].split("-")[2] + ")의 생일</div>";
					//						str += "<div class='right birth'></div></div>";
					//						$('.event .contentBox').append(str);
					//					}
					//					
					//					for (var i = 0; i < birthIndex; i++)
					//					{
					//						//                        console.log(item.split("-"));
					//						//                        console.log("split : " + item.split("-")[0].substr(2, 4));
					////						var str = "<div class='content'><div class='left birth'>" + tempBirth[i].split("-")[0] + "</div>";
					//						var birthDay = tempBirth[i].split("-")[0];
					//						var str = "<div class='content'><div class='left birth'>" + parseInt(birthDay.substr(0, 2)) + "월 " + parseInt(birthDay.substr(2, 2)) + "일</div>";
					//						str += "<div class='middle birth'>" + tempBirth[i].split("-")[1] + "님(" + tempBirth[i].split("-")[2] + ")의 생일</div>";
					//						str += "<div class='right birth'></div></div>";
					//						$('.event .contentBox').append(str);
					//					}
					//					for (let item of birthSet.keys())
					//					{
					//						//                        console.log(item.split("-"));
					//						//                        console.log("split : " + item.split("-")[0].substr(2, 4));
					//						var str = "<div class='content'><div class='left birth'>" + item.split("-")[0] + "</div>";
					//						str += "<div class='middle birth'>" + item.split("-")[1] + "님(" + item.split("-")[2] + ")의 생일</div>";
					//						str += "<div class='right birth'></div></div>";
					//						$('.event .contentBox').append(str);
					//					}
					buildCalendar();
//					chkId();
				},
				beforeSend: function() {
					var width = 0;
					var height = 0;
					var left = 0;
					var top = 0;

					width = 50;
					height = 50;

					top = ($(window).height() - height) / 2 + $(window).scrollTop();
					left = ($(window).width() - width) / 2 + $(window).scrollLeft();

					if ($("#div_ajax_load_image").length != 0) {
						$("#div_ajax_load_image").css({
							"top": top + "px",
							"left": left + "px"
						});
						$("#div_ajax_load_image").show();
					} else {
						$('body').append('<div id="div_ajax_load_image" style="position:absolute; top:' + top + 'px; left:' + left + 'px; width:' + width + 'px; height:' + height + 'px; z-index:9999; background:#f0f0f0; filter:alpha(opacity=50); opacity:alpha*0.5; margin:auto; padding:0; "><img src="img/loadingImg/ajax_loader6.gif" style="width:50px; height:50px;"></div>');
					}
					
				},
				complete: function() {
					 $("#div_ajax_load_image").hide();
					//					console.log(tempBirth);
					//					for(var i = 0; i < tempBirth.length; i++)
					//					{
					//						var tempMN = tempBirth[i].split("-")[2];
					//						console.log(tempMN);
					//////						$('#bMB' + i).attr('onlick', "getMemInfo('" + tempBirth[i].split("-")[2] + "')");
					////						$('#bMB' + i).attr('onlick', "getMemInfo(" + tempMN + ")");
					//						$('#bMB' + i).click(function(){
					//							getMemInfo(tempMN);
					//						});
					//					}
					$('.event .contentBox').css('display', 'none');
					swiper = new Swiper('.event .swiper-container', {
						pagination: '.event .swiper-pagination',
						//						slidesPerView: 3,
						slidesPerView: 'auto',
						centeredSlides: true,
						paginationClickable: true,
						nextButton: '.swiper-button-next',
						prevButton: '.swiper-button-prev',
						spaceBetween: 0,
						freeMode: true
					});
				},
				error: function(req) {
					//                    alert('통신실패');
					alert("상태 : " + req.status + ", " + req.responseText + ", error : " + req.error + ", ajax : groupBirth.do");
				}
			})
		}
		// 임시 함수
		function getbMB(bMB) {
			//			console.log($(bMB).attr('value'));
			getMemInfo($(bMB).attr('value'));
		}
		// 확정된 일정 정보 출력
		function getScheduleInfo(cal_num) {
			//            console.log("확정된 일정 : " + cal_num);

			var para = document.location.href.split("?");
			para = para[1].split("=");
			$.ajax({
				type: 'post',
				url: 'groupSchedule.do',
				data: {
					group: para[1],
					calNum: cal_num
				},
				dataType: "json",
				success: function(data) {
					console.log("확정");
					console.log(data);
					
					nowCalNum = cal_num;
//					console.log(cal_num);

					var scheduleString = "";
					//                    var commentsString = "<div id='CommentBox'>";
					var commentsString = "";
					var scheduleObject = data[0];
					// 이부분은 에러나면 DB에서 못받아오는거임
					var memberList = scheduleObject.member_choice.split(",");

					for (var i = 0; i < data.length; i++) {
//						 일정 정보
						if (data[i].cal_depth == 0) {
							scheduleString += "<div id='scheduleDate'>일정 : " + scheduleObject.cal_date.substr(0, 4) + "년 " + scheduleObject.cal_date.substr(4, 2) + "월 " + scheduleObject.cal_date.substr(6, 2) + "일</div>";
							scheduleString += "<div id='scheduleWriter'>작성자 : " + findMemberName(scheduleObject.cal_writer) + "</div>";
							scheduleString += "<div id='scheduleMemo'>내용 : " + scheduleObject.cal_memo + "</div>";
							scheduleString += "<div id='scheduleMember'>참가자 : ";
							// 참가자 출력
							for (var j = 0; j < memberList.length; j++) {
//								                        console.log(memberList[i].substr(8));
								//                                scheduleString += findMemberName(memberList[j].substr(8));
								scheduleString += findMemberName(memberList[j]);

								if ((j + 1) < memberList.length) {
									scheduleString += ", ";
								}
							}
							scheduleString += "</div>";
						} else if (data[i].cal_depth > 0) {
							//                            console.log("확인!");

//							commentsString += "<div class='commentBox'><div class='commentWriter'>" + findMemberName(data[i].cal_writer) + " : </div>";
//							commentsString += "<div calss='commentMemo'>\t" + data[i].cal_memo + "</div></div>";
							commentsString += "<div class='swiper-slide'><div class='commentBox'><div class='commentWriter'>" + findMemberName(data[i].cal_writer) + " : </div>";
							commentsString += "<div calss='commentMemo'>\t" + data[i].cal_memo + "</div>";
							
							var commDate = new Date();
							
							// 초단위
							var commNow = parseInt(commDate.getTime()/1000);
							var commBefore = parseInt(data[i].cal_time/1000);
							var commTime = commNow - commBefore;
//							console.log(commNow);
//							console.log(commBefore);
//							console.log(commNow - commBefore);
							
							if(commTime >= 3600 * 24 * 365)
							{
								commentsString += "<span class='commentTime'> - " + parseInt(commTime/3600 * 24 * 365) + "년 전</span>";
							}
							else if(commTime >= 3600 * 24 * 30)
							{	
								commentsString += "<span class='commentTime'> - " + parseInt(commTime/3600 * 24 * 30) + "개월 전</span>";
							}
							else if(commTime >= 3600 * 24)
							{
								commentsString += "<span class='commentTime'> - " + parseInt(commTime/3600 * 24) + "일 전</span>";
							}
							else if(commTime >= 3600)
							{
								if(parseInt(commTime/3600) == 1)
									commentsString += "<span class='commentTime'> - 한 시간 전</span>";
								else
									commentsString += "<span class='commentTime'> - " + parseInt(commTime/3600) + "시간 전</span>";
							}
							else if(commTime >= 60)
							{
								commentsString += "<span class='commentTime'> - " + parseInt(commTime/60) + "분 전</span>";
							}
							else
							{
								commentsString += "<span class='commentTime'> - " + parseInt(commTime) + "초 전</span>";
							}
							
							
							commentsString += "</div></div>";
							//                            commentsString += "<div id='commentTime'>" + data[i].cal_time + "</div>";
						}

						// 댓글창
						//                        scheduleString += "<div id='CommentBox'>";

						//                        console.log(data[i].cal_depth);
						//                    console.log(scheduleString);
						//                    console.log(memberList);
					}
					// 댓글입력란
					//                    scheduleString += "<div id='Comment'>";
					//                    scheduleString += commentsString;
					//                    scheduleString += "</div>"; // Comment
					//                    scheduleString += "</div>"; // CommentBox

					$(".modalSchduleInfo").html(scheduleString);
					console.log(commentsString.length);
//					if (commentsString.match(""))
					if (commentsString.length < 1)
					{
						//<div class="swiper-slide">Slide 1</div>
						commentsString += "<div class='swiper-slide'><div class='commentBox'><div class='commentWriter'></div>";
						commentsString += "<div calss='commentMemo'>아직 입력된 댓글이 없습니다</div></div><div>";
					}
//					console.log(commentsString);
//					$("#commentList").html(commentsString);
					$("#commentList .swiper-wrapper").html(commentsString);
					$("#modal2>#modalTitle").html("일정 <div class='stick'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>");
					$("#modal2").css('display', 'inline-block');
					$("#blindCover").css('display', 'block');
					$("#voteButtonBox").html("");
					$('.commentBox').css('display', 'block');
					//                    document.getElementById('modal2').innerHTML = scheduleString;
				},
				beforeSend: function() {
					var width = 0;
					var height = 0;
					var left = 0;
					var top = 0;

					width = 50;
					height = 50;

					top = ($(window).height() - height) / 2 + $(window).scrollTop();
					left = ($(window).width() - width) / 2 + $(window).scrollLeft();

					if ($("#div_ajax_load_image").length != 0) {
						$("#div_ajax_load_image").css({
							"top": top + "px",
							"left": left + "px"
						});
						$("#div_ajax_load_image").show();
					} else {
						$('body').append('<div id="div_ajax_load_image" style="position:absolute; top:' + top + 'px; left:' + left + 'px; width:' + width + 'px; height:' + height + 'px; z-index:9999; background:#f0f0f0; filter:alpha(opacity=50); opacity:alpha*0.5; margin:auto; padding:0; "><img src="img/loadingImg/ajax_loader6.gif" style="width:50px; height:50px;"></div>');
					}
					
				},
				complete: function() {
					 $("#div_ajax_load_image").hide();
					swiperComment = new Swiper('#commentList .swiper-container', {
						pagination: '#commentList .swiper-pagination',
						direction: 'vertical',
						slidesPerView: 5,
						paginationClickable: true,
//						centeredSlides: true,
						spaceBetween: 10,
						//						spaceBetween: 30,
						mousewheelControl: true
					});
				},
				error: function(req) {
					//                    alert('통신실패');
					alert("상태 : " + req.status + ", " + req.responseText + ", error : " + req.error + ", ajax : groupSchedule.do");
				}
			})
		}
		// 미확정된 일정 정보 출력
		function getVoteInfo(cal_num) {
			memberVoteListSet = new Set();
			console.log("투표할 일정 : " + cal_num);

			var para = document.location.href.split("?");
			para = para[1].split("=");
			$.ajax({
				type: 'post',
				url: 'groupSchedule.do',
				data: {
					group: para[1],
					calNum: cal_num
				},
				dataType: "json",
				success: function(data) {
					console.log("미확정");
					console.log(data);
					nowCalNum = cal_num;
//					console.log(nowCalNum);
					var voteString = "";
					var swiperString = "";
					//                    var commentsString = "<div id='CommentBox'>";
					var commentsString = "";
					var voteObject = data[0];
					// 이부분은 에러나면 DB에서 못받아오는거임
					var memberList;
					if (voteObject.member_choice.indexOf(",") == -1) {
						memberList = new Array();
						memberList.push(voteObject.member_choice);
						//                        console.log(memberList);
					} else {
						memberList = voteObject.member_choice.split(",");
					}
					var voteDateList;
					var voteDateSet = new Set();
					var voteDateCount = 1;
					if (voteObject.cal_date.indexOf(",") == -1) {
						voteDateSet.add(voteObject.cal_date);
					} else {
						voteDateList = voteObject.cal_date.split(",");
						voteDateList = Array.from(voteDateList).sort();
						for (var i = 0; i < voteDateList.length; i++) {
							voteDateSet.add(voteDateList[i]);
						}
						console.log(voteDateSet);
						voteDateCount = voteDateSet.size;
						//                        voteDateList = Array.from(voteDateSet).sort();
						//                        console.log(voteDateList);

					}
					//                    console.log(voteDateCount);

					for (var i = 0; i < data.length; i++) {
						//                        console.log(data[i].cal_depth);
						if (data[i].cal_depth == 0) {
//							voteString += "<div id='voteListBox'>";
                            

                            
							if (login_userId.match(group_master)) {
								//                                var groupMemberSet = new Set();
								var ImpossibleCount = 0;
								var possibleCount = 0;

								if (voteDateCount == 1) {
									var tempML = new Set();
//									console.log(memberList);
									for (var j = 0; j < memberList.length; j++) {
										if (memberList[j].split("-")[0].match("00000000")) {
											ImpossibleCount++;
										} else if (memberList[j].split("-")[0].match(voteObject.cal_date)) {
											possibleCount++;
										}
										tempML.add(memberList[j].split("-")[1]);
									}

									ImpossibleCount = tempML.size - possibleCount;

//									voteString += "<div id='vLBTitle'>날짜선택</div>";
//
//									voteString += "<div class='rdoSelect'><input type='radio' id='' name='masterSelected' value='" + voteObject.cal_date + "'> " + voteObject.cal_date.substr(0, 4) + "년 " + voteObject.cal_date.substr(4, 2) + "월 " + voteObject.cal_date.substr(6, 2) + "일 [<span class='stateOK'>가능 : " + possibleCount + "명 </span> / <span class='stateNO'>불가능 : ";
									swiperString += "<div class='swiper-slide'><div id='vLBTitle'>날짜선택</div></div>";

									swiperString += "<div class='swiper-slide'><div class='rdoSelect'><input type='radio' id='' name='masterSelected' value='" + voteObject.cal_date + "'> " + voteObject.cal_date.substr(0, 4) + "년 " + voteObject.cal_date.substr(4, 2) + "월 " + voteObject.cal_date.substr(6, 2) + "일 [<span class='stateOK'>가능 : " + possibleCount + "명 </span> / <span class='stateNO'>불가능 : ";
									if (ImpossibleCount == 0) {
//										voteString += "없음";
										swiperString += "없음";
									} else {
//										voteString += ImpossibleCount + "명";
										swiperString += ImpossibleCount + "명";
									}
//									voteString += " </span>]</div>";
									swiperString += " </span>]</div></div>";
								} else {
									var tempML = new Set();

//									voteString += "<div id='vLBTitle'>날짜선택</div>";
									swiperString += "<div class='swiper-slide'><div id='vLBTitle'>날짜선택</div></div>";

									for (let item of voteDateSet.keys()) {
										ImpossibleCount = 0;
										possibleCount = 0;

										for (var j = 0; j < memberList.length; j++) {
											if (memberList[j].split("-")[0].match("00000000")) {
												ImpossibleCount++;
											} else if (memberList[j].split("-")[0].match(item)) {
												possibleCount++;
											}
											tempML.add(memberList[j].split("-")[1]);
										}

										ImpossibleCount = tempML.size - possibleCount;

//										voteString += "<div class='rdoSelect'><input type='radio' id='' name='masterSelected' value='" + item + "'> " + item.substr(0, 4) + "년 " + item.substr(4, 2) + "월 " + item.substr(6, 2) + "일 [<span class='stateOK'>가능 : " + possibleCount + "명 </span> / <span class='stateNO'>불가능 : ";
										swiperString += "<div class='swiper-slide'><div class='rdoSelect'><input type='radio' id='' name='masterSelected' value='" + item + "'> " + item.substr(0, 4) + "년 " + item.substr(4, 2) + "월 " + item.substr(6, 2) + "일 [<span class='stateOK'>가능 : " + possibleCount + "명 </span> / <span class='stateNO'>불가능 : ";
										if (ImpossibleCount == 0) {
//											voteString += "없음";
											swiperString += "없음";
										} else {
//											voteString += ImpossibleCount + "명";
											swiperString += ImpossibleCount + "명";
										}
//										voteString += " </span>]</div>";
										swiperString += " </span>]</div></div>";
									}
								}
							} else if (voteDateCount == 1) {
//								voteString += "<div id='vLBTitle'>일정투표</div>";
//								voteString += "<div class='voteList' id='voteList" + voteObject.cal_date + "' onClick='addMemberVoteList(" + voteObject.cal_date + ")'>" + voteObject.cal_date.substr(0, 4) + "년 " + voteObject.cal_date.substr(4, 2) + "월 " + voteObject.cal_date.substr(6, 2) + "일</div>";
//								swiperString += "<div class='swiper-slide'><div id='vLBTitle'>일정투표</div></div>";
								swiperString += "<div class='swiper-slide'><div class='voteYear'>" + voteObject.cal_date.substr(0, 4) + "년 " + voteObject.cal_date.substr(4, 2) + "월</div></div>";
								swiperString += "<div class='swiper-slide'><div class='voteList' id='voteList" + voteObject.cal_date + "' onClick='addMemberVoteList(" + voteObject.cal_date + ")'>" + voteObject.cal_date.substr(6, 2) + "일&nbsp;&nbsp;&nbsp;</div></div>";
								
//								swiperString += "<div class='swiper-slide'><div class='voteList' id='voteList" + item + "' onclick='addMemberVoteList(" + item + ")'>" + item.substr(6, 2) + "일&nbsp;&nbsp;&nbsp;</div>&nbsp;";
								
							} else {
								var yearTemp = voteObject.cal_date.substr(0, 4);
								//                                var yearTemp = 
								var monthTEmp = voteObject.cal_date.substr(4, 2);
								if (parseInt(monthTEmp) < 10)
									monthTEmp = voteObject.cal_date.substr(5, 1);
								//                                var monthTEmp = voteObject.cal_date.substr(4,2);

								//                                console.log(yearTemp);
//								voteString += "<div id='vLBTitle'>일정투표</div>";
//								voteString += "<div class='voteYear'>" + yearTemp + "년<br>";
//								voteString += "<div class='voteMonth'><div class='spanMonth'>" + monthTEmp + "월</div>&nbsp;&nbsp;:&nbsp;&nbsp;";
//								swiperString += "<div class='swiper-slide'><div id='vLBTitle'>일정투표</div></div>";
								swiperString += "<div class='swiper-slide'><div class='voteYear'>" + yearTemp + "년 " + monthTEmp + "월</div></div><div class='swiper-slide'>";
								var vDSCount = 0;
								for (let item of voteDateSet.keys()) {
									if (yearTemp < item.substr(0, 4)) {
//										voteString += "</div></div>";
										swiperString += "</div>";
										yearTemp = item.substr(0, 4);
										monthTEmp = item.substr(4, 2);
										//                                        console.log(parseInt(item.substr(4, 2)));
										//                                        monthTEmp = parseInt(item.substr(4, 2));
										if (parseInt(monthTEmp) < 10) {
											monthTEmp = item.substr(5, 1);
										}
//										voteString += "<div class='voteYear'>" + yearTemp + "년<br>";
//										voteString += "<div class='voteMonth'><div class='spanMonth'>" + monthTEmp + "월</div>&nbsp;&nbsp;:&nbsp;&nbsp;";
//										voteString += "<div class='voteList' id='voteList" + item + "' onclick='addMemberVoteList(" + item + ")'>" + item.substr(6, 2) + "일&nbsp;&nbsp;&nbsp;</div>&nbsp;";
										swiperString += "<div class='swiper-slide'><div class='voteYear'>" + yearTemp + "년 " + monthTEmp + "월</div></div>";
										swiperString += "<div class='swiper-slide'><div class='voteList' id='voteList" + item + "' onclick='addMemberVoteList(" + item + ")'>" + item.substr(6, 2) + "일&nbsp;&nbsp;&nbsp;</div>&nbsp;";
										//                                    } else if (monthTEmp < item.substr(4, 2)) {
									}
									else if (monthTEmp < parseInt(item.substr(4, 2))) {
//										voteString += "</div>";
										swiperString += "</div>";
										monthTEmp = item.substr(4, 2);
										if (parseInt(monthTEmp) < 10) {
											monthTEmp = item.substr(5, 1);
										}
//										voteString += "<div class='voteMonth'><div class='spanMonth'>" + monthTEmp + "월</div>&nbsp;&nbsp;:&nbsp;&nbsp;";
//										voteString += "<div class='voteList' id='voteList" + item + "' onclick='addMemberVoteList(" + item + ")'>" + item.substr(6, 2) + "일&nbsp;&nbsp;&nbsp;</div>&nbsp;";
										swiperString += "<div class='swiper-slide'><div class='voteYear'>" + yearTemp + "년 " + monthTEmp + "월</div></div>";
										swiperString += "<div class='voteList' id='voteList" + item + "' onclick='addMemberVoteList(" + item + ")'>" + item.substr(6, 2) + "일&nbsp;&nbsp;&nbsp;</div>&nbsp;";
									}
									else if (vDSCount >= 5) {
//										voteString += "</div>";
										swiperString += "</div>";
										monthTEmp = item.substr(4, 2);
										if (parseInt(monthTEmp) < 10) {
											monthTEmp = item.substr(5, 1);
										}
//										voteString += "<div class='voteMonth'><div class='spanMonth'>" + monthTEmp + "월</div>&nbsp;&nbsp;:&nbsp;&nbsp;";
//										voteString += "<div class='voteList' id='voteList" + item + "' onclick='addMemberVoteList(" + item + ")'>" + item.substr(6, 2) + "일&nbsp;&nbsp;&nbsp;</div>&nbsp;";
										swiperString += "<div class='swiper-slide'><div class='voteList' id='voteList" + item + "' onclick='addMemberVoteList(" + item + ")'>" + item.substr(6, 2) + "일&nbsp;&nbsp;&nbsp;</div>&nbsp;";
										
										vDSCount = 0;
									}
									else {
//										voteString += "<div class='voteList' id='voteList" + item + "' onclick='addMemberVoteList(" + item + ")'>" + item.substr(6, 2) + "일&nbsp;&nbsp;&nbsp;</div>&nbsp;";
										swiperString += "<div class='voteList' id='voteList" + item + "' onclick='addMemberVoteList(" + item + ")'>" + item.substr(6, 2) + "일&nbsp;&nbsp;&nbsp;</div>&nbsp;";
									}
									vDSCount++;
								}
//								voteString += "</div>";
//								voteString += "</div>";
								swiperString += "</div>";
							}
                            
                            //							voteString += "</div>"; // voteListBox
							voteString += "<div id='voteWriter'>작성자 : " + findMemberName(voteObject.cal_writer) + "</div>";
							voteString += "<div id='voteMemo'>내용 : " + voteObject.cal_memo + "</div>";
							//							voteString += "<div id='voteDate'>일정 : " + voteObject.cal_date.substr(0, 4) + "년 " + voteObject.cal_date.substr(4, 2) + "월 " + voteObject.cal_date.substr(6, 2) + "일</div>";
							voteString += "<div id='voteMember'>투표한 사람 : " + voteObject.cal_writer;
							// 참가자 출력
                            
                            
							var voteMemberSet = new Set();
							var user0000 = false;

							for (var j = 0; j < memberList.length; j++) {
//								                                console.log(memberList[j]);
								//                                console.log(memberList[j].split("-")[1]);
//								                                if(memberList.indexOf(",") == -1 && memberList.split("-")[1].match(login_userId))
								//                                {
								//                                    a
								//                                }
								if (memberList[j].split("-")[1].match(login_userId) && memberList[j].split("-")[0].match("00000000")) {
									user0000 = true;
								}

								if (memberList[j].split("-")[1].match(login_userId) && !memberList[j].split("-")[0].match("00000000")) {
									//                                    console.log(memberList[j]);
									if (!login_userId.match(group_master)) {
										//                                        user0000 = true;
										addMemberVoteList(parseInt(memberList[j].split("-")[0]));
									}
								}
								//                        console.log(memberList[i].substr(8));
								//                                scheduleString += findMemberName(memberList[j].substr(8));
								//                                voteString += findMemberName(memberList[j]);
								//                                voteString += "아이디 가져오기";
								voteMemberSet.add(memberList[j].split("-")[1]);

								//                                if((j+1) < memberList.length)
								//                                {
								//                                    voteString += ", ";
								//                                }
							}
							//                            console.log(voteMemberSet);
//							console.log(voteDateCount);
//							console.log(voteMemberSet);
//							console.log(voteMemberSet.size);
//							if (voteDateCount > 1 && voteMemberSet.size > 1)
							if (voteDateCount > 0 && voteMemberSet.size > 1)
							{
								//                                console.log(voteMemberSet.size);
								//                                voteString += "님 외 " + voteMemberSet.size + "명</div>";
								voteString += "님 외 " + (voteMemberSet.size - 1) + "명";
							} else {
								voteString += "님 외 투표한 사람이 없습니다";
							}
							voteString += "</div>";
						} else if (data[i].cal_depth > 0) {
//							                            console.log(data[i]);
							
//							commentsString += "<div class='commentBox'><div class='commentWriter'>" + findMemberName(data[i].cal_writer) + " : </div>";
//							commentsString += "<div class='commentMemo'>" + data[i].cal_memo + "</div></div>";
							// <div class="swiper-slide">Slide 1</div>
							commentsString += "<div class='swiper-slide'><div class='commentBox'><div class='commentWriter'>" + findMemberName(data[i].cal_writer) + " : </div>";
							commentsString += "<div class='commentMemo'>" + data[i].cal_memo + "</div>";
							
							var commDate = new Date();
							
							// 초단위
							var commNow = parseInt(commDate.getTime()/1000);
							var commBefore = parseInt(data[i].cal_time/1000);
							var commTime = commNow - commBefore;
//							console.log(commNow);
//							console.log(commBefore);
//							console.log(commNow - commBefore);
							
							if(commTime >= 3600 * 24 * 365)
							{
								commentsString += "<span class='commentTime'> - " + parseInt(commTime/3600 * 24 * 365) + "년 전</span>";
							}
							else if(commTime >= 3600 * 24 * 30)
							{	
								commentsString += "<span class='commentTime'> - " + parseInt(commTime/3600 * 24 * 30) + "개월 전</span>";
							}
							else if(commTime >= 3600 * 24)
							{
								commentsString += "<span class='commentTime'> - " + parseInt(commTime/3600 * 24) + "일 전</span>";
							}
							else if(commTime >= 3600)
							{
								if(parseInt(commTime/3600) == 1)
									commentsString += "<span class='commentTime'> - 한 시간 전</span>";
								else
									commentsString += "<span class='commentTime'> - " + parseInt(commTime/3600) + "시간 전</span>";
							}
							else if(commTime >= 60)
							{
								commentsString += "<span class='commentTime'> - " + parseInt(commTime/60) + "분 전</span>";
							}
							else
							{
								commentsString += "<span class='commentTime'> - " + parseInt(commTime) + "초 전</span>";
							}
							
//							commentsString += "";
							commentsString += "</div></div>";
						}

						// 댓글창
						//                        scheduleString += "<div id='CommentBox'>";

						//                        console.log(data[i].cal_depth);
						//                    console.log(scheduleString);
						//                    console.log(memberList);
					}
					// 댓글입력란
					//                    voteString += "<div id='Comment'>";
					//                    voteString += commentsString;
					//                    voteString += "</div>"; // Comment
					//                    voteString += "</div>"; // CommentBox
					var alreadyVote = false;
					var strMemberSet = "";
					for (let item of voteMemberSet.keys()) {
						memTempList.add(item)
					}
					strMemberSet = strMemberSet.substr(0, strMemberSet.length - 1);
					//                    console.log(strMemberSet);

					// 상황에 따라 다르게 보여줌
					var voteBox = "";
					if (login_userId.match(group_master)) {
						// 방장전용
						voteBox = "<input class='userButton' type='button' value='결정하기' onclick='selectVoteList(" + cal_num + ")'/>";
					} else {
						// 일반유저
						voteBox = "<input class='userButton' type='button' value='투표하기' onclick='addVoteList(" + cal_num + ")'/>";

						for (let item of voteMemberSet.keys()) {
							if (item.match(login_userId)) {
								voteBox = "<input class='userButton' type='button' value='수정하기' onclick='addVoteList(" + cal_num + ")'/>";
								alreadyVote = true;
							}
						}
					}

//					$(".modalSchduleInfo").html(voteString);
					$(".modalSchduleInfo .swiper-wrapper").html(swiperString); // swiper
					$(".modalSchduleInfo .mSIinfo").html(voteString); // info
					$("#voteButtonBox").html(voteBox);
					$('#voteButtonBox').css('display', 'block');

					if (commentsString.length < 1) {
//						 <div class="swiper-slide">Slide 1</div>
						commentsString += "<div class='swiper-slide'><div class='commentBox'><div class='commentWriter'></div>";
						commentsString += "<div calss='commentMemo'>아직 입력된 댓글이 없습니다</div></div></div>";
					}

//					$("#commentList").html(commentsString);
					$("#commentList .swiper-wrapper").html(commentsString);
					$("#modal2>#modalTitle").html("투표중인 일정 <div class='stick'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>")
					$("#modal2").css('display', 'inline-block');
					$("#blindCover").css('display', 'block');

					//					setTimeout(function(){
					//						if(parseInt($("#modal2").css('height'))%2 == 1)
					//						{
					//							var height = parseInt($("#modal2").css('height'));
					//							$("#modal2").css('height', height + 1);
					//						}
					//					}, 300)
					//					if(parseInt($("#modal2").css('height'))%2 == 1)
					//					{
					//						var height = parseInt($("#modal2").css('height'));
					//						$("#modal2").css('height', height + 1);
					//					}

					//					console.log(alreadyVote);
					//					console.log(user0000);

					//                    if(alreadyVote && user0000)
					//                    {
//					console.log(voteDateSet);
					for (let item of voteDateSet.keys()) {
						$('#voteList' + item).css("background-image", "url(img/etcIcon/unchecked.png)");
					}
					//                    }



					//                    for (let item of memberVoteListSet.keys()) {
					//                        //                        addMemberVoteList(item);
					////                        $("#voteList" + item).css("backgroundColor", "antiquewhite");
					//                        $("#voteList" + date).css("background-image", "url(img/etcIcon/checked.png)");
					//                    }
					//                    document.getElementById('modal2').innerHTML = voteString;


				},
				beforeSend: function() {
					var width = 0;
					var height = 0;
					var left = 0;
					var top = 0;

					width = 50;
					height = 50;

					top = ($(window).height() - height) / 2 + $(window).scrollTop();
					left = ($(window).width() - width) / 2 + $(window).scrollLeft();

					if ($("#div_ajax_load_image").length != 0) {
						$("#div_ajax_load_image").css({
							"top": top + "px",
							"left": left + "px"
						});
						$("#div_ajax_load_image").show();
					} else {
						$('body').append('<div id="div_ajax_load_image" style="position:absolute; top:' + top + 'px; left:' + left + 'px; width:' + width + 'px; height:' + height + 'px; z-index:9999; background:#f0f0f0; filter:alpha(opacity=50); opacity:alpha*0.5; margin:auto; padding:0; "><img src="img/loadingImg/ajax_loader6.gif" style="width:50px; height:50px;"></div>');
					}
					
				},
				error: function(req) {
					//                    alert('통신실패');
					alert("상태 : " + req.status + ", " + req.responseText + ", error : " + req.error + ", ajax : groupSchedule.do");
				},
				complete: function() {
					 $("#div_ajax_load_image").hide();
					for (let item of memberVoteListSet.keys()) {
						//                        addMemberVoteList(item);
						//                        $("#voteList" + item).css("backgroundColor", "antiquewhite");
						$("#voteList" + item).css("background-image", "url(img/etcIcon/checked.png)");
					}
					$('#commentList .swiper-pagination').css('z-index', 450);
//					$('#commentList .swiper-slide').first().css('margin-top', '10px');
					
					swiperComment = new Swiper('#commentList .swiper-container', {
						pagination: '#commentList .swiper-pagination',
						direction: 'vertical',
						slidesPerView: 5,
						paginationClickable: true,
//						centeredSlides: true,
						spaceBetween: 10,
						//						spaceBetween: 30,
						mousewheelControl: true
					});
					
					swiperSelect = new Swiper('.modalSchduleInfo .swiper-container', {
						pagination: '.modalSchduleInfo .swiper-pagination',
						direction: 'vertical',
						slidesPerView: 5,
						paginationClickable: true,
//						centeredSlides: true,
						spaceBetween: 3,
						//						spaceBetween: 30,
						mousewheelControl: true
					});
				}
			})
		}
		// 선택한 날짜 등록/삭제
		function addMemberVoteList(date) {
			if (memberVoteListSet.has(date)) {
				memberVoteListSet.delete(date);
				//                $("#voteList" + date).css("backgroundColor", "white");
				$("#voteList" + date).css("background-image", "url(img/etcIcon/unchecked.png)");
			} else {
				memberVoteListSet.add(date);
				//                $("#voteList" + date).css("backgroundColor", "antiquewhite");
				$("#voteList" + date).css("background-image", "url(img/etcIcon/checked.png)");
				//                console.log("등록 : " + date);
			}
			console.log(memberVoteListSet);
		}
		// 아이디로 생일목록에서 이름 검색
		function findMemberName(mem_id) {
			for (let item of birthSet.keys()) {
				//                console.log(item);
				//                console.log(item.split("-")[2]);

				if (item.split("-")[2] == mem_id) {
					return item.split("-")[1];
				}
			}
			return '(방에서 나간 사용자)';
		}
		// 투표 등록!
		function addVoteList(cal_num) {
			if (login_userId.match(group_master)) {
				alert("방장은 투표하면 안됩니다!!!");
				return;
			}

			//            console.log(Array.from(memberVoteListSet).sort());
			var addVoteListSort = Array.from(memberVoteListSet).sort();
			var str = "";

			if (memberVoteListSet.size > 0) {

				for (var i = 0; i < addVoteListSort.length; i++) {
					str += addVoteListSort[i] + "-" + login_userId;

					if ((i + 1) < addVoteListSort.length) {
						str += ",";
					}
				}
			} else {
				str = "00000000-" + login_userId;
			}

			console.log(str);

			$.ajax({
				type: 'post',
				url: 'addVote.do',
				data: {
					cal_num: cal_num,
					voteList: str,
					loginUser: login_userId
				},
				dataType: "json",
				success: function(data) {
					console.log(data);
					alert("투표가 반영되었습니다!");
					$("#modal2").css("display", "none");
					//                    getGroupInfo();
					window.location.reload(true);
				},
				beforeSend: function() {
					var width = 0;
					var height = 0;
					var left = 0;
					var top = 0;

					width = 50;
					height = 50;

					top = ($(window).height() - height) / 2 + $(window).scrollTop();
					left = ($(window).width() - width) / 2 + $(window).scrollLeft();

					if ($("#div_ajax_load_image").length != 0) {
						$("#div_ajax_load_image").css({
							"top": top + "px",
							"left": left + "px"
						});
						$("#div_ajax_load_image").show();
					} else {
						$('body').append('<div id="div_ajax_load_image" style="position:absolute; top:' + top + 'px; left:' + left + 'px; width:' + width + 'px; height:' + height + 'px; z-index:9999; background:#f0f0f0; filter:alpha(opacity=50); opacity:alpha*0.5; margin:auto; padding:0; "><img src="img/loadingImg/ajax_loader6.gif" style="width:50px; height:50px;"></div>');
					}
					
				},
				complete: function() {
					 $("#div_ajax_load_image").hide();
					
				},
				error: function(req) {
					//                    alert('통신실패');
					alert("상태 : " + req.status + ", " + req.responseText + ", error : " + req.error + ", ajax : addVote.do");
				}
			})
		}
		// 방장 투표날짜 정하기
		function selectVoteList(cal_num) {
			//            var svlSet = new Set();
			//            svlSet = voteMemberSet;
			//            
			console.log(memTempList);
			if (!login_userId.match(group_master)) {
				alert("방장아니면 결정 못합니다!!!");
				return;
			} else if (memTempList.size < 2) {
				alert("아직 투표한 사람이 없습니다!!!");
				return;
			}
			//            else if(memberVoteListSet.size != 1)
			//            {
			//                alert("1개의 날짜만 선택하세요!!!");
			//            }
			var masterCheck = $(':radio[name="masterSelected"]:checked').val();

			if (masterCheck == null) {
				alert("날짜를 선택하세요!!!");
				return;
			}
			//            console.log(masterCheck);

			var groupId = location.href.split("=")[1];

			$.ajax({
				type: 'post',
				url: 'scheduleSelected.do',
				data: {
					groupId: groupId,
					calNum: cal_num,
					calDate: masterCheck
				},
				dataType: "json",
				success: function(data) {
					console.log(data);

					window.location.reload(true);
				},
				beforeSend: function() {
					var width = 0;
					var height = 0;
					var left = 0;
					var top = 0;

					width = 50;
					height = 50;

					top = ($(window).height() - height) / 2 + $(window).scrollTop();
					left = ($(window).width() - width) / 2 + $(window).scrollLeft();

					if ($("#div_ajax_load_image").length != 0) {
						$("#div_ajax_load_image").css({
							"top": top + "px",
							"left": left + "px"
						});
						$("#div_ajax_load_image").show();
					} else {
						$('body').append('<div id="div_ajax_load_image" style="position:absolute; top:' + top + 'px; left:' + left + 'px; width:' + width + 'px; height:' + height + 'px; z-index:9999; background:#f0f0f0; filter:alpha(opacity=50); opacity:alpha*0.5; margin:auto; padding:0; "><img src="img/loadingImg/ajax_loader6.gif" style="width:50px; height:50px;"></div>');
					}
					
				},
				complete: function() {
					 $("#div_ajax_load_image").hide();
					
				},
				error: function(req) {
					//                    alert('통신실패');
					alert("상태 : " + req.status + ", " + req.responseText + ", error : " + req.error + ", ajax : scheduleSelected.do");
				}
			})
		}
		// 방인원 출력함수
		function getJoinMember() {
			var group_id = location.href.split("=")[1];

			$.ajax({
				type: 'post',
				url: 'getGroupMember.do',
				data: {
					groupId: group_id
				},
				dataType: "json",
				success: function(data) {
					console.log(data);

					var joinMemberString = "";
					var joinGMString = "";
					var memIdList = new Set();
					var boxString = "";

					if (data != null) {
						var count = 0;
						for (var i = 0; i < data.length; i++) {
							var joinTempString = "";


							joinTempString += "<div class='memberBox' id='mem" + (count++) + "'>";

							joinTempString += "<div class='memberImgBox'><img class='memberImg' src='" + data[i].MEMBER_IMG + "'></div>"; // memberImgBox
							joinTempString += "<div class='memberInfoBox'>" + data[i].MEMBER_NAME + "(" + data[i].MEMBER_ID + ")</div>"; // memberInfoBox
                            
                            
                            if (login_userId.match(group_master)) {
								if (data[i].MEMBER_ID.match(group_master)) {
									joinTempString += "<img class='radioGM' src='img/etcIcon/crown.png'>";
								} else {
									joinTempString += "<input class='radioGM' onclick='showGiveBox(this)' type='radio' name='selectGM' value='" + data[i].MEMBER_NAME + "," + data[i].MEMBER_ID + "'>";
								}
							}
                            
							if (login_userId.match(group_master)) {
								joinTempString += "<input id='btn" + data[i].MEMBER_ID + "' class='giveBox' type='button' value='방장 넘기기'>";
								// onclick='giveGM(" + data[i].MEMBER_ID + ")'
							}
							joinTempString += "</div>"; // memberBox


							joinTempString += "";

							memIdList.add(data[i].MEMBER_ID);

							if (data[i].MEMBER_ID.match(group_master)) {
								joinGMString += joinTempString;
							} else {
								joinMemberString += joinTempString;
							}
						}
					}

					if (login_userId.match(group_master)) {
						boxString += '<input id="giveGM" type="button" value="방장위임" onclick="giveGroupMaster()">&nbsp;';
					}
					boxString += '<input type="button" value="닫기" onclick="closeModal3()">';

					$("#buttonBox3").html(boxString);
					$("#divMemberList").html(joinGMString + joinMemberString);
					$(".memberBox").hover().css('cursor', 'pointer');
					$(".memberBox").css('margin-bottom', '10px');
					$(".memberBox").css('display', 'inline-block');
					$("#modal3").css('display', 'block');
					$("#blindCover").css('display', 'block');
					$(".radioGM").css('display', 'none');
					$(".giveBox").css('display', 'none');

					var count = 0;
					for (let item of memIdList.keys()) {
						$('#mem' + (count++)).click(function() {
							getMemInfo(item);
						})
					}
				},
				beforeSend: function() {
					var width = 0;
					var height = 0;
					var left = 0;
					var top = 0;

					width = 50;
					height = 50;

					top = ($(window).height() - height) / 2 + $(window).scrollTop();
					left = ($(window).width() - width) / 2 + $(window).scrollLeft();

					if ($("#div_ajax_load_image").length != 0) {
						$("#div_ajax_load_image").css({
							"top": top + "px",
							"left": left + "px"
						});
						$("#div_ajax_load_image").show();
					} else {
						$('body').append('<div id="div_ajax_load_image" style="position:absolute; top:' + top + 'px; left:' + left + 'px; width:' + width + 'px; height:' + height + 'px; z-index:9999; background:#f0f0f0; filter:alpha(opacity=50); opacity:alpha*0.5; margin:auto; padding:0; "><img src="img/loadingImg/ajax_loader6.gif" style="width:50px; height:50px;"></div>');
					}
					
					// $("#div_ajax_load_image").hide();
				},
				complete: function() {
					$("#div_ajax_load_image").hide();

				},
				error: function(req) {
					//                    alert('통신실패');
					alert("상태 : " + req.status + ", " + req.responseText + ", error : " + req.error + ", ajax : getGroupMember.do");
				}
			})
		}
		// 친구창 클릭시 정보 출력 함수
		function getMemInfo(member_id) {
			console.log(member_id);
		}
		// 방장위임 클릭시 이벤트
		var toggleGGM = true;

		function giveGroupMaster() {
			if (toggleGGM) {
				$(".radioGM").css('display', 'inline-block');
				$('#giveGM').val("취소");
			} else {
				$(".radioGM").css('display', 'none');
				$('.radioGM').prop('checked', false);
				$(".giveBox").css('display', 'none');
				$('#giveGM').val("방장위임");
			}
			toggleGGM = !toggleGGM;
			//			$('#giveGM').click(function() {
			//				$('#giveGM').val("방장위임");
			//				$('#giveGM').click(function() {
			//					$("#anchor_test2").attr('onclick', 'giveGroupMaster()').click(clickEvent);
			//				})
			//				$(".radioGM").css('display', 'none');
			//				$('input:radio[name="selectGM"]').prop('checked', false);
			//			});

			//			$('#giveGM').attr('onclick', 'giveGroupMaster()');

			//			var mId = $(':radio[name="selectGM"]:checked').val();
			//			$(':radio[name="selectGM"]:checked').parent.append("<input type='button' value'방장 넘기기' onclick='giveGM(" + mId + ")'>");
		}
		// 라디오 클릭시 이벤트
		function showGiveBox(radio) {
			$(".giveBox").css('display', 'none');
			$("#btn" + radio.value.split(",")[1]).css('display', 'inline-block');
			$("#btn" + radio.value.split(",")[1]).click(function() {
				// 방장 위임 ajax
				//				console.log(radio.value);
				if (!login_userId.match(group_master)) {
					alert("방장위임은 방장만 가능합니다!!!");
					return;
				}

				var group_id = location.href.split("=")[1];

				$.ajax({
					type: 'post',
					url: 'changeGroupMaster.do',
					data: {
						groupID: group_id,
						beforeMaster: group_master,
						afterMaster: radio.value.split(",")[1],
						afterMasterName: radio.value.split(",")[0]
					},
					dataType: "json",
					success: function(data) {
						console.log(data);

					},
					beforeSend: function() {
						var width = 0;
						var height = 0;
						var left = 0;
						var top = 0;

						width = 50;
						height = 50;

						top = ($(window).height() - height) / 2 + $(window).scrollTop();
						left = ($(window).width() - width) / 2 + $(window).scrollLeft();

						if ($("#div_ajax_load_image").length != 0) {
							$("#div_ajax_load_image").css({
								"top": top + "px",
								"left": left + "px"
							});
							$("#div_ajax_load_image").show();
						} else {
							$('body').append('<div id="div_ajax_load_image" style="position:absolute; top:' + top + 'px; left:' + left + 'px; width:' + width + 'px; height:' + height + 'px; z-index:9999; background:#f0f0f0; filter:alpha(opacity=50); opacity:alpha*0.5; margin:auto; padding:0; "><img src="img/loadingImg/ajax_loader6.gif" style="width:50px; height:50px;"></div>');
						}
					},
					complete: function() {
						$("#div_ajax_load_image").hide();
						window.location.reload(true);
					},
					error: function(req) {
						//                    alert('통신실패');
						alert("상태 : " + req.status + ", " + req.responseText + ", error : " + req.error + ", ajax : getGroupMember.do");
					}
				})
			})
			//  onclick='giveGM(" + data[i].MEMBER_ID + ")'
		}
		// member_choice로 확정/투표 구분
		function scheduleCheck(member_choice, cal_date) {
			// member_birth?
			// 확정되면 true값 아니면 false값 반환
			// 아이디는 6~12
			//            console.log(member_choice);
			//            console.log(cal_date);

			if (member_choice == "" || cal_date.indexOf(',') >= 0) {
				//                console.log("false : " + member_choice);
				return false;
			} else if (member_choice.indexOf(",") == -1) {
				//                console.log("false : " + member_choice);
				return false;
			} else {
				//                console.log(member_choice);
				var memSplit = member_choice.split(",");
				//                var memSplit = new Array(member_choice.split(","));
				//                console.log(memSplit);
				var matchCount = 0;

				for (var i = 0; i < memSplit.length; i++) {
					if (memSplit[i].indexOf('-') >= 0 && !memSplit[i].split("-")[0].match("00000000")) {
						//                        console.log("false : " + memSplit[i].split("-")[0]);
						return false;
					} else if (memSplit[i].indexOf('-') >= 0 && memSplit[i].split("-")[0].match("00000000")) {
						matchCount++;
					}
				}

				if (memSplit.length == matchCount) {
					//                    console.log("false : " + matchCount);
					return false;
				}
				//                var dateSplit;
				//                var count = 0;
				//                
				//                // str2.indexOf(',') == -1
				//                if(cal_date.indexOf(',') >= 0)
				//                {
				//                    dateSplit = new Array(cal_date.split(","));
				//                }
				////                console.log(memSplit);
				//                
				//                for(var i = 0; i < memSplit.length; i++)
				//                {
				//                    if(memSplit[i].length > 8)
				//                    {
				//                        if(memSplit[i].substr(0,8).match(cal_date))
				//                        {
				////                            console.log(memSplit[i].substr(0,8) + " / " + cal_date);
				//                            count++;
				//                        }
				//                    }
				//                    else if(count > 1)
				//                    {
				//                        return false;
				//                    }
				//                }
			}

			return true;
		}
		// 방나가기 모달
		function showModal4() {
			$('#modal4').css('display', 'block');
			$('#blindCover').css('display', 'block');
		}
		// 방나가기 메서드
		function getOutRoom() {
			if (login_userId.match(group_master) && groupCount > 0) {
				getJoinMember();
				alert("방장은 방을 나갈 수 없습니다. 방장을 선택해주세요.");
				closeModal4();
				return;
				//				$('#groupTitle').click();
				//				setTimeout(giveGroupMaster(), 300);
				//				$('#giveGM').trigger('click');
				//				$('.radioGM').css('display','inline-block');
				//				setTimeout(function() { $('#giveGM').trigger('click'), 500});
				//				setTimeout(function() { giveGroupMaster(), 300});
				//				$('.radioGM').css('display','inline-block');
			}

			var groupId = location.href.split("=")[1];
			$.ajax({
				type: 'post',
				url: 'setRoomOut.do',
				data: {
					groupID: groupId,
					userID: login_userId
				},
				dataType: "json",
				success: function(data) {
					console.log(data);

				},
				beforeSend: function() {
					var width = 0;
					var height = 0;
					var left = 0;
					var top = 0;

					width = 50;
					height = 50;

					top = ($(window).height() - height) / 2 + $(window).scrollTop();
					left = ($(window).width() - width) / 2 + $(window).scrollLeft();

					if ($("#div_ajax_load_image").length != 0) {
						$("#div_ajax_load_image").css({
							"top": top + "px",
							"left": left + "px"
						});
						$("#div_ajax_load_image").show();
					} else {
						$('body').append('<div id="div_ajax_load_image" style="position:absolute; top:' + top + 'px; left:' + left + 'px; width:' + width + 'px; height:' + height + 'px; z-index:9999; background:#f0f0f0; filter:alpha(opacity=50); opacity:alpha*0.5; margin:auto; padding:0; "><img src="img/loadingImg/ajax_loader6.gif" style="width:50px; height:50px;"></div>');
					}
				},
				complete: function() {
					$("#div_ajax_load_image").hide();
					//					window.location.reload(true);
					location.href = "/Twat/groupList.html";
				},
				error: function(req) {
					//                    alert('통신실패');
					alert("상태 : " + req.status + ", " + req.responseText + ", error : " + req.error + ", ajax : getGroupMember.do");
				}
			})
		}

		function voteMeeting(cal_date) {
			//            console.log(cal_date);
			//            console.log($("#yearSelect option:selected").val() + $("#monthSelect option:selected").val());
			//            console.log(scheSet);

			for (var vote = 0; vote < cal_date.length; vote++) {




				if (cal_date[vote].substr(0, 4) == $("#yearSelect option:selected").val() && parseInt(cal_date[vote].substr(4, 2)) == parseInt($("#monthSelect option:selected").val())) {

					$("#date" + parseInt(cal_date[vote].substr(6, 2))).css("backgroundColor", "red");


				}
				//                for (let item of scheSet.keys()){             
				//                    if(item = cal_date[vote]){
				//                        if($('#yearSelect option:selected').val() == cal_date[vote].substr(0,4) && $('#monthSelect option:selected').val() == parseInt(cal_date[vote].substr(4,2))){
				//                        
				//                        $('#date' + parseInt(cal_date[vote].substr(6,2))).css("backgroundColor","green");
				//                        
				//
				//                        }
				//                        
				//                    }
				//
				//                    
				//
				//                } 
			}
		}

		function selectYes() {
			//			            console.log("!");
			//            console.log(scheSet.toString());


			var calDate = "";
			var groupId = location.href.split("=")[1];
			//			console.log(groupId);

			var scheArr = Array.from(scheSet).sort();

			for (var scheIndex = 0; scheIndex < scheArr.length; scheIndex++) {

				calDate += scheArr[scheIndex] + ",";
			}


			console.log(calDate);





			var calTitle = $("#calTitle").val();


			$.ajax({
				type: 'post',
				url: 'ScheduleAdd.do',
				data: {
					title: calTitle,
					calDate: calDate,
					groupId: groupId

				},
				dataType: "json",
				success: function(data) {

					console.log(data);

					$.each(data, function(index, item) {
						//                        console.log(item.groupMaster);
						console.log(item.result);

					});

				},
				beforeSend: function() {
					var width = 0;
					var height = 0;
					var left = 0;
					var top = 0;

					width = 50;
					height = 50;

					top = ($(window).height() - height) / 2 + $(window).scrollTop();
					left = ($(window).width() - width) / 2 + $(window).scrollLeft();

					if ($("#div_ajax_load_image").length != 0) {
						$("#div_ajax_load_image").css({
							"top": top + "px",
							"left": left + "px"
						});
						$("#div_ajax_load_image").show();
					} else {
						$('body').append('<div id="div_ajax_load_image" style="position:absolute; top:' + top + 'px; left:' + left + 'px; width:' + width + 'px; height:' + height + 'px; z-index:9999; background:#f0f0f0; filter:alpha(opacity=50); opacity:alpha*0.5; margin:auto; padding:0; "><img src="img/loadingImg/ajax_loader6.gif" style="width:50px; height:50px;"></div>');
					}
					
				},
				complete: function() {
					 $("#div_ajax_load_image").hide();
					location.reload();
				},
				error: function(req) {

					alert("상태 : " + req.status + ", " + req.responseText + ", error : " + req.error + ", ajax : ScheduleAdd.do");
				}
			});

			//            for (let item of scheSet.keys()){
			//                
			//                
			//                
			//            }
			//            location.reload();
		}

		function selectNo() {
			$("#modal").css("display", "none");
			console.log("!!!!");
			$("#calTitle").val("");

		}

		function clickAddCal() {
			$("#selectAnswer").html("'" + $("#calTitle").val() + "'" + "의 제목으로 일정을 추가하시겠습니까?");
			var heights = $('#contentsHeight').css('height');
			if ($("#calTitle").val() != "") {
				$('.modal').animate({
					height: heights,
				}, 300);
			}
		}

		function addComment(comment) {
//			console.log(nowCalNum);
			console.log($(comment).children().eq(0).text());
			//내용 : ㅁㅁㅁ
			//5~
			var cal_memo = $("#voteMemo").text().substr(5, $("#voteMemo").text().length - 5);
			var group_id = location.href.split("=")[1];
			//일정 : 2017년 06월 27일
			//      5 11 15
			var first_cal = $("#voteDate").text().substr(5, 4) + $("#voteDate").text().substr(11, 2) + $("#voteDate").text().substr(15, 2);
			var new_memo = $("#commentContents").val();
			console.log(first_cal);
			if (new_memo == "") {
				console.log(scheduleSet);
				console.log(voteSet);
				alert("댓글을 입력해주세요!");
				return;
			}


			$.ajax({
				type: 'post',
				url: 'addComment.do',
				data: {
//					cal_memo: cal_memo,
					group_id: group_id,
//					first_cal: first_cal,
					user_id: login_userId,
					cal_num: nowCalNum,
					new_memo: new_memo

				},
				dataType: "json",
				success: function(data) {
//					getVoteInfo(nowCalNum);
					var svChk = false;
					for (let item of scheduleSet.keys())
					{
						if(item.split("-")[2].match(nowCalNum))
						{
							svChk = true;
//							getScheduleInfo(nowCalNum);
						}
					}
					
					if(svChk)
					{
						getScheduleInfo(nowCalNum);
					}
					else
					{
						getVoteInfo(nowCalNum);
					}


					$.each(data, function(index, item) {
						//                        console.log(item.userId);
					});

				},
				beforeSend: function() {
					var width = 0;
					var height = 0;
					var left = 0;
					var top = 0;

					width = 50;
					height = 50;

					top = ($(window).height() - height) / 2 + $(window).scrollTop();
					left = ($(window).width() - width) / 2 + $(window).scrollLeft();

					if ($("#div_ajax_load_image").length != 0) {
						$("#div_ajax_load_image").css({
							"top": top + "px",
							"left": left + "px"
						});
						$("#div_ajax_load_image").show();
					} else {
						$('body').append('<div id="div_ajax_load_image" style="position:absolute; top:' + top + 'px; left:' + left + 'px; width:' + width + 'px; height:' + height + 'px; z-index:9999; background:#f0f0f0; filter:alpha(opacity=50); opacity:alpha*0.5; margin:auto; padding:0; "><img src="img/loadingImg/ajax_loader6.gif" style="width:50px; height:50px;"></div>');
					}
					
				},
				complete: function() {
					$("#div_ajax_load_image").hide();
//					getVoteInfo(nowCalNum);
					//					console.log($('#commentContents').val());
					$('#commentContents').val(null);
				},
				error: function(req) {

					alert("상태 : " + req.status + ", " + req.responseText + ", error : " + req.error + ", ajax : addComment.do");
				}

			});
			//            location.reload();
			//            setTimeout(3000);
			//            getVoteInfo(nowCalNum);
		}

       
        
		function inviteFriends2() {
			
            
//            console.log(groupMem);


		}
        
        var comeOnStr = "";
         var comeOnFriends = new Set();
        function selectFriends(a){
//            var groupMem =  $(".memberInfoBox").text();
//            
//            for(var j = 0; j < groupMem.length; j++){
////                console.log(groupMem[j].memberId);
//                console.log(groupMem[j]);
//                
//            }
           //내가 선택한 친구를 저장할 Set
            var select = $(a).children().eq(1).text().split(":")[1].trim();
//            console.log(select);
            
            
            console.log($(a).children().eq(3).attr("src"));
            
            
            if($(a).children().eq(3).attr("src") != "img/etcIcon/friendcheck.png"){
                
                $(a).children().eq(3).attr("src","img/etcIcon/friendcheck.png");
                
                comeOnFriends.add(select); //선택한 아이디                
            }else{
                $(a).children().eq(3).attr("src","");
                comeOnFriends.delete(select);                
            }
            
            
//            console.log(comeOnFriends);

            
           
            
//            console.log(comeOnStr);
            
            
//            comeOnStr = Array.from(comeOnFriends);
            
            
        }
        
        function friendsComeOn(){
//            console.log(comeOnStr);
            for (let item of comeOnFriends.keys()) {
                
                comeOnStr += "," + item;
                
			}
            
            
            $.ajax({
				type: 'post',
				url: 'MyFriendsComeOn.do',
				dataType: "json",
                data:{
                    groupMem : comeOnStr,
                    groupId : location.href.split("=")[1]
                    
                },
                success: function(data) {
					//                    console.log(data);
					$.each(data, function(index, item) {                           
						

//						item;

					});
                    

				},
				beforeSend: function() {
					var width = 0;
					var height = 0;
					var left = 0;
					var top = 0;

					width = 50;
					height = 50;

					top = ($(window).height() - height) / 2 + $(window).scrollTop();
					left = ($(window).width() - width) / 2 + $(window).scrollLeft();

					if ($("#div_ajax_load_image").length != 0) {
						$("#div_ajax_load_image").css({
							"top": top + "px",
							"left": left + "px"
						});
						$("#div_ajax_load_image").show();
					} else {
						$('body').append('<div id="div_ajax_load_image" style="position:absolute; top:' + top + 'px; left:' + left + 'px; width:' + width + 'px; height:' + height + 'px; z-index:9999; background:#f0f0f0; filter:alpha(opacity=50); opacity:alpha*0.5; margin:auto; padding:0; "><img src="img/loadingImg/ajax_loader6.gif" style="width:50px; height:50px;"></div>');
					}
					
				},
				complete: function() {
					 $("#div_ajax_load_image").hide();
				},
				error: function(req) {

//					alert("상태 : " + req.status + ", " + req.responseText + ", error : " + req.error + ", ajax : MyFriendsComeOn.do");
				}

			});
            
            location.reload();
//            inviteFriends();
            
            
        }
        
        
        

		function inviteFriends() {
            var groupMem = new Array();
            for (let item of birthSet.keys()) {
//				console.log(item);
                groupMem.push(item.split("-")[2]);
			}
            
            var groupStr = String(groupMem);
//            console.log(groupStr);
            
            
            
			document.getElementById("inviteModal").innerHTML = "";
			$('#inviteModal').css('display', 'block').css('height', 'auto').css('border', '1px solid black');
			$('#blindCover').css('display', 'block');
			$.ajax({
				type: 'post',
				url: 'inviteFriends.do',
				dataType: "json",
                data:{
                    groupMem : groupStr
                },
                success: function(data) {
					//                    console.log(data);
					$.each(data, function(index, item) {
                        
                     

						
                            
                            document.getElementById("inviteModal").innerHTML += "<div id='friend" + index + "' style='border:3px solid black; margin:20px;' onclick='selectFriends(this)'><img src='" + item.friendImg + "'style='width:100px; height:100px; ' /><div class='friendId' onclick='inviteFriends2()'> 아이디 : " +
							item.friendId + "  </div><div class='friendName'> 이름 : " +
							item.friendName + "</div><img src='' class='checkImg'/></div>";
                            
                            
                        
						

						

					});
                    
                    
                    
                    document.getElementById("inviteModal").innerHTML += "<input type='button' value='친구초대' onclick='friendsComeOn()' />";

				},
				beforeSend: function() {
					var width = 0;
					var height = 0;
					var left = 0;
					var top = 0;

					width = 50;
					height = 50;

					top = ($(window).height() - height) / 2 + $(window).scrollTop();
					left = ($(window).width() - width) / 2 + $(window).scrollLeft();

					if ($("#div_ajax_load_image").length != 0) {
						$("#div_ajax_load_image").css({
							"top": top + "px",
							"left": left + "px"
						});
						$("#div_ajax_load_image").show();
					} else {
						$('body').append('<div id="div_ajax_load_image" style="position:absolute; top:' + top + 'px; left:' + left + 'px; width:' + width + 'px; height:' + height + 'px; z-index:9999; background:#f0f0f0; filter:alpha(opacity=50); opacity:alpha*0.5; margin:auto; padding:0; "><img src="img/loadingImg/ajax_loader6.gif" style="width:50px; height:50px;"></div>');
					}
					
				},
				complete: function() {
					
					 $("#div_ajax_load_image").hide();
				},
				error: function(req) {

					alert("상태 : " + req.status + ", " + req.responseText + ", error : " + req.error + ", ajax : inviteFriends.do");
				}

			});


		}

	</script>
</head>

<body>
    <div id="newWrap">
      <nav class="left_nav">
        <div id="userInfo">
            <ul id="user_Img_Cover" class="nav_ul" onclick="location.href='myInfo.html'">
                <li class="nav_li">
                    <img id="user_Img" src=""/>
                </li>
                <li class="nav_li idLi">
                    <div id="user_Id"></div>
                </li>
            </ul>
        </div>
        <ul class="nav_ul" id="nav_menu">
            <li class="nav_li"><a class="nav_text" href="home.html">메인</a></li>
            <li class="nav_li"><a class="nav_text" href="myCalendar.html">개인</a></li>
            <li class="nav_li"><div id="navHere"></div><a class="nav_text" href="groupList.html">모임</a><div id="newContents">N</div></li>
            <li class="nav_li"><a class="nav_text" href="friendList.html">지인</a></li>
            <li class="nav_li"><a class="nav_text" href="qnaList.html">문의</a></li>
        </ul>
        <ul id="logout" class="nav_ul" onclick="logout()">
             <li class="nav_li"><a class="nav_text" onclick="logout();">아웃</a>
        </ul>
          
    </nav>

		<div id="main_container">
			<img id='roomOut' src="img/etcIcon/door.png" onclick="showModal4()">
			<div id="container">
				<!-- {방 이름, 방장, 설정}, {단체일정}, {진행중인 투표}, {가까운 이벤트} -->
				<div id="left-side">
					<!-- {방 이름, 방장, 설정} -->
					<div class="top">
						<!-- 방 아이콘 -->
						<div id="icon"></div>
						<!-- 내용(제목, 방장, 방장 외 인원수) -->
						<div id="content">
							<!-- 방제목 -->
							<div id="title"></div>
							<!-- 방 인원 -->
							<div id="member">
								<!-- 방장 : span? div? 고민 -->
								<div id="master"></div>
								<!-- 방장 외 인원 : span? div? 고민 -->
								<div id="otherMembers"></div>
                                <img id='configMemInfo' src="img/etcIcon/search.png" onclick='getJoinMember()'>
							</div>
						</div>
						<!-- 설정 -->
						<div id="config">
                        <div id="btnCover">
                            <div onclick="addSchedule()" class="addschedule">일정추가하기</div>
                            <div onclick="inviteFriends()" class="addschedule">친구초대하기</div>
<!--
							<input type="button" value="일정추가하기" onclick="addSchedule()" class="addschedule" />
							<input type="button" value="친구초대하기" onclick="inviteFriends()" class="addschedule" />
-->
						</div>
                            
                            </div>
					</div>
					<!-- {단체일정} -->
					<div class="schedule" ondrop="drop(event);" ondragover="allowDrop(event);">
						<!-- 4개의 div를 동일하게 셋팅 -->
						<div class="title">
							<!-- 제목 -->
							<div id="secheduleName">단체 일정
								<div class="stick">
								</div>
							</div>
						</div>
						<div class="contentBox">
						</div>
						<div class="swiper-container">
							<div class="swiper-wrapper"></div>
							<!-- Add Pagination -->
							<div class="swiper-pagination"></div>
						</div>
						<!--
                <div class="content">
                    <div class="left"></div>
                    <div class="middle">
                        <div class="up"></div>
                        <div class="down">
                            <div></div>
                            <div></div>
                        </div>
                    </div>
                    <div class="right">
                        <div class="up"></div>
                        <div class="down"></div>
                    </div>
                </div>
--></div>
					<!-- {진행중인 투표} -->
					<div class="vote">
						<div class="title">
							<div id="voteName">진행중인 투표
								<div class="stick">
								</div>
							</div>
						</div>
						<div class="contentBox">
						</div>
						<div class="swiper-container">
							<div class="swiper-wrapper"></div>
							<!-- Add Pagination -->
							<div class="swiper-pagination"></div>
						</div>
						<!--
                <div class="content">
                    <div class="left"></div>
                    <div class="middle">
                        <div class="up"></div>
                        <div class="down">
                            <div></div>
                            <div></div>
                        </div>
                    </div>
                    <div class="right">
                        <div class="up"></div>
                        <div class="down"></div>
                    </div>
                </div>
--></div>
					<!-- {가까운 이벤트} -->
					<div class="event">
						<div class="title">
							<div id="eventName">친구 생일
								<!--
								<div class="stick">
								</div>
-->
							</div>
						</div>
						<div class="contentBox">
						</div>
						<div class="swiper-container">
							<div class="swiper-wrapper"></div>
							<!-- Add Pagination -->
							<div class="swiper-pagination"></div>
							<div class="swiper-button-next"></div>
							<div class="swiper-button-prev"></div>
						</div>
					</div>
				</div>
				<!-- {달력}, {알수없는 무언가} -->
				<div id="right-side">
					<!-- {달력} -->
					<div class="cal">
						<table id="calendar">
							<tr>
								<td>
									<label id="preButton" onclick="prevCalendar()"><img src="img/moveIcon/left.png" style="cursor:pointer;" /></label>
								</td>
								<td colspan="5" align="center" id="calendarYM">
									<select id="yearSelect">
                                        <option>2017</option>
                                        <option>2018</option>
                                        <option>2019</option>
                                        <option>2020</option>
                                        <option>2021</option>
                                        <option>2022</option>
                                        <option>2023</option>
                                        <option>2024</option>
                                        <option>2025</option>
                                        <option>2026</option>
                                        <option>2027</option>
                                        <option>2028</option>
                                        <option>2029</option>
                                        <option>2030</option>
                                    </select> 년
									<select id="monthSelect">
                                        <option>1</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                        <option>5</option>
                                        <option>6</option>
                                        <option>7</option>
                                        <option>8</option>
                                        <option>9</option>
                                        <option>10</option>
                                        <option>11</option>
                                        <option>12</option>
                                    </select> 월 </td>
								<td>
									<label id="nextButton" onclick="nextCalendar()"><img src="img/moveIcon/right.png" style="cursor:pointer;" /></label>
								</td>
							</tr>
							<tr style="height:30px;">
								<td>일</td>
								<td>월</td>
								<td>화</td>
								<td>수</td>
								<td>목</td>
								<td>금</td>
								<td>토</td>
							</tr>
						</table>
						<script>
							//                            buildCalendar();

						</script>
						<!-- 버튼들인데 달력 div 태그안에 밀어 넣었음 종길..-->


						<div class="admin">
							<div class="title"></div>
							<div class="content"></div>
						</div>

					</div>
					<!-- 모달~ 모달~                                 ------------------------------>
					<footer>
						<div id="blindCover" class="blind" onclick="closeModal();"></div>
						<div id="blindCoverWhite" class="blind"></div>
						<span class='modal' style="border:1px solid black;">
							<div id="contentsHeight">
								<div id="titleAdd">
									<input type="text" placeholder="일정 제목을 입력하세요" id="calTitle" maxlength="20"/> 
									<div id="groupAddBtn" onclick="clickAddCal()">추가하기</div>
								</div>
                           
								<div id="answerBox">
									<div id="selectAnswer"></div>
                                    
                                    
									<div class="btnCenter">
										<div class="choiceBtn" id="yesButton" onclick="selectYes()"  > 예 </div>
										<div class="choiceBtn" id="noButton" onclick="closeModal()"> 아니오 </div>
									</div>
                                    
                                    
								</div>
							</div>
						</span>

						<div id='modal2'>
							<div id="modalTitle"></div>
							<div id="modalContent">
								<div class="modalSchduleInfo">
                                    <div class="mSIinfo"></div>
                                    
                                    
                                <div class="vLBTitle">일정투표</div>
								<div id="voteButtonBox">
									<input type="button" value="투표하기" onclick="addVoteList()" />
								</div>
									<div class="swiper-container">
										<div class="swiper-wrapper">
										</div>
										<!-- Add Pagination -->
										<div class="swiper-pagination"></div>
									</div>
									
                                </div>
								<div class="modalComment">
<!--									<div style="display:inline-block; height:20px; font-weight:bold;">댓글 </div>-->
<!--									<div class="stick" style="display:block; width:100%; margin-bottom:10px;"></div>-->
									<!--
									<fieldset>
										<legend style="height:22px;">댓글</legend>
-->
									<div id="commentList">
										<div class="swiper-container">
											<div class="swiper-wrapper">
											</div>
											<!-- Add Pagination -->
											<div class="swiper-pagination"></div>
										</div>
									</div>
									<div id="myComment">
										<input type="text" placeholder="댓글을 입력하세요" id="commentContents" onkeyup="if(event.keyCode==13) {addComment(this)}" />
										<button class="ndjButton" id="confirm_button" onclick="addComment(this)">확인</button>
									</div>
									<!--									</fieldset>-->
								</div>
								<button class="ndjButton" onclick="closeModal2();">닫기</button>
							</div>
						</div>

						<div id='modal3'>
							<h3>친구목록
								<div class="stick">
								</div>
							</h3>
							<div id='divMemberList'>

							</div>
							<div id='buttonBox3'>
								<!--
								<input id='giveGM' type="button" value="방장위임" onclick="giveGroupMaster()">
								<input type="button" value="닫기" onclick="closeModal3()">
-->
							</div>
						</div>
						<div id='modal4'>
							<h3>정말로 방에서 나가시겠습니까?</h3>
							<input type="button" value="예" onclick="getOutRoom()">
							<input type="button" value="아니오" onclick="closeModal4()">
						</div>

						<div id="inviteModal">

                            
						</div>

					</footer>



					<script>
						//모달 사라짐
						function closeModal() {
							$('#blindCover').css('display', 'none');
							$('.modal').css('display', 'none');
							$('#inviteModal').css('display', 'none');
							$('.modal input').val("");

							$('#modal2').css('display', 'none');
							$('#modal3').css('display', 'none');
							$('#modal4').css('display', 'none');
						}

						function closeModal2() {
							$('#modal2').css('display', 'none');
							$('#blindCover').css('display', 'none');
						}

						function closeModal3() {
							$('#modal3').css('display', 'none');
							$('#blindCover').css('display', 'none');
						}

						function closeModal4() {
							$('#modal4').css('display', 'none');
							$('#blindCover').css('display', 'none');
						}

					</script>
					<style>
						.modal,
						#inviteModal {
							position: fixed;
							display: none;
							top: 50%;
							left: 50%;
							transform: translate(-50%, -50%);
							background-color: white;
							width: 350px;
							padding: 30px 10px 20px 10px;
							overflow: hidden;
							height: 40px;
							z-index: 1000;
						}
						
						textarea:focus,
						input:focus {
							outline: none;
						}
						
						#titleAdd {
							margin-bottom: 30px;
						}
						
						#groupAddBtn {
							display: inline-block;
							width: 70px;
							height: 30px;
							line-height: 30px;
							text-align: center;
							cursor: pointer;
						}
						
						#calTitle {
							height: 23px;
							width: 250px;
							padding-left: 10px;
							margin-left: 10px;
							background-color: transparent;
							border: none;
							border-bottom: 1px solid gray;
						}
						
						#selectAnswer {
							margin-top: 10px;
							text-align: center;
							font-size: 17px;
						}
						
						.btnCenter {
							width: 290px;
							margin: 20px auto 20px auto;
							font-size: 17px;
						}
						
						.choiceBtn {
							display: inline-block;
							width: 48%;
							height: 50px;
							text-align: center;
							line-height: 50px;
							cursor: pointer;
							margin: none;
						}
						
						#modal2 {
							/*                            display: none;*/
							/*                            display: inline-block;*/
							width: 500px;
/*							height: 600px;*/
							height: 700px;
							background-color: #FFFFFF;
							/*                            position:absolute;*/
							/* 추가 */
							position: fixed;
							top: 50%;
							left: 50%;
							transform: translate(-50%, -50%);
							display: none;
							/*
                            top:300px;
                            left:200px;
*/                            
                            box-sizing: border-box;
							padding: 10px;
							border: 2px solid #E2E2E2;
/*							z-Index: 1000;*/
							z-index: 400;
							/*							text-align: center;*/
						}
						
						#modal2>div {
							/*							text-align: initial;*/
							text-align: left;
						}
						
						#modal2>div>div {
							display: block;
						}
						
/*
						#modal2 div {
														display: block;
						}
*/
						
						#modal3 {
							/*                            display: none;*/
							/*                            display: inline-block;*/
							background-color: #FFFFFF;
							/*                            position:absolute;*/
							/* 추가 */
							position: fixed;
							top: 50%;
							left: 50%;
							transform: translate(-50%, -50%);
							display: none;
							/*
                            top:300px;
                            left:200px;
*/                          
                            width: 300px;
							padding: 20px;
							padding-top: 10px;
							border: 2px solid #E2E2E2;
							z-Index: 1000;
						}
						
						#modal4 {
							/*                            display: none;*/
							/*                            display: inline-block;*/
							background-color: #FFFFFF;
							/*                            position:absolute;*/
							/* 추가 */
							position: fixed;
							top: 50%;
							left: 50%;
							transform: translate(-50%, -50%);
							display: none;
							/*
                            top:300px;
                            left:200px;
*/
							padding: 20px;
							padding-top: 10px;
							border: 2px solid #E2E2E2;
							z-Index: 1000;
							text-align: right;
						}

					</style>

					<!-- 모달~ 모달~                                 ------------------------------>

					<style>
						.panel {
							background-color: #444;
							height: 34px;
							padding: 10px;
						}
						
						.panel a#login_pop,
						.panel a#join_pop {
							border: 2px solid #aaa;
							color: #fff;
							display: block;
							float: left;
							margin-left: 10px;
							padding: 5px 10px;
							text-decoration: none;
							text-shadow: 1px 1px #000;
							-webkit-border-radius: 10px;
							-moz-border-radius: 10px;
							-ms-border-radius: 10px;
							-o-border-radius: 10px;
							border-radius: 10px;
							font-family: 'dotum';
						}
						
						a#login_pop:hover,
						a#join_pop:hover {
							border-color: #eee;
						}
						
						.overlay {
							background-color: rgba(0, 0, 0, 0.6);
							bottom: 0;
							cursor: default;
							left: 0;
							opacity: 0;
							position: fixed;
							right: 0;
							top: 0;
							visibility: hidden;
							z-index: 1;
							-webkit-transition: opacity .5s;
							-moz-transition: opacity .5s;
							-ms-transition: opacity .5s;
							-o-transition: opacity .5s;
							transition: opacity .5s;
						}
						
						.overlay:target {
							visibility: visible;
							opacity: 1;
						}
						
						.popup {
							background-color: #fff;
							border: 3px solid #fff;
							display: inline-block;
							left: 50%;
							opacity: 0;
							padding: 15px;
							position: fixed;
							text-align: justify;
							top: 40%;
							visibility: hidden;
							z-index: 10;
							-webkit-transform: translate(-50%, -50%);
							-moz-transform: translate(-50%, -50%);
							-ms-transform: translate(-50%, -50%);
							-o-transform: translate(-50%, -50%);
							transform: translate(-50%, -50%);
							-webkit-border-radius: 10px;
							-moz-border-radius: 10px;
							-ms-border-radius: 10px;
							-o-border-radius: 10px;
							border-radius: 10px;
							-webkit-box-shadow: 0 1px 1px 2px rgba(0, 0, 0, 0.4) inset;
							-moz-box-shadow: 0 1px 1px 2px rgba(0, 0, 0, 0.4) inset;
							-ms-box-shadow: 0 1px 1px 2px rgba(0, 0, 0, 0.4) inset;
							-o-box-shadow: 0 1px 1px 2px rgba(0, 0, 0, 0.4) inset;
							box-shadow: 0 1px 1px 2px rgba(0, 0, 0, 0.4) inset;
							-webkit-transition: opacity .5s, top .5s;
							-moz-transition: opacity .5s, top .5s;
							-ms-transition: opacity .5s, top .5s;
							-o-transition: opacity .5s, top .5s;
							transition: opacity .5s, top .5s;
						}
						
						.overlay:target+.popup {
							top: 50%;
							opacity: 1;
							visibility: visible;
						}
						
						.close {
							background-color: rgba(0, 0, 0, 0.8);
							height: 30px;
							line-height: 30px;
							position: absolute;
							right: 0;
							text-align: center;
							text-decoration: none;
							top: -15px;
							width: 30px;
							-webkit-border-radius: 15px;
							-moz-border-radius: 15px;
							-ms-border-radius: 15px;
							-o-border-radius: 15px;
							border-radius: 15px;
						}
						
						.close:before {
							color: rgba(255, 255, 255, 0.9);
							content: "X";
							font-size: 24px;
							text-shadow: 0 -1px rgba(0, 0, 0, 0.9);
						}
						
						.close:hover {
							background-color: rgba(64, 128, 128, 0.8);
						}
						
						.popup p,
						.popup div {
							margin-bottom: 10px;
						}
						
						.popup label {
							display: inline-block;
							text-align: left;
							width: 120px;
						}
						
						.popup input[type="text"],
						.popup input[type="password"] {
							border: 1px solid;
							border-color: #999 #ccc #ccc;
							margin: 0;
							padding: 2px;
							-webkit-border-radius: 2px;
							-moz-border-radius: 2px;
							-ms-border-radius: 2px;
							-o-border-radius: 2px;
							border-radius: 2px;
						}
						
						.popup input[type="text"]:hover,
						.popup input[type="password"]:hover {
							border-color: #555 #888 #888;
						}
						
						td {
							position: relative
						}
						
						td>div:first-child {
							position: absolute;
							top: 0;
							left: 0;
							width: 22px;
							height: 22px;
							text-align: center;
                            z-index: 1;
						}
						
						.lunar {
							position: absolute;
							font-size: 1px;
							top: 22px;
							left: 3px;
						}

                        .choiceDate{
                            position: absolute;
                            background-image: url(img/etcIcon/checked2.png);
                            top: 0;
                            right: 0;
                            width: 25px;
                            height: 25px;
                            background-size: cover;
                            
                        }
                        .dateChk{
                            position: absolute;
                            top: 0;
                            left: 0;
                            width: 102%;
                            height: 20px;
                            background-size: cover;
                            opacity: 0.6;
                        }
                        .voteImg{
                            position: absolute;
                            display: inline-block;
                            right: 0;
                            bottom: 0;
                            width: 25px;
                            height: 25px;
                        }
					</style>
				</div>
			</div>
		</div>
	</div>
	<script>
		//		var swiper = new Swiper('.swiper-container', {
		//			pagination: '.swiper-pagination',
		//			slidesPerView: 3,
		//			paginationClickable: true,
		//			spaceBetween: 30,
		//			freeMode: true
		//		});

	</script>
</body>

</html>
