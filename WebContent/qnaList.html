<!DOCTYPE html>
<html>
<head>
    <title>Untitled Document</title>
    <meta charset="UTF-8">
    <meta name="description" content="">
    <meta name="keywords" content="">
	<script src="js/jquery-3.2.1.min.js"></script>
	<style>
		ul {
			list-style: none;
/*			background: yellow;*/
		}
		#contentListWrap {
			background-color: bisque;
			height: 330px;
		}
		#contentTitleWrapUl li span, #contentListWrapUl li span {
			display: inline-block;
		}
		#contentTitleWrapUl {
			background-color: aliceblue;
		}
		#contentListWrapUl {
			border: 1px solid black;
		}
		span {
			border: 1px solid red;
		}
		.listNum {
			width: 60px;
		}
		.listCate {
			width: 100px;
		}
		.listTitle {
			width: 250px;
		}
		.listWriter {
			width: 80px;
		}
		.listDate {
			width: 50px;
		}
		.listViewNum {
			width: 70px;
		}
	</style>
	
	<script>
		// 건의사항 첫 페이지 리스트 뽑기
		function getList(page) {
        nowPage = page;
        var notfind = '0';
        $.ajax ({
            type : 'post',
            url : 'QnaGetList.do',
            dataType : "json",
            data: {page : page , val : notfind } ,
            success : function(data) {
                console.log(data);
                var userInfos = "";
                for(var i=0; i< data.length;i++){
                    var num = page*10+i+1-10;
                    if(i%2 !=0){
                        userInfos += '<li>';
                    }else{
                        userInfos += '<li>';    
                    }
                    
                    userInfos += '<span>'+num+'</span>';
                    userInfos += '<span>'+ data[i].QNA_CATEGORY +'</span>';
                    userInfos += '<span>'+ data[i].QNA_TITLE +'</span>';
                    userInfos += '<span>'+ data[i].MEMBER_ID +'</span>';
                    userInfos += '<span>'; 
                    userInfos += data[i].QNA_DATE.substring(0,10);
                    userInfos += '</span>';
					// 조회수 추가 해야함
                    userInfos += '</li>';
                }
                $('#contentListWrapUl').html(userInfos);
                
//				페이지 수 생기는 부분 추후 수정
//                var page_viewList = Paging(data[0].QNA_ID, 10, 10 ,nowPage, "PagingView");
//                $("#addPageCover").empty().html(page_viewList);

                
            }, error: function (req) {
                
                console.log(req);
            }
        });
    }
		
		
		// 건의사항 검색 후 결과 .... 연결만 해놓음
		function qnaSearchEnter(page) {
			nowPage = page;
        var pages =1;
        if(page >pages){
            pages = page;
        }
		$.ajax ({
			type : 'post',
			url : 'QnaGetList.do',
			dataType : "json",
			data: {searchCategory : $('#searchCategory').val(), page : pages ,val : $('#searchText').val()} ,
			success : function(data) {
				console.log(data);
				var userInfos = "";
					for(var i=0; i< data.length;i++){
						var num = pages*10+i+1-10;
						if(i%2 !=0){
							userInfos += '<li>';
						}else{
							userInfos += '<li>';    
						}

						userInfos += '<span>'+num+'</span>'; // 글번호
						userInfos += '<span>'+ data[i].QNA_CATEGORY +'</span>'; // 카테고리
						userInfos += '<span>'+ data[i].QNA_TITLE +'</span>'; // 제목
						userInfos += '<span>'+ data[i].MEMBER_ID +'</span>'; // 작성자
						userInfos += '<span>'; 
						userInfos += data[i].QNA_DATE.substring(0,10); // 날짜
						userInfos += '</span>';
						// 조회수 추가 해야함
						userInfos += '</li>';
					}
					$('#inputMemberinfo').html(userInfos);
				
//				페이지 수 생기는 부분 추후 수정
//				var page_viewList2 = Paging2(data[0].QNA_ID, 10, 10 ,pages, "S");
//				$("#addPageCover").empty().html(page_viewList2);


			}, error: function (req) {

				console.log(req);
			}
		});
		}
		
	</script>
</head>
<body>
	<div>
		<h4>문의사항 페이지</h4>
	</div>
	<div id="wrap">
		<div id="contentTitleWrap">
			<ul id="contentTitleWrapUl">
				<li>
					<span class="listNum">글번호</span>
					<span class="listCate">카테고리</span>
					<span class="listTitle">제목</span>
					<span class="listWriter">작성자</span>
					<span class="listDate">날짜</span>
					<span class="listViewNum">조회수</span>
				</li>
			</ul>
		</div>
		<div id="contentListWrap">
<!--		글 목록 예시			-->
			<ul id="contentListWrapUl">
<!--	여기에다가 추가 할거야
				<li>
					<span class="listNum">1</span>
					<span class="listCate">불만사항</span>
					<span class="listTitle">너무 불편해요.</span>
					<span class="listWriter">최승우</span>
					<span class="listDate">06-18</span>
					<span class="listViewNum">0</span>
				</li>
-->
			</ul>
		</div>
		<div>
			<input type="button" value="글쓰기" onclick="location.href='qnaWrite.html'"/>
			</div>
		<div id="contentBottomWrap">
			<span class="pageBtn" id="prePre_">처음</sapn>
			<span class="pageBtn" id="pre_"> &lt; </sapn>
			<span class="pageBtn pageNum" id="page_1" onclick=""> 1 </span>
			<span class="pageBtn" id="next_"> &gt; </sapn>
			<span class="pageBtn" id="nextnext_">끝</sapn>
		</div>
		<form id="qnaListForm" action="SearchQna.do" method="post">	
			<div>
				<select name="searchCategory">
					<option value="1">제목</option>
					<option value="2">글 내용</option>
					<option value="3">글 작성자</option>
				</select>
				<input type="text" name="searchBox" id="searchText"/>
				<input type="button" value="검색" onclick="qnaSearchEnter()"/>
			</div>
		</form>
	</div>
	
</body>
</html>
